$(document).ready(function(){$("#account-tabs").tabs().show();$("#my-name, #my-company, #my-floor, #my-section, #my-password, #my-cc").off("click").on("click",function(){$(".wsite-button-blue").is(":visible")||($(this).hide(),$("#edit-"+$(this).attr("id")).show())});$(".cancel-button").off("click").on("click",function(){var a=$(this).data("type");$("#edit-my-"+a).hide();$("#my-"+a).show();switch(a){case "section":$("#section-name").val($("#cur-section-name").html());break;case "name":$("#first-name").val($("#cur-first-name").html()),
$("#last-name").val($("#cur-last-name").html())}});$(".save-button").off("click").on("click",function(){var a={},c=$(this).data("type");if("password"==c){var b=$("#password-np").val(),d=$("#password-cp").val();if(b!=d){writeReturnMessage(c,"Passwords do not match");return}if(!validatePassword($("#password-op").val())||!validatePassword(b)||!validatePassword(d))return}b=$("#edit-my-"+c);b.find("input").each(function(){a[$(this).attr("id")]=$(this).val()});0==Object.keys(a).length&&(d=b.find("select"),
a[d.attr("id")]=d.find("option:selected").text());var e=b.find(".return-message"),f=b.find(".sc-buttons");f.hide();e.html('<img src="images/spinner.gif" />');$.post("changeaccount.php",a,function(b){b=$.parseJSON(b);e.html(b.message);"success"==b.message?($.each(a,function(a,b){$("#cur-"+a).html(b)}),setTimeout(function(){$("#edit-my-"+c).find(".cancel-button").click();e.html("");f.show()},2E3)):f.show()})});$(".cancel-order").off("click").on("click",function(){if(confirm("Cancel your order?")){var a=
$(this);a.hide();var c=$('.cancel-order-message[data-orderid="'+a.data("orderid")+'"]');c.show();$.post("refund.php",{oid:$(this).data("orderid")},function(a){"success"==$.parseJSON(a).message?c.html("canceled"):c.html("failed")})}});$("#daily-email").off("change").on("change",function(){$.post("ogmhelper",{ogm:"aes",aes:$(this).val()})})});function validateEmail(a){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(a)}
function error_message(a){$("#login-error").html(a).fadeIn("slow")}function signup_error_message(a){$("#signup-error").html(a).fadeIn("slow")}function has_number(a){matches=a.match(/\d+/g);return null!=matches?!0:!1}function validatePassword(a){var c=$("#edit-my-password").find(".return-message");return-1!==a.indexOf(" ")?(c.html("Password cannot contain spaces"),!1):8>a.length?(c.html("Password must be at least 8 characters"),!1):!0}
function writeReturnMessage(a,c){$("#edit-my-"+a).find(".return-message").html(c)};

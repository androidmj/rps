(function(d){d.extend({tablesorter:new function(){function a(b,c){h(b+","+((new Date).getTime()-c.getTime())+"ms")}function h(b){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(b):alert(b)}function e(b,c){if(b.config.debug)var a="";if(0!=b.tBodies.length){var n=b.tBodies[0].rows;if(n[0])for(var u=[],q=n[0].cells.length,f=0;f<q;f++){var g=!1;d.metadata&&d(c[f]).metadata()&&d(c[f]).metadata().sorter?g=v(d(c[f]).metadata().sorter):b.config.headers[f]&&b.config.headers[f].sorter&&
(g=v(b.config.headers[f].sorter));if(!g)a:{g=b;for(var k=n,m=-1,F=f,e=t.length,p=!1,l=!1,w=!0;""==l&&w;)m++,k[m]?(p=k[m].cells[F],l=d.trim(y(g.config,p)),g.config.debug&&h("Checking if value was empty on row:"+m)):w=!1;for(k=1;k<e;k++)if(t[k].is(l,g,p)){g=t[k];break a}g=t[0]}b.config.debug&&(a+="column:"+f+" parser:"+g.id+"\n");u.push(g)}b.config.debug&&h(a);return u}}function v(b){for(var c=t.length,a=0;a<c;a++)if(t[a].id.toLowerCase()==b.toLowerCase())return t[a];return!1}function p(b){if(b.config.debug)var c=
new Date;for(var r=b.tBodies[0]&&b.tBodies[0].rows.length||0,n=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||0,u=b.config.parsers,q={row:[],normalized:[]},f=0;f<r;++f){var g=d(b.tBodies[0].rows[f]),k=[];if(g.hasClass(b.config.cssChildRow))q.row[q.row.length-1]=q.row[q.row.length-1].add(g);else{q.row.push(g);for(var m=0;m<n;++m)k.push(u[m].format(y(b.config,g[0].cells[m]),b,g[0].cells[m]));k.push(q.normalized.length);q.normalized.push(k)}}b.config.debug&&a("Building cache for "+r+" rows:",
c);return q}function y(b,c){if(!c)return"";b.supportsTextContent||(b.supportsTextContent=c.textContent||!1);return"simple"==b.textExtraction?b.supportsTextContent?c.textContent:c.childNodes[0]&&c.childNodes[0].hasChildNodes()?c.childNodes[0].innerHTML:c.innerHTML:"function"==typeof b.textExtraction?b.textExtraction(c):d(c).text()}function z(b,c){if(b.config.debug)var r=new Date;var n=c.row;c=c.normalized;for(var u=c.length,q=c[0].length-1,f=d(b.tBodies[0]),g=[],k=0;k<u;k++){var m=c[k][q];g.push(n[m]);
if(!b.config.appender)for(var h=n[m].length,e=0;e<h;e++)f[0].appendChild(n[m][e])}b.config.appender&&b.config.appender(b,g);g=null;b.config.debug&&a("Rebuilt table:",r);A(b);setTimeout(function(){d(b).trigger("sortEnd")},0)}function G(b){if(b.config.debug)var c=new Date;var r=H(b);$tableHeaders=d(b.config.selectorHeaders,b).each(function(c){this.column=r[this.parentNode.rowIndex+"-"+this.cellIndex];var a=b.config.sortInitialOrder;a="Number"!=typeof a?"desc"==a.toLowerCase()?1:0:1==a?1:0;this.count=
this.order=a;a=d.metadata&&!1===d(this).metadata().sorter?!0:!1;a||(a=b.config.headers[c]&&!1===b.config.headers[c].sorter?!0:!1);a&&(this.sortDisabled=!0);B(b,c)&&(this.order=this.lockedOrder=B(b,c));this.sortDisabled||(a=d(this).addClass(b.config.cssHeader),b.config.onRenderHeader&&b.config.onRenderHeader.apply(a));b.config.headerList[c]=this});b.config.debug&&(a("Built headers:",c),h($tableHeaders));return $tableHeaders}function H(b){var c=[],a={};b=b.getElementsByTagName("THEAD")[0].getElementsByTagName("TR");
for(var d=0;d<b.length;d++)for(var u=b[d].cells,h=0;h<u.length;h++){var f=u[h],g=f.parentNode.rowIndex,k=g+"-"+f.cellIndex,m=f.rowSpan||1;f=f.colSpan||1;"undefined"==typeof c[g]&&(c[g]=[]);for(var e=0;e<c[g].length+1;e++)if("undefined"==typeof c[g][e]){var p=e;break}a[k]=p;for(e=g;e<g+m;e++){"undefined"==typeof c[e]&&(c[e]=[]);k=c[e];for(var l=p;l<p+f;l++)k[l]="x"}}return a}function B(b,c){return b.config.headers[c]&&b.config.headers[c].lockedOrder?b.config.headers[c].lockedOrder:!1}function A(b){for(var c=
b.config.widgets,a=c.length,d=0;d<a;d++)C(c[d]).format(b)}function C(b){for(var c=w.length,a=0;a<c;a++)if(w[a].id.toLowerCase()==b.toLowerCase())return w[a]}function I(b,a){for(var c=a.length,d=0;d<c;d++)if(a[d][0]==b)return!0;return!1}function D(b,a,r,n){a.removeClass(n[0]).removeClass(n[1]);var c=[];a.each(function(b){this.sortDisabled||(c[this.column]=d(this))});b=r.length;for(a=0;a<b;a++)c[r[a][0]].addClass(n[r[a][1]])}function J(b,a){if(b.config.widthFixed){var c=d("<colgroup>");d("tr:first td",
b.tBodies[0]).each(function(){c.append(d("<col>").css("width",d(this).width()))});d(b).prepend(c)}}function E(b,c,d){if(b.config.debug)var r=new Date;for(var e="var sortWrapper = function(a,b) {",h=c.length,f=0;f<h;f++){var g=c[f][0],k=c[f][1];g="text"==b.config.parsers[g].type?0==k?x("text","asc",g):x("text","desc",g):0==k?x("numeric","asc",g):x("numeric","desc",g);var m="e"+f;e+="var "+m+" = "+g;e+="if("+m+") { return "+m+"; } ";e+="else { "}f=d.normalized[0].length-1;e+="return a["+f+"]-b["+f+
"];";for(f=0;f<h;f++)e+="}; ";e+="return 0; }; ";b.config.debug&&a("Evaling expression:"+e,new Date);eval(e);d.normalized.sort(sortWrapper);b.config.debug&&a("Sorting on "+c.toString()+" and dir "+k+" time:",r);return d}function x(b,a,d){var c="a["+d+"]";d="b["+d+"]";if("text"==b&&"asc"==a)return"("+c+" == "+d+" ? 0 : ("+c+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : ("+c+" < "+d+") ? -1 : 1 )));";if("text"==b&&"desc"==a)return"("+c+" == "+d+" ? 0 : ("+c+" === null ? Number.POSITIVE_INFINITY : ("+
d+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+c+") ? -1 : 1 )));";if("numeric"==b&&"asc"==a)return"("+c+" === null && "+d+" === null) ? 0 :("+c+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : "+c+" - "+d+"));";if("numeric"==b&&"desc"==a)return"("+c+" === null && "+d+" === null) ? 0 :("+c+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+c+"));"}var t=[],w=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",
cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=a;this.construct=function(a){return this.each(function(){if(this.tHead&&this.tBodies){this.config=
{};var b=d.extend(this.config,d.tablesorter.defaults,a);var h=d(this);d.data(this,"tablesorter",b);var n=G(this);this.config.parsers=e(this,n);var l=p(this);var q=[b.cssDesc,b.cssAsc];J(this);n.click(function(a){var c=h[0].tBodies[0]&&h[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&0<c){h.trigger("sortStart");d(this);c=this.column;this.order=this.count++%2;this.lockedOrder&&(this.order=this.lockedOrder);if(a[b.sortMultiSortKey])if(I(c,b.sortList))for(a=0;a<b.sortList.length;a++){var f=b.sortList[a],
e=b.headerList[f[0]];f[0]==c&&(e.count=f[1],e.count++,f[1]=e.count%2)}else b.sortList.push([c,this.order]);else{b.sortList=[];if(null!=b.sortForce)for(f=b.sortForce,a=0;a<f.length;a++)f[a][0]!=c&&b.sortList.push(f[a]);b.sortList.push([c,this.order])}setTimeout(function(){D(h[0],n,b.sortList,q);z(h[0],E(h[0],b.sortList,l))},1);return!1}}).mousedown(function(){if(b.cancelSelection)return this.onselectstart=function(){return!1},!1});h.bind("update",function(){var b=this;setTimeout(function(){b.config.parsers=
e(b,n);l=p(b)},1)}).bind("updateCell",function(b,a){b=this.config;var c=[a.parentNode.rowIndex-1,a.cellIndex];l.normalized[c[0]][c[1]]=b.parsers[c[1]].format(y(b,a),a)}).bind("sorton",function(a,c){d(this).trigger("sortStart");b.sortList=c;a=b.sortList;c=this.config;for(var f=a.length,e=0;e<f;e++){var h=a[e],g=c.headerList[h[0]];g.count=h[1];g.count++}D(this,n,a,q);z(this,E(this,a,l))}).bind("appendCache",function(){z(this,l)}).bind("applyWidgetId",function(b,a){C(a).format(this)}).bind("applyWidgets",
function(){A(this)});d.metadata&&d(this).metadata()&&d(this).metadata().sortlist&&(b.sortList=d(this).metadata().sortlist);0<b.sortList.length&&h.trigger("sorton",[b.sortList]);A(this)}})};this.addParser=function(b){for(var a=t.length,d=!0,e=0;e<a;e++)t[e].id.toLowerCase()==b.id.toLowerCase()&&(d=!1);d&&t.push(b)};this.addWidget=function(a){w.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(a,
c){return/^[-+]?\d*$/.test(d.trim(a.replace(/[,.']/g,"")))};this.clearTableBody=function(a){d.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(a.tBodies[0]):a.tBodies[0].innerHTML=""}}});d.fn.extend({tablesorter:d.tablesorter.construct});var e=d.tablesorter;e.addParser({id:"text",is:function(a){return!0},format:function(a){return d.trim(a.toLocaleLowerCase())},type:"text"});e.addParser({id:"digit",is:function(a,e){return d.tablesorter.isDigit(a,e.config)},format:function(a){return d.tablesorter.formatFloat(a)},
type:"numeric"});e.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(a){return d.tablesorter.formatFloat(a.replace(new RegExp(/[\u00a3$\u20ac]/g),""))},type:"numeric"});e.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){a=a.split(".");for(var e="",l=a.length,v=0;v<l;v++){var p=a[v];e=2==p.length?e+("0"+p):e+p}return d.tablesorter.formatFloat(e)},type:"numeric"});e.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},
format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});e.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return d.tablesorter.formatFloat(""!=a?(new Date(a.replace(new RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});e.addParser({id:"percent",is:function(a){return/%$/.test(d.trim(a))},format:function(a){return d.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"});
e.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return d.tablesorter.formatFloat((new Date(a)).getTime())},type:"numeric"});e.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,e){e=e.config;a=a.replace(/\-/g,"/");if("us"==e.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,
"$3/$1/$2");else if("uk"==e.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==e.dateFormat||"dd-mm-yy"==e.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return d.tablesorter.formatFloat((new Date(a)).getTime())},type:"numeric"});e.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return d.tablesorter.formatFloat((new Date("2000/01/01 "+a)).getTime())},
type:"numeric"});e.addParser({id:"metadata",is:function(a){return!1},format:function(a,e,l){a=e.config;a=a.parserMetadataName?a.parserMetadataName:"sortValue";return d(l).metadata()[a]},type:"numeric"});e.addWidget({id:"zebra",format:function(a){if(a.config.debug)var e=new Date;var l,v=-1,p;d("tr:visible",a.tBodies[0]).each(function(e){l=d(this);l.hasClass(a.config.cssChildRow)||v++;p=0==v%2;l.removeClass(a.config.widgetZebra.css[p?0:1]).addClass(a.config.widgetZebra.css[p?1:0])});a.config.debug&&
d.tablesorter.benchmark("Applying Zebra widget",e)}})})(jQuery);

(function(f){var C=f.Chart,y=f.addEvent,D=f.removeEvent,p=f.createElement,m=f.discardElement,A=f.css,q=f.merge,w=f.each,u=f.extend,F=Math.max,k=document,E=window,G=f.isTouchDevice,H=f.Renderer.prototype.symbols,x=f.getOptions(),v;u(x.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});x.navigation={menuStyle:{border:"1px solid #A0A0A0",
background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:G?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};x.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",
symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};f.post=function(b,a,d){var c;b=p("form",q({method:"post",
action:b,enctype:"multipart/form-data"},d),{display:"none"},k.body);for(c in a)p("input",{type:"hidden",name:c,value:a[c]},null,b);b.submit();m(b)};u(C.prototype,{getSVG:function(b){var a=this,d,c=q(a.options,b);k.createElementNS||(k.createElementNS=function(a,b){return k.createElement(b)});b=p("div",null,{position:"absolute",top:"-9999em",width:a.chartWidth+"px",height:a.chartHeight+"px"},k.body);var h=a.renderTo.style.width;var l=a.renderTo.style.height;h=c.exporting.sourceWidth||c.chart.width||
/px$/.test(h)&&parseInt(h,10)||600;l=c.exporting.sourceHeight||c.chart.height||/px$/.test(l)&&parseInt(l,10)||400;u(c.chart,{animation:!1,renderTo:b,forExport:!0,width:h,height:l});c.exporting.enabled=!1;c.series=[];w(a.series,function(a){d=q(a.options,{animation:!1,showCheckbox:!1,visible:a.visible});d.isInternal||c.series.push(d)});var n=new f.Chart(c,a.callback);w(["xAxis","yAxis"],function(b){w(a[b],function(a,c){c=n[b][c];a=a.getExtremes();var d=a.userMin;a=a.userMax;c&&(void 0!==d||void 0!==
a)&&c.setExtremes(d,a,!0,!1)})});h=n.container.innerHTML;c=null;n.destroy();m(b);h=h.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,
'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(a){return a.toLowerCase()});return h=h.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(b,a){b=b||{};var d=this.options.exporting;d=this.getSVG(q({chart:{borderRadius:0}},d.chartOptions,
a,{exporting:{sourceWidth:b.sourceWidth||d.sourceWidth,sourceHeight:b.sourceHeight||d.sourceHeight}}));b=q(this.options.exporting,b);f.post(b.url,{filename:b.filename||"chart",type:b.type,width:b.width||0,scale:b.scale||2,svg:d},b.formAttributes)},print:function(){var b=this,a=b.container,d=[],c=a.parentNode,h=k.body,f=h.childNodes;b.isPrinting||(b.isPrinting=!0,w(f,function(a,b){1===a.nodeType&&(d[b]=a.style.display,a.style.display="none")}),h.appendChild(a),E.focus(),E.print(),setTimeout(function(){c.appendChild(a);
w(f,function(a,b){1===a.nodeType&&(a.style.display=d[b])});b.isPrinting=!1},1E3))},contextMenu:function(b,a,d,c,f,l,n){var g=this,h=g.options.navigation,r=h.menuItemStyle,t=g.chartWidth,q=g.chartHeight,k="cache-"+b,e=g[k],z=F(f,l),m,x=function(a){g.pointer.inClass(a.target,b)||B()};if(!e){g[k]=e=p("div",{className:b},{position:"absolute",zIndex:1E3,padding:z+"px"},g.container);var v=p("div",null,u({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},
h.menuStyle),e);var B=function(){A(e,{display:"none"});n&&n.setState(0);g.openMenu=!1};y(e,"mouseleave",function(){m=setTimeout(B,500)});y(e,"mouseenter",function(){clearTimeout(m)});y(document,"mouseup",x);y(g,"destroy",function(){D(document,"mouseup",x)});w(a,function(a){if(a){var b=a.separator?p("hr",null,null,v):p("div",{onmouseover:function(){A(this,h.menuItemHoverStyle)},onmouseout:function(){A(this,r)},onclick:function(){B();a.onclick.apply(g,arguments)},innerHTML:a.text||g.options.lang[a.textKey]},
u({cursor:"pointer"},r),v);g.exportDivElements.push(b)}});g.exportDivElements.push(v,e);g.exportMenuWidth=e.offsetWidth;g.exportMenuHeight=e.offsetHeight}a={display:"block"};d+g.exportMenuWidth>t?a.right=t-d-f-z+"px":a.left=d-z+"px";c+l+g.exportMenuHeight>q&&"top"!==n.alignOptions.verticalAlign?a.bottom=q-c-z+"px":a.top=c+l-z+"px";A(e,a);g.openMenu=!0},addButton:function(b){var a=this,d=a.renderer,c=q(a.options.navigation.buttonOptions,b),h=c.onclick,l=c.menuItems,n,g={stroke:c.symbolStroke,fill:c.symbolFill},
k=c.symbolSize||12;a.btnCount||(a.btnCount=0);a.exportDivElements||(a.exportDivElements=[],a.exportSVGElements=[]);if(!1!==c.enabled){var r=c.theme,t=r.states,p=t&&t.hover;t=t&&t.select;var m;delete r.states;h?m=function(){h.apply(a,arguments)}:l&&(m=function(){a.contextMenu(e.menuClassName,l,e.translateX,e.translateY,e.width,e.height,e);e.setState(2)});c.text&&c.symbol?r.paddingLeft=f.pick(r.paddingLeft,25):c.text||u(r,{width:c.width,height:c.height,padding:0});var e=d.button(c.text,0,0,m,r,p,t).attr({title:a.options.lang[c._titleKey],
"stroke-linecap":"round"});e.menuClassName=b.menuClassName||"highcharts-menu-"+a.btnCount++;c.symbol&&(n=d.symbol(c.symbol,c.symbolX-k/2,c.symbolY-k/2,k,k).attr(u(g,{"stroke-width":c.symbolStrokeWidth||1,zIndex:1})).add(e));e.add().align(u(c,{width:e.width,x:f.pick(c.x,v)}),!0,"spacingBox");v+=(e.width+c.buttonSpacing)*("right"===c.align?-1:1);a.exportSVGElements.push(e,n)}},destroyExport:function(b){b=b.target;var a,d;for(a=0;a<b.exportSVGElements.length;a++)if(d=b.exportSVGElements[a])d.onclick=
d.ontouchstart=null,b.exportSVGElements[a]=d.destroy();for(a=0;a<b.exportDivElements.length;a++)d=b.exportDivElements[a],D(d,"mouseleave"),b.exportDivElements[a]=d.onmouseout=d.onmouseover=d.ontouchstart=d.onclick=null,m(d)}});H.menu=function(b,a,d,c){return["M",b,a+2.5,"L",b+d,a+2.5,"M",b,a+c/2+.5,"L",b+d,a+c/2+.5,"M",b,a+c-1.5,"L",b+d,a+c-1.5]};C.prototype.callbacks.push(function(b){var a,d=b.options.exporting,c=d.buttons;v=0;if(!1!==d.enabled){for(a in c)b.addButton(c[a]);y(b,"destroy",b.destroyExport)}})})(Highcharts);

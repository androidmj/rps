var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var d=0;return function(){return d<f.length?{done:!1,value:f[d++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,d,a){f!=Array.prototype&&f!=Object.prototype&&(f[d]=a.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(f,d){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function f(a){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(a||"")+"_"+d++,a)}var d=0;return f}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.asyncIterator;f||(f=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};
$jscomp.iteratorFromArray=function(f,d){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var a=0,r={next:function(){if(a<f.length){var l=a++;return{value:d(l,f[l]),done:!1}}r.next=function(){return{done:!0,value:void 0}};return r.next()}};r[Symbol.iterator]=function(){return r};return r};
$jscomp.polyfill=function(f,d,a,r){if(d){a=$jscomp.global;f=f.split(".");for(r=0;r<f.length-1;r++){var l=f[r];l in a||(a[l]={});a=a[l]}f=f[f.length-1];r=a[f];d=d(r);d!=r&&null!=d&&$jscomp.defineProperty(a,f,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
$jscomp.findInternal=function(f,d,a){f instanceof String&&(f=String(f));for(var r=f.length,l=0;l<r;l++){var m=f[l];if(d.call(a,m,l,f))return{i:l,v:m}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(d,a){return $jscomp.findInternal(this,d,a).v}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(d,a){return a})}},"es8","es3");var _wAMD;
!function(){if(!_wAMD||!_wAMD.requirejs){_wAMD?d=_wAMD:_wAMD={};var f,d,a;!function(r){function l(a,b){var c,e,d,k,h,p,q=b&&b.split("/"),f=g.map,n=f&&f["*"]||{};if(a&&"."===a.charAt(0))if(b){q=q.slice(0,q.length-1);a=q.concat(a.split("/"));for(b=0;b<a.length;b+=1)if(c=a[b],"."===c)a.splice(b,1),--b;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;0<b&&(a.splice(b-1,2),b-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((q||n)&&f){c=a.split("/");for(b=c.length;0<b;--b){if(e=
c.slice(0,b).join("/"),q)for(p=q.length;0<p;--p)if(d=f[q.slice(0,p).join("/")],d&&(d=d[e])){var y=d;var t=b;break}if(y)break;!k&&n&&n[e]&&(k=n[e],h=b)}!y&&k&&(y=k,t=h);y&&(c.splice(0,t,y),a=c.join("/"))}return a}function m(a,b){return function(){return c.apply(r,q.call(arguments,0).concat([a,b]))}}function b(a){return function(b){return l(b,a)}}function w(a){return function(b){h[a]=b}}function e(a){if(x.call(y,a)){var b=y[a];delete y[a];p[a]=!0;H.apply(r,b)}if(!x.call(h,a)&&!x.call(p,a))throw Error("No "+
a);return h[a]}function t(a){var b,c=a?a.indexOf("!"):-1;return-1<c&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function u(a){return function(){return g&&g.config&&g.config[a]||{}}}var c,h={},y={},g={},p={},x=Object.prototype.hasOwnProperty,q=[].slice;var F=function(a,c){var d,g=t(a),k=g[0];return a=g[1],k&&(k=l(k,c),d=e(k)),k?a=d&&d.normalize?d.normalize(a,b(c)):l(a,c):(a=l(a,c),g=t(a),k=g[0],a=g[1],k&&(d=e(k))),{f:k?k+"!"+a:a,n:a,pr:k,p:d}};var G={require:function(a){return m(a)},exports:function(a){var b=
h[a];return"undefined"!=typeof b?b:h[a]={}},module:function(a){return{id:a,uri:"",exports:h[a],config:u(a)}}};var H=function(a,b,c,d){var g,k,q,f=[];if(d=d||a,"function"==typeof c){b=!b.length&&c.length?["require","exports","module"]:b;for(q=0;q<b.length;q+=1)if(k=F(b[q],d),g=k.f,"require"===g)f[q]=G.require(a);else if("exports"===g){f[q]=G.exports(a);var t=!0}else if("module"===g)var l=f[q]=G.module(a);else if(x.call(h,g)||x.call(y,g)||x.call(p,g))f[q]=e(g);else{if(!k.p)throw Error(a+" missing "+
g);k.p.load(k.n,m(d,!0),w(g),{});f[q]=h[g]}b=c.apply(h[a],f);a&&(l&&l.exports!==r&&l.exports!==h[a]?h[a]=l.exports:b===r&&t||(h[a]=b))}else a&&(h[a]=c)};f=d=c=function(a,b,d,h,q){return"string"==typeof a?G[a]?G[a](b):e(F(a,b).f):(a.splice||(g=a,b.splice?(a=b,b=d,d=null):a=r),b=b||function(){},"function"==typeof d&&(d=h,h=q),h?H(r,a,b,d):setTimeout(function(){H(r,a,b,d)},4),c)};c.config=function(a){return g=a,g.deps&&c(g.deps,g.callback),c};a=function(a,b,c){b.splice||(c=b,b=[]);x.call(h,a)||x.call(y,
a)||(y[a]=[a,b,c])};a.amd={jQuery:!0}}();_wAMD.requirejs=f;_wAMD.require=d;_wAMD.define=a}}();_wAMD.define("vendor/almond",function(){});
(function(){function f(a,b){0<r&&0>=l?a():b?m.unshift(a):m.push(a)}function d(){window.define=b;window.require=w;window.requirejs=e}function a(){Weebly.jQuery.noConflict(!0);window.jQuery=window.jQuery||Weebly.jQuery}_W=Weebly=window.Weebly||{};_W.tl=_W.tl||function(a){return a};Weebly.ns=function(a,b){b=b||window;a=a.split(".");for(var c=0,d=a.length;d>c;c++){var e=a[c];"string"!=typeof e?b=e:(b[e]||(b[e]={}),b=b[e])}return b};var r=0,l=0,m=[];Weebly.ready=f;var b=window.define,w=window.require,
e=window.requirejs,t=window._wAMD||{},u=t.require||window.require,c=t.requirejs||window.requirejs;window.define=t.define=t.define||window.define;window.require=t.require=function(){var a=Array.prototype.slice.apply(arguments);if(1!==a.length||"string"!=typeof a[0]){var b;"function"==typeof a[a.length-1]&&(b=a.pop());r++;l++;a.push(function(){var a;if(b&&(a=b.apply(this,arguments)),l--,0<r&&0>=l)for(;m.length;)m.shift()();return a})}return u.apply(this,a)};window.requirejs=t.requirejs=c;Weebly.relinquishAMD=
d;Weebly.jQuery=jQuery;Weebly.relinquishJQuery=a;var h=jQuery.fn.ready;jQuery.fn.ready=function(){var a=this,b=arguments;return f(function(){h.apply(a,b)}),a};Weebly.relinquish=function(){d();a()}})();window.console||(window.console={});window.console.log||(window.console.log=function(){},window.console.warn=window.console.log,window.console.info=window.console.log,window.console.error=window.console.log);_wAMD.define("init",function(){});
(function(){var f=this,d=f._,a={},r=Array.prototype,l=Object.prototype,m=r.push,b=r.slice,w=r.concat,e=l.toString,t=l.hasOwnProperty,u=r.forEach,c=r.map,h=r.reduce,y=r.reduceRight,g=r.filter,p=r.every,x=r.some,q=r.indexOf,F=r.lastIndexOf;l=Array.isArray;var G=Object.keys,H=Function.prototype.bind,k=function(a){return a instanceof k?a:this instanceof k?(this._wrapped=a,void 0):new k(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):
f._=k;k.VERSION="1.6.0";var E=k.each=k.forEach=function(b,c,d){if(null==b)return b;if(u&&b.forEach===u)b.forEach(c,d);else if(b.length===+b.length)for(var e=0,g=b.length;g>e;e++){if(c.call(d,b[e],e,b)===a)return}else{var n=k.keys(b);e=0;for(g=n.length;g>e;e++)if(c.call(d,b[n[e]],n[e],b)===a)return}return b};k.map=k.collect=function(a,b,e){var d=[];return null==a?d:c&&a.map===c?a.map(b,e):(E(a,function(a,c,g){d.push(b.call(e,a,c,g))}),d)};k.reduce=k.foldl=k.inject=function(a,b,c,e){var d=2<arguments.length;
if(null==a&&(a=[]),h&&a.reduce===h)return e&&(b=k.bind(b,e)),d?a.reduce(b,c):a.reduce(b);if(E(a,function(a,g,n){d?c=b.call(e,c,a,g,n):(c=a,d=!0)}),!d)throw new TypeError("Reduce of empty array with no initial value");return c};k.reduceRight=k.foldr=function(a,b,c,e){var d=2<arguments.length;if(null==a&&(a=[]),y&&a.reduceRight===y)return e&&(b=k.bind(b,e)),d?a.reduceRight(b,c):a.reduceRight(b);var g=a.length;if(g!==+g){var n=k.keys(a);g=n.length}if(E(a,function(k,h,X){h=n?n[--g]:--g;d?c=b.call(e,c,
a[h],h,X):(c=a[h],d=!0)}),!d)throw new TypeError("Reduce of empty array with no initial value");return c};k.find=k.detect=function(a,b,c){var d;return z(a,function(a,e,g){return b.call(c,a,e,g)?(d=a,!0):void 0}),d};k.filter=k.select=function(a,b,c){var d=[];return null==a?d:g&&a.filter===g?a.filter(b,c):(E(a,function(a,e,g){b.call(c,a,e,g)&&d.push(a)}),d)};k.reject=function(a,b,c){return k.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)};k.every=k.all=function(b,c,d){c||(c=k.identity);var e=!0;
return null==b?e:p&&b.every===p?b.every(c,d):(E(b,function(b,g,n){return(e=e&&c.call(d,b,g,n))?void 0:a}),!!e)};var z=k.some=k.any=function(b,c,d){c||(c=k.identity);var e=!1;return null==b?e:x&&b.some===x?b.some(c,d):(E(b,function(b,g,n){return e||(e=c.call(d,b,g,n))?a:void 0}),!!e)};k.contains=k.include=function(a,b){return null==a?!1:q&&a.indexOf===q?-1!=a.indexOf(b):z(a,function(a){return a===b})};k.invoke=function(a,c){var e=b.call(arguments,2),d=k.isFunction(c);return k.map(a,function(a){return(d?
c:a[c]).apply(a,e)})};k.pluck=function(a,b){return k.map(a,k.property(b))};k.where=function(a,b){return k.filter(a,k.matches(b))};k.findWhere=function(a,b){return k.find(a,k.matches(b))};k.max=function(a,b,c){if(!b&&k.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);var e=-1/0,d=-1/0;return E(a,function(a,g,n){g=b?b.call(c,a,g,n):a;g>d&&(e=a,d=g)}),e};k.min=function(a,b,c){if(!b&&k.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);var e=1/0,d=1/0;return E(a,
function(a,g,n){g=b?b.call(c,a,g,n):a;d>g&&(e=a,d=g)}),e};k.shuffle=function(a){var b,c=0,e=[];return E(a,function(a){b=k.random(c++);e[c-1]=e[b];e[b]=a}),e};k.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=k.values(a)),a[k.random(a.length-1)]):k.shuffle(a).slice(0,Math.max(0,b))};var K=function(a){return null==a?k.identity:k.isFunction(a)?a:k.property(a)};k.sortBy=function(a,b,c){return b=K(b),k.pluck(k.map(a,function(a,e,d){return{value:a,index:e,criteria:b.call(c,a,e,d)}}).sort(function(a,
b){var c=a.criteria,e=b.criteria;if(c!==e){if(c>e||void 0===c)return 1;if(e>c||void 0===e)return-1}return a.index-b.index}),"value")};var L=function(a){return function(b,c,e){var d={};return c=K(c),E(b,function(g,n){n=c.call(e,g,n,b);a(d,n,g)}),d}};k.groupBy=L(function(a,b,c){k.has(a,b)?a[b].push(c):a[b]=[c]});k.indexBy=L(function(a,b,c){a[b]=c});k.countBy=L(function(a,b){k.has(a,b)?a[b]++:a[b]=1});k.sortedIndex=function(a,b,c,e){c=K(c);b=c.call(e,b);for(var d=0,g=a.length;g>d;){var n=d+g>>>1;c.call(e,
a[n])<b?d=n+1:g=n}return d};k.toArray=function(a){return a?k.isArray(a)?b.call(a):a.length===+a.length?k.map(a,k.identity):k.values(a):[]};k.size=function(a){return null==a?0:a.length===+a.length?a.length:k.keys(a).length};k.first=k.head=k.take=function(a,c,e){return null==a?void 0:null==c||e?a[0]:0>c?[]:b.call(a,0,c)};k.initial=function(a,c,e){return b.call(a,0,a.length-(null==c||e?1:c))};k.last=function(a,c,e){return null==a?void 0:null==c||e?a[a.length-1]:b.call(a,Math.max(a.length-c,0))};k.rest=
k.tail=k.drop=function(a,c,e){return b.call(a,null==c||e?1:c)};k.compact=function(a){return k.filter(a,k.identity)};var N=function(a,b,c,e){if(b&&k.every(a,k.isArray))return w.apply(e,a);for(var d=0,g=a.length;g>d;d++){var n=a[d];k.isArray(n)||k.isArguments(n)?b?m.apply(e,n):N(n,b,c,e):c||e.push(n)}return e};k.flatten=function(a,b){return N(a,b,!1,[])};k.without=function(a){return k.difference(a,b.call(arguments,1))};k.partition=function(a,b,c){b=K(b);var e=[],d=[];return E(a,function(a){(b.call(c,
a)?e:d).push(a)}),[e,d]};k.uniq=k.unique=function(a,b,c,e){k.isFunction(b)&&(e=c,c=b,b=!1);c=c?k.map(a,c,e):a;var d=[],g=[];return E(c,function(c,e){(b?e&&g[g.length-1]===c:k.contains(g,c))||(g.push(c),d.push(a[e]))}),d};k.union=function(){return k.uniq(N(arguments,!0,!0,[]))};k.intersection=function(a){var c=b.call(arguments,1);return k.filter(k.uniq(a),function(a){return k.every(c,function(b){return k.contains(b,a)})})};k.difference=function(a){var c=N(b.call(arguments,1),!0,!0,[]);return k.filter(a,
function(a){return!k.contains(c,a)})};k.zip=function(){for(var a=k.max(k.pluck(arguments,"length").concat(0)),b=Array(a),c=0;a>c;c++)b[c]=k.pluck(arguments,""+c);return b};k.object=function(a,b){if(null==a)return{};for(var c={},e=0,d=a.length;d>e;e++)b?c[a[e]]=b[e]:c[a[e][0]]=a[e][1];return c};k.indexOf=function(a,b,c){if(null==a)return-1;var e=0,d=a.length;if(c){if("number"!=typeof c)return e=k.sortedIndex(a,b),a[e]===b?e:-1;e=0>c?Math.max(0,d+c):c}if(q&&a.indexOf===q)return a.indexOf(b,c);for(;d>
e;e++)if(a[e]===b)return e;return-1};k.lastIndexOf=function(a,b,c){if(null==a)return-1;var e=null!=c;if(F&&a.lastIndexOf===F)return e?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=e?c:a.length;c--;)if(a[c]===b)return c;return-1};k.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var e=Math.max(Math.ceil((b-a)/c),0),d=0,g=Array(e);e>d;)g[d++]=a,a+=c;return g};var I=function(){};k.bind=function(a,c){var e,d;if(H&&a.bind===H)return H.apply(a,b.call(arguments,1));if(!k.isFunction(a))throw new TypeError;
return e=b.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(c,e.concat(b.call(arguments)));I.prototype=a.prototype;var g=new I;I.prototype=null;var n=a.apply(g,e.concat(b.call(arguments)));return Object(n)===n?n:g}};k.partial=function(a){var c=b.call(arguments,1);return function(){for(var b=0,e=c.slice(),d=0,g=e.length;g>d;d++)e[d]===k&&(e[d]=arguments[b++]);for(;b<arguments.length;)e.push(arguments[b++]);return a.apply(this,e)}};k.bindAll=function(a){var c=b.call(arguments,1);
if(0===c.length)throw Error("bindAll must be passed function names");return E(c,function(b){a[b]=k.bind(a[b],a)}),a};k.memoize=function(a,b){var c={};return b||(b=k.identity),function(){var e=b.apply(this,arguments);return k.has(c,e)?c[e]:c[e]=a.apply(this,arguments)}};k.delay=function(a,c){var e=b.call(arguments,2);return setTimeout(function(){return a.apply(null,e)},c)};k.defer=function(a){return k.delay.apply(k,[a,1].concat(b.call(arguments,1)))};k.throttle=function(a,b,c){var e,d,g,n=null,h=0;
c||(c={});var q=function(){h=!1===c.leading?0:k.now();n=null;g=a.apply(e,d);e=d=null};return function(){var f=k.now();h||!1!==c.leading||(h=f);var p=b-(f-h);return e=this,d=arguments,0>=p?(clearTimeout(n),n=null,h=f,g=a.apply(e,d),e=d=null):n||!1===c.trailing||(n=setTimeout(q,p)),g}};k.debounce=function(a,b,c){var e,d,g,n,h,q=function(){var f=k.now()-n;b>f?e=setTimeout(q,b-f):(e=null,c||(h=a.apply(g,d),g=d=null))};return function(){g=this;d=arguments;n=k.now();var f=c&&!e;return e||(e=setTimeout(q,
b)),f&&(h=a.apply(g,d),g=d=null),h}};k.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}};k.wrap=function(a,b){return k.partial(b,a)};k.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};k.after=function(a,b){return function(){return 1>--a?b.apply(this,arguments):void 0}};k.keys=function(a){if(!k.isObject(a))return[];if(G)return G(a);var b=[],c;for(c in a)k.has(a,c)&&
b.push(c);return b};k.values=function(a){for(var b=k.keys(a),c=b.length,e=Array(c),d=0;c>d;d++)e[d]=a[b[d]];return e};k.pairs=function(a){for(var b=k.keys(a),c=b.length,e=Array(c),d=0;c>d;d++)e[d]=[b[d],a[b[d]]];return e};k.invert=function(a){for(var b={},c=k.keys(a),e=0,d=c.length;d>e;e++)b[a[c[e]]]=c[e];return b};k.functions=k.methods=function(a){var b=[],c;for(c in a)k.isFunction(a[c])&&b.push(c);return b.sort()};k.extend=function(a){return E(b.call(arguments,1),function(b){if(b)for(var c in b)a[c]=
b[c]}),a};k.pick=function(a){var c={},e=w.apply(r,b.call(arguments,1));return E(e,function(b){b in a&&(c[b]=a[b])}),c};k.omit=function(a){var c={},e=w.apply(r,b.call(arguments,1)),d;for(d in a)k.contains(e,d)||(c[d]=a[d]);return c};k.defaults=function(a){return E(b.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a};k.clone=function(a){return k.isObject(a)?k.isArray(a)?a.slice():k.extend({},a):a};k.tap=function(a,b){return b(a),a};var C=function(a,b,c,d){if(a===b)return 0!==
a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof k&&(a=a._wrapped);b instanceof k&&(b=b._wrapped);var g=e.call(a);if(g!=e.call(b))return!1;switch(g){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var n=
c.length;n--;)if(c[n]==a)return d[n]==b;n=a.constructor;var h=b.constructor;if(n!==h&&!(k.isFunction(n)&&n instanceof n&&k.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a);d.push(b);n=0;h=!0;if("[object Array]"==g){if(n=a.length,h=n==b.length)for(;n--&&(h=C(a[n],b[n],c,d)););}else{for(var q in a)if(k.has(a,q)&&(n++,!(h=k.has(b,q)&&C(a[q],b[q],c,d))))break;if(h){for(q in b)if(k.has(b,q)&&!n--)break;h=!n}}return c.pop(),d.pop(),h};k.isEqual=function(a,b){return C(a,
b,[],[])};k.isEmpty=function(a){if(null==a)return!0;if(k.isArray(a)||k.isString(a))return 0===a.length;for(var b in a)if(k.has(a,b))return!1;return!0};k.isElement=function(a){return!(!a||1!==a.nodeType)};k.isArray=l||function(a){return"[object Array]"==e.call(a)};k.isObject=function(a){return a===Object(a)};E("Arguments Function String Number Date RegExp".split(" "),function(a){k["is"+a]=function(b){return e.call(b)=="[object "+a+"]"}});k.isArguments(arguments)||(k.isArguments=function(a){return!(!a||
!k.has(a,"callee"))});"function"!=typeof/./&&(k.isFunction=function(a){return"function"==typeof a});k.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};k.isNaN=function(a){return k.isNumber(a)&&a!=+a};k.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==e.call(a)};k.isNull=function(a){return null===a};k.isUndefined=function(a){return void 0===a};k.has=function(a,b){return t.call(a,b)};k.noConflict=function(){return f._=d,this};k.identity=function(a){return a};k.constant=
function(a){return function(){return a}};k.property=function(a){return function(b){return b[a]}};k.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}};k.times=function(a,b,c){for(var e=Array(Math.max(0,a)),d=0;a>d;d++)e[d]=b.call(c,d);return e};k.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};k.now=Date.now||function(){return(new Date).getTime()};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#x27;"}};B.unescape=k.invert(B.escape);var D={escape:new RegExp("["+k.keys(B.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(B.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(a){k[a]=function(b){return null==b?"":(""+b).replace(D[a],function(b){return B[a][b]})}});k.result=function(a,b){if(null!=a)return b=a[b],k.isFunction(b)?b.call(a):b};k.mixin=function(a){E(k.functions(a),function(b){var c=k[b]=a[b];k.prototype[b]=function(){var a=[this._wrapped];return m.apply(a,
arguments),P.call(this,c.apply(k,a))}})};var n=0;k.uniqueId=function(a){var b=++n+"";return a?a+b:b};k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(a,b,c){c=k.defaults({},c,k.templateSettings);var e=new RegExp([(c.escape||A).source,(c.interpolate||A).source,(c.evaluate||A).source].join("|")+"|$",
"g"),d=0,g="__p+='";a.replace(e,function(b,c,e,n,h){return g+=a.slice(d,h).replace(J,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),e&&(g+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),n&&(g+="';\n"+n+"\n__p+='"),d=h+b.length,b});g+="';\n";c.variable||(g="with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{var n=new Function(c.variable||"obj","_",g)}catch(Y){throw Y.source=
g,Y;}if(b)return n(b,k);b=function(a){return n.call(this,a,k)};return b.source="function("+(c.variable||"obj")+"){\n"+g+"}",b};k.chain=function(a){return k(a).chain()};var P=function(a){return this._chain?k(a).chain():a};k.mixin(k);E("pop push reverse shift sort splice unshift".split(" "),function(a){var b=r[a];k.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],P.call(this,c)}});E(["concat","join","slice"],function(a){var b=
r[a];k.prototype[a]=function(){return P.call(this,b.apply(this._wrapped,arguments))}});k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}});"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("underscore",[],function(){return k})}).call(this);_wAMD.define("jquery",[],function(){return Weebly.jQuery});
(function(f){!function(d,a){"object"==typeof exports&&exports?module.exports=a:"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("public_legacy/mustache",a):d.Mustache=a}(this,function(){function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(a){this.tail=this.string=a;this.pos=0}function f(a,b){this.view=a;this.parent=b;this._cache={}}function l(){this.clearCache()}function m(a,b,c,e){for(var d,g,h,k="",f=0,q=a.length;q>f;++f)switch(d=a[f],g=d[1],d[0]){case "#":if(h=
c.lookup(g),"object"==typeof h)if(x(h)){g=0;for(var p=h.length;p>g;++g)k+=m(d[4],b,c.push(h[g]),e)}else h&&(k+=m(d[4],b,c.push(h),e));else"function"==typeof h?(g=null==e?null:e.slice(d[3],d[5]),h=h.call(c.view,g,function(a){return b.render(a,c)}),null!=h&&(k+=h)):h&&(k+=m(d[4],b,c,e));break;case "^":h=c.lookup(g);(!h||x(h)&&0===h.length)&&(k+=m(d[4],b,c,e));break;case ">":h=b.getPartial(g);"function"==typeof h&&(k+=h(c));break;case "&":h=c.lookup(g);null!=h&&(k+=h);break;case "name":h=c.lookup(g);
null!=h&&(k+=w.escape(h));break;case "text":k+=g}return k}function b(a){return[new RegExp(d(a[0])+"\\s*"),new RegExp("\\s*"+d(a[1]))]}var w={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};w.Scanner=a;w.Context=f;w.Writer=l;var e=/\s*/,t=/\s+/,u=/\S/,c=/\s*=/,h=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,g=RegExp.prototype.test,p=Object.prototype.toString,x=Array.isArray||function(a){return"[object Array]"===p.call(a)},q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};w.escape=function(a){return String(a).replace(/[&<>"'\/]/g,
function(a){return q[a]})};a.prototype.eos=function(){return""===this.tail};a.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0]):""};a.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};f.make=function(a){return a instanceof
f?a:new f(a)};f.prototype.push=function(a){return new f(a,this)};f.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var c=this;c;){if(0<a.indexOf(".")){b=c.view;for(var e=a.split("."),d=0;b&&d<e.length;)b=b[e[d++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}return"function"==typeof b&&(b=b.call(this.view)),b};l.prototype.clearCache=function(){this._cache={};this._partialCache={}};l.prototype.compile=function(a,b){var c=this._cache[a];c||(b=
w.parse(a,b),c=this._cache[a]=this.compileTokens(b,a));return c};l.prototype.compilePartial=function(a,b,c){b=this.compile(b,c);return this._partialCache[a]=b,b};l.prototype.getPartial=function(a){return a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a)),this._partialCache[a]};l.prototype.compileTokens=function(a,b){var c=this;return function(e,d){if(d)if("function"==typeof d)c._loadPartial=d;else for(var g in d)c.compilePartial(g,d[g]);return m(a,c,f.make(e),
b)}};l.prototype.render=function(a,b,c){return this.compile(a)(b,c)};w.parse=function(f,q){if(f=f||"",q=q||w.tags,"string"==typeof q&&(q=q.split(t)),2!==q.length)throw Error("Invalid tags: "+q.join(", "));for(var k,p,x,l,m=b(q),r=new a(f),F=[],C=[],G=[],H=!1,n=!1;!r.eos();){if(f=r.pos,p=r.scanUntil(m[0]))for(var A=0,M=p.length;M>A;++A)if(x=p.charAt(A),g.call(u,x)?n=!0:G.push(C.length),C.push(["text",x,f,f+1]),f+=1,"\n"==x){if(H&&!n)for(;G.length;)delete C[G.pop()];else G=[];n=H=!1}if(!r.scan(m[0]))break;
if(H=!0,k=r.scan(y)||"name",r.scan(e),"="===k?(p=r.scanUntil(c),r.scan(c),r.scanUntil(m[1])):"{"===k?(p=r.scanUntil(new RegExp("\\s*"+d("}"+q[1]))),r.scan(h),r.scanUntil(m[1]),k="&"):p=r.scanUntil(m[1]),!r.scan(m[1]))throw Error("Unclosed tag at "+r.pos);if(l=[k,p,f,r.pos],C.push(l),"#"===k||"^"===k)F.push(l);else if("/"===k){if(0===F.length)throw Error('Unopened section "'+p+'" at '+f);x=F.pop();if(x[1]!==p)throw Error('Unclosed section "'+x[1]+'" at '+f);}else if("name"===k||"{"===k||"&"===k)n=
!0;else if("="===k){if(q=p.split(t),2!==q.length)throw Error("Invalid tags at "+f+": "+q.join(", "));m=b(q)}}if(x=F.pop())throw Error('Unclosed section "'+x[1]+'" at '+r.pos);q=C;var J;l=[];m=0;for(f=q.length;f>m;++m)(k=q[m])&&("text"===k[0]&&J&&"text"===J[0]?(J[1]+=k[1],J[3]=k[3]):(J=k,l.push(k)));J=l;var P;k=q=[];l=[];m=0;for(f=J.length;f>m;++m)switch(P=J[m],P[0]){case "#":case "^":l.push(P);k.push(P);k=P[4]=[];break;case "/":l.pop()[5]=P[2];k=0<l.length?l[l.length-1][4]:q;break;default:k.push(P)}return q};
var F=new l;return w.clearCache=function(){return F.clearCache()},w.compile=function(a,b){return F.compile(a,b)},w.compilePartial=function(a,b,c){return F.compilePartial(a,b,c)},w.compileTokens=function(a,b){return F.compileTokens(a,b)},w.render=function(a,b,c){return F.render(a,b,c)},w.to_html=function(a,b,c,e){a=w.render(a,b,c);return"function"!=typeof e?a:(e(a),void 0)},w}());f.mustache=function(d,a,f){return Mustache.render(d,a,f)};f.fn.mustache=function(d,a){return f(this).map(function(r,l){r=
f.trim(f(l).html());r=f.mustache(r,d,a);return f(r).get()})}})(jQuery);
(function(f){function d(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw Error("Implement me");}}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(a){!1===v.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function l(a,b){var c=!0;return u(function(){return c&&
(r(a),c=!1),b.apply(this,arguments)},b)}function m(a,b){return function(c){return y(a.call(this,c),b)}}function b(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function w(){}function e(a,b){!1!==b&&I(a);c(this,a);this._d=new Date(+a._d)}function t(a){a=k(a);var b=a.year||0,c=a.quarter||0,e=a.month||0,d=a.week||0,R=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+R+7*d;this._months=+e+3*c+12*b;this._data=
{};this._locale=v.localeData();this._bubble()}function u(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function c(a,b){var c;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=
typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),0<na.length)for(c in na){var e=na[c];var d=b[e];"undefined"!=typeof d&&(a[e]=d)}return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function y(a,b,c){for(var e=""+Math.abs(a);e.length<b;)e="0"+e;return(0<=a?c?"+":"":"-")+e}function g(a,b){var c={milliseconds:0,months:0};
return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function p(a,b){var c;return b=n(b,a),a.isBefore(b)?c=g(a,b):(c=g(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function x(a,b){return function(c,e){var d;if(null!==e&&!isNaN(+e)){za[b]||(r("moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),za[b]=!0);var g=c;c=e;e=g}return c="string"==typeof c?
+c:c,d=v.duration(c,e),q(this,d,a),this}}function q(a,b,c,e){var d=b._milliseconds,g=b._days;b=b._months;e=null==e?!0:e;d&&a._d.setTime(+a._d+d*c);g&&Aa(a,"Date",pa(a,"Date")+g*c);b&&ya(a,pa(a,"Month")+b*c);e&&v.updateOffset(a,g||b)}function F(a){return"[object Array]"===Object.prototype.toString.call(a)}function G(a,b,c){var e,d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),R=0;for(e=0;d>e;e++)(c&&a[e]!==b[e]||!c&&z(a[e])!==z(b[e]))&&R++;return R+g}function H(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,
"$1");a=Na[a]||Oa[b]||b}return a}function k(a){var b,c,e={};for(c in a)a.hasOwnProperty(c)&&(b=H(c),b&&(e[b]=a[c]));return e}function E(a){if(0===a.indexOf("week")){var b=7;var c="day"}else{if(0!==a.indexOf("month"))return;b=12;c="month"}v[a]=function(e,d){var g,n=v._locale[a],R=[];if("number"==typeof e&&(d=e,e=f),g=function(a){a=v().utc().set(c,a);return n.call(v._locale,a,e||"")},null!=d)return g(d);for(d=0;b>d;d++)R.push(g(d));return R}}function z(a){a=+a;var b=0;return 0!==a&&isFinite(a)&&(b=
0<=a?Math.floor(a):Math.ceil(a)),b}function K(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function L(a,b,c){return ha(v([a,11,31+b-c]),b,c).week}function N(a){return 0===a%4&&0!==a%100||0===a%400}function I(a){var b;a._a&&-2===a._pf.overflow&&(b=0>a._a[ba]||11<a._a[ba]?ba:1>a._a[Z]||a._a[Z]>K(a._a[ca],a._a[ba])?Z:0>a._a[aa]||23<a._a[aa]?aa:0>a._a[ka]||59<a._a[ka]?ka:0>a._a[la]||59<a._a[la]?la:0>a._a[ma]||999<a._a[ma]?ma:-1,a._pf._overflowDayOfYear&&(ca>b||b>Z)&&(b=Z),a._pf.overflow=b)}function C(a){return null==
a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function B(a){return a?a.toLowerCase().replace("_","-"):a}function D(a){var b=null;if(!U[a]&&Ba)try{b=v.locale(),require("./locale/"+a),v.locale(b)}catch(fb){}return U[a]}function n(a,b){return b._isUTC?v(a).zone(b._offset||0):v(a).local()}
function A(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c=a.match(Ca);var e=0;for(b=c.length;b>e;e++)c[e]=da[c[e]]?da[c[e]]:A(c[e]);return function(d){var g="";for(e=0;b>e;e++)g+=c[e]instanceof Function?c[e].call(d,a):c[e];return g}}function J(a,b){return a.isValid()?(b=P(b,a.localeData()),qa[b]||(qa[b]=M(b)),qa[b](a)):a.localeData().invalidDate()}function P(a,b){function c(a){return b.longDateFormat(a)||a}var e=5;for(oa.lastIndex=0;0<=e&&oa.test(a);)a=
a.replace(oa,c),oa.lastIndex=0,--e;return a}function X(a,b){var c=b._strict;switch(a){case "Q":return Da;case "DDDD":return Ea;case "YYYY":case "GGGG":case "gggg":return c?Pa:Qa;case "Y":case "G":case "g":return Ra;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?Sa:Ta;case "S":if(c)return Da;case "SS":if(c)return Fa;case "SSS":if(c)return Ea;case "DDD":return Ua;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return Va;case "a":case "A":return b._locale._meridiemParse;case "X":return Wa;
case "Z":case "ZZ":return ra;case "T":return Xa;case "SSSS":return Ya;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?Fa:Ga;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return Ga;case "Do":return Za;default:return b=RegExp,a=ja(a.replace("\\","")).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),new b(a)}}function O(a){a=(a||"").match(ra)||[];a=((a[a.length-1]||[])+"").match($a)||["-",
0,0];var b=+(60*a[1])+z(a[2]);return"+"===a[0]?-b:b}function V(a){var b,c,e=[];if(!a._d){var g=new Date;g=a._useUTC?[g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()]:[g.getFullYear(),g.getMonth(),g.getDate()];if(a._w&&null==a._a[Z]&&null==a._a[ba]){var n,h,f,q,R;var k=a._w;null!=k.GG||null!=k.W||null!=k.E?(q=1,R=4,n=d(k.GG,a._a[ca],ha(v(),1,4).year),h=d(k.W,1),f=d(k.E,1)):(q=a._locale._week.dow,R=a._locale._week.doy,n=d(k.gg,a._a[ca],ha(v(),q,R).year),h=d(k.w,1),null!=k.d?(f=k.d,q>f&&++h):f=null!=
k.e?k.e+q:q);k=q;var p,A;q=Y(n,0,1).getUTCDay();R=(q=0===q?7:q,f=null!=f?f:k,p=k-q+(q>R?7:0)-(k>q?7:0),A=7*(h-1)+(f-k)+p+1,{year:0<A?n:n-1,dayOfYear:0<A?A:(N(n-1)?366:365)+A});a._a[ca]=R.year;a._dayOfYear=R.dayOfYear}a._dayOfYear&&(c=d(a._a[ca],g[ca]),a._dayOfYear>(N(c)?366:365)&&(a._pf._overflowDayOfYear=!0),b=Y(c,0,a._dayOfYear),a._a[ba]=b.getUTCMonth(),a._a[Z]=b.getUTCDate());for(b=0;3>b&&null==a._a[b];++b)a._a[b]=e[b]=g[b];for(;7>b;b++)a._a[b]=e[b]=null==a._a[b]?2===b?1:0:a._a[b];a._d=(a._useUTC?
Y:T).apply(null,e);null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function W(a){if(a._f===v.ISO_8601)return Q(a),void 0;a._a=[];a._pf.empty=!0;var b,c,e,d=""+a._i,g=d.length,n=0;var h=P(a._f,a._locale).match(Ca)||[];for(b=0;b<h.length;b++){var q=h[b];(c=(d.match(X(q,a))||[])[0])&&(e=d.substr(0,d.indexOf(c)),0<e.length&&a._pf.unusedInput.push(e),d=d.slice(d.indexOf(c)+c.length),n+=c.length);if(da[q]){c?a._pf.empty=!1:a._pf.unusedTokens.push(q);var f=a,k=f._a;switch(q){case "Q":null!=
c&&(k[ba]=3*(z(c)-1));break;case "M":case "MM":null!=c&&(k[ba]=z(c)-1);break;case "MMM":case "MMMM":q=f._locale.monthsParse(c);null!=q?k[ba]=q:f._pf.invalidMonth=c;break;case "D":case "DD":null!=c&&(k[Z]=z(c));break;case "Do":null!=c&&(k[Z]=z(parseInt(c,10)));break;case "DDD":case "DDDD":null!=c&&(f._dayOfYear=z(c));break;case "YY":k[ca]=v.parseTwoDigitYear(c);break;case "YYYY":case "YYYYY":case "YYYYYY":k[ca]=z(c);break;case "a":case "A":f._isPm=f._locale.isPM(c);break;case "H":case "HH":case "h":case "hh":k[aa]=
z(c);break;case "m":case "mm":k[ka]=z(c);break;case "s":case "ss":k[la]=z(c);break;case "S":case "SS":case "SSS":case "SSSS":k[ma]=z(1E3*("0."+c));break;case "X":f._d=new Date(1E3*parseFloat(c));break;case "Z":case "ZZ":f._useUTC=!0;f._tzm=O(c);break;case "dd":case "ddd":case "dddd":q=f._locale.weekdaysParse(c);null!=q?(f._w=f._w||{},f._w.d=q):f._pf.invalidWeekday=c;break;case "w":case "ww":case "W":case "WW":case "d":case "e":case "E":q=q.substr(0,1);case "gggg":case "GGGG":case "GGGGG":q=q.substr(0,
2);c&&(f._w=f._w||{},f._w[q]=z(c));break;case "gg":case "GG":f._w=f._w||{},f._w[q]=v.parseTwoDigitYear(c)}}else a._strict&&!c&&a._pf.unusedTokens.push(q)}a._pf.charsLeftOver=g-n;0<d.length&&a._pf.unusedInput.push(d);a._isPm&&12>a._a[aa]&&(a._a[aa]+=12);!1===a._isPm&&12===a._a[aa]&&(a._a[aa]=0);V(a);I(a)}function ja(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,e,d){return b||c||e||d})}function Q(a){var b,c=a._i,e=ab.exec(c);if(e){a._pf.iso=!0;var d=0;for(b=sa.length;b>d;d++)if(sa[d][1].exec(c)){a._f=
sa[d][0]+(e[6]||" ");break}d=0;for(b=ta.length;b>d;d++)if(ta[d][1].exec(c)){a._f+=ta[d][0];break}c.match(ra)&&(a._f+="Z");W(a)}else a._isValid=!1}function T(a,b,c,e,d,g,n){b=new Date(a,b,c,e,d,g,n);return 1970>a&&b.setFullYear(a),b}function Y(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function va(a,b,c,e,d){return d.relativeTime(b||1,!!c,a,e)}function ha(a,b,c){var e;b=c-b;c-=a.day();return c>b&&(c-=7),b-7>c&&(c+=7),e=v(a).add(c,"d"),{week:Math.ceil(e.dayOfYear()/
7),year:e.year()}}function wa(b){var d=b._i,g=b._f;b._locale=b._locale||v.localeData(b._l);if(null===d||g===f&&""===d)b=v.invalid({nullInput:!0});else if("string"==typeof d&&(b._i=d=b._locale.preparse(d)),v.isMoment(d))b=new e(d,!0);else{if(g)if(F(g)){var n,h,q;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(0/0);else{for(q=0;q<b._f.length;q++){d=0;var p=c({},b);p._pf=a();p._f=b._f[q];W(p);C(p)&&(d+=p._pf.charsLeftOver,d+=10*p._pf.unusedTokens.length,p._pf.score=d,(null==h||h>d)&&(h=d,n=p))}u(b,
n||p)}}else W(b);else n=b._i,n===f?b._d=new Date:"[object Date]"===Object.prototype.toString.call(n)||n instanceof Date?b._d=new Date(+n):null!==(p=bb.exec(n))?b._d=new Date(+p[1]):"string"==typeof n?(Q(b),!1===b._isValid&&(delete b._isValid,v.createFromInputFallback(b))):F(n)?(b._a=n.slice(0),V(b)):"object"==typeof n?b._d||(q=k(b._i),b._a=[q.year,q.month,q.day,q.hour,q.minute,q.second,q.millisecond],V(b)):"number"==typeof n?b._d=new Date(n):v.createFromInputFallback(b);b=new e(b)}return b}function xa(a,
b){var c;if(1===b.length&&F(b[0])&&(b=b[0]),!b.length)return v();var e=b[0];for(c=1;c<b.length;++c)b[c][a](e)&&(e=b[c]);return e}function ya(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),K(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function pa(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function Aa(a,b,c){return"Month"===b?ya(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ea(a,b){return function(c){return null!=
c?(Aa(this,a,c),v.updateOffset(this,b),this):pa(this,a)}}function cb(a){v.duration.fn[a]=function(){return this._data[a]}}function Ha(a){"undefined"==typeof ender&&(Ia=ua.moment,ua.moment=a?l("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",v):v)}for(var v,Ia,S,ua="undefined"!=typeof global?global:this,ia=Math.round,ca=0,ba=1,Z=2,aa=3,ka=4,la=5,ma=6,U={},na=[],Ba="undefined"!=typeof module&&module.exports,bb=/^\/?Date\((\-?\d+)/i,db=/(\-)?(?:(\d*)\.)?(\d+):(\d+)(?::(\d+)\.?(\d{3})?)?/,
eb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ca=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,oa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ga=/\d\d?/,Ua=/\d{1,3}/,Qa=/\d{1,4}/,Ta=/[+\-]?\d{1,6}/,Ya=/\d+/,Va=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
ra=/Z|[\+\-]\d\d:?\d\d/gi,Xa=/T/i,Wa=/[\+\-]?\d+(\.\d{1,3})?/,Za=/\d{1,2}/,Da=/\d/,Fa=/\d\d/,Ea=/\d{3}/,Pa=/\d{4}/,Sa=/[+-]?\d{6}/,Ra=/[+-]?\d+/,ab=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sa=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ta=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],
["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],$a=/([\+\-]|\d\d)/gi,Ja={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Na={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Oa={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},
qa={},fa={s:45,m:45,h:22,d:26,M:11},Ka="DDD w W M D d".split(" "),La="MDHhmswW".split(""),da={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,
a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return y(this.year()%100,2)},YYYY:function(){return y(this.year(),4)},YYYYY:function(){return y(this.year(),5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+y(Math.abs(a),6)},gg:function(){return y(this.weekYear()%100,2)},gggg:function(){return y(this.weekYear(),4)},ggggg:function(){return y(this.weekYear(),5)},GG:function(){return y(this.isoWeekYear()%100,2)},GGGG:function(){return y(this.isoWeekYear(),
4)},GGGGG:function(){return y(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return y(z(this.milliseconds()/
10),2)},SSS:function(){return y(this.milliseconds(),3)},SSSS:function(){return y(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+y(z(a/60),2)+":"+y(z(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+y(z(a/60),2)+y(z(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},za={},Ma=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Ka.length;)S=
Ka.pop(),da[S+"o"]=b(da[S],S);for(;La.length;)S=La.pop(),da[S+S]=m(da[S],2);da.DDDD=m(da.DDD,3);u(w.prototype,{set:function(a){var b;for(b in a){var c=a[b];"function"==typeof c?this[b]=c:this["_"+b]=c}},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,
c,e;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=v.utc([2E3,b]),e="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(e.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},
_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,e;this._weekdaysParse||(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=v([2E3,1]).day(b),e="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(e.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",
LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){a=this._calendar[a];return"function"==typeof a?a.apply(b):a},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,e){var d=this._relativeTime[c];return"function"==typeof d?d(a,b,c,e):d.replace(/%d/i,a)},pastFuture:function(a,b){a=this._relativeTime[0<
a?"future":"past"];return"function"==typeof a?a(b):a.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ha(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});v=function(b,c,e,d){var g;return"boolean"==typeof e&&(d=e,e=f),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=d,g._isUTC=
!1,g._pf=a(),wa(g)};v.suppressDeprecationWarnings=!1;v.createFromInputFallback=l("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});v.min=function(){var a=[].slice.call(arguments,0);return xa("isBefore",a)};v.max=function(){var a=[].slice.call(arguments,0);return xa("isAfter",a)};v.utc=function(b,c,e,d){var g;return"boolean"==typeof e&&
(d=e,e=f),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=d,g._pf=a(),wa(g).utc()};v.unix=function(a){return v(1E3*a)};v.duration=function(a,b){var c,e,d,g,n=a,h=null;return v.isDuration(a)?n={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(n={},b?n[b]=a:n.milliseconds=a):(h=db.exec(a))?(c="-"===h[1]?-1:1,n={y:0,d:z(h[Z])*c,h:z(h[aa])*c,m:z(h[ka])*c,s:z(h[la])*c,ms:z(h[ma])*c}):(h=eb.exec(a))?(c="-"===h[1]?-1:1,d=function(a){a=a&&parseFloat(a.replace(",",
"."));return(isNaN(a)?0:a)*c},n={y:d(h[2]),M:d(h[3]),d:d(h[4]),h:d(h[5]),m:d(h[6]),s:d(h[7]),w:d(h[8])}):"object"==typeof n&&("from"in n||"to"in n)&&(g=p(v(n.from),v(n.to)),n={},n.ms=g.milliseconds,n.M=g.months),e=new t(n),v.isDuration(a)&&a.hasOwnProperty("_locale")&&(e._locale=a._locale),e};v.version="2.8.1";v.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";v.ISO_8601=function(){};v.momentProperties=na;v.updateOffset=function(){};v.relativeTimeThreshold=function(a,b){return fa[a]===f?!1:b===f?fa[a]:(fa[a]=
b,!0)};v.lang=l("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return v.locale(a,b)});v.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?v.defineLocale(a,b):v.localeData(a),c&&(v.duration._locale=v._locale=c)),v._locale._abbr};v.defineLocale=function(a,b){return null!==b?(b.abbr=a,U[a]||(U[a]=new w),U[a].set(b),v.locale(a),U[a]):(delete U[a],null)};v.langData=l("moment.langData is deprecated. Use moment.localeData instead.",function(a){return v.localeData(a)});
v.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return v._locale;if(!F(a)){if(b=D(a))return b;a=[a]}a:{for(var c,e,d,g=0;g<a.length;){d=B(a[g]).split("-");b=d.length;for(c=(c=B(a[g+1]))?c.split("-"):null;0<b;){if(e=D(d.slice(0,b).join("-"))){a=e;break a}if(c&&c.length>=b&&G(d,c,!0)>=b-1)break;b--}g++}a=null}return a};v.isMoment=function(a){return a instanceof e||null!=a&&a.hasOwnProperty("_isAMomentObject")};v.isDuration=function(a){return a instanceof t};for(S=
Ma.length-1;0<=S;--S)E(Ma[S]);v.normalizeUnits=function(a){return H(a)};v.invalid=function(a){var b=v.utc(0/0);return null!=a?u(b._pf,a):b._pf.userInvalidated=!0,b};v.parseZone=function(){return v.apply(null,arguments).parseZone()};v.parseTwoDigitYear=function(a){return z(a)+(68<z(a)?1900:2E3)};u(v.fn=e.prototype,{clone:function(){return v(this)},valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},
toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=v(this).utc();return 0<a.year()&&9999>=a.year()?J(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return C(this)},isDSTShifted:function(){return this._a?this.isValid()&&0<G(this._a,(this._isUTC?v.utc(this._a):v(this._a)).toArray()):!1},parsingFlags:function(){return u({},
this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(a){a=J(this,a||v.defaultFormat);return this.localeData().postformat(a)},add:x(1,"add"),subtract:x(-1,"subtract"),diff:function(a,b,c){var e,d;a=n(a,this);var g=6E4*(this.zone()-a.zone());return b=H(b),"year"===b||"month"===b?(e=432E5*(this.daysInMonth()+a.daysInMonth()),
d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-v(this).startOf("month")-(a-v(a).startOf("month")))/e,d-=6E4*(this.zone()-v(this).startOf("month").zone()-(a.zone()-v(a).startOf("month").zone()))/e,"year"===b&&(d/=12)):(e=this-a,d="second"===b?e/1E3:"minute"===b?e/6E4:"hour"===b?e/36E5:"day"===b?(e-g)/864E5:"week"===b?(e-g)/6048E5:e),c?d:h(d)},from:function(a,b){return v.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(v(),a)},calendar:function(a){a=
a||v();a=n(a,this).startOf("day");a=this.diff(a,"days",!0);a=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this))},isLeapYear:function(){return N(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=a;var e=this.localeData();if("string"==typeof c)if(isNaN(c)){if(c=
e.weekdaysParse(c),"number"!=typeof c)c=null}else c=parseInt(c,10);b=(a=c,this.add(a-b,"d"))}return b},month:ea("Month",!0),startOf:function(a){switch(a=H(a)){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=
H(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+v(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+v(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+n(a,this).startOf(b)},min:l("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=
v.apply(null,arguments),this>a?this:a}),max:l("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=v.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,e=this._offset||0;return null==a?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof a&&(a=O(a)),16>Math.abs(a)&&(a*=60),!this._isUTC&&b&&(c=this._d.getTimezoneOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),e!==a&&(!b||this._changeInProgress?
q(this,v.duration(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,v.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?v(a).zone():0,0===(this.zone()-a)%60},daysInMonth:function(){return K(this.year(),
this.month())},dayOfYear:function(a){var b=ia((v(this).startOf("day")-v(this).startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return L(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return L(this.year(),a.dow,a.doy)},get:function(a){return a=H(a),this[a]()},set:function(a,
b){return a=H(a),"function"==typeof this[a]&&this[a](b),this},locale:function(a){return a===f?this._locale._abbr:(this._locale=v.localeData(a),this)},lang:l("moment().lang() is deprecated. Use moment().localeData() instead.",function(a){return a===f?this.localeData():(this._locale=v.localeData(a),this)}),localeData:function(){return this._locale}});v.fn.millisecond=v.fn.milliseconds=ea("Milliseconds",!1);v.fn.second=v.fn.seconds=ea("Seconds",!1);v.fn.minute=v.fn.minutes=ea("Minutes",!1);v.fn.hour=
v.fn.hours=ea("Hours",!0);v.fn.date=ea("Date",!0);v.fn.dates=l("dates accessor is deprecated. Use date instead.",ea("Date",!0));v.fn.year=ea("FullYear",!0);v.fn.years=l("years accessor is deprecated. Use year instead.",ea("FullYear",!0));v.fn.days=v.fn.day;v.fn.months=v.fn.month;v.fn.weeks=v.fn.week;v.fn.isoWeeks=v.fn.isoWeek;v.fn.quarters=v.fn.quarter;v.fn.toJSON=v.fn.toISOString;u(v.duration.fn=t.prototype,{_bubble:function(){var a=this._milliseconds;var b=this._days,c=this._months,e=this._data;
e.milliseconds=a%1E3;a=h(a/1E3);e.seconds=a%60;a=h(a/60);e.minutes=a%60;a=h(a/60);e.hours=a%24;b+=h(a/24);a=h(400*b/146097);b-=h(146097*a/400);c+=h(b/30);b%=30;a+=h(c/12);e.days=b;e.months=c%12;e.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=
Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*z(this._months/12)},humanize:function(a){var b=!a;var c=this.localeData(),e=v.duration(this).abs(),d=ia(e.as("s")),g=ia(e.as("m")),n=ia(e.as("h")),h=ia(e.as("d")),q=ia(e.as("M"));e=ia(e.as("y"));d=d<fa.s&&["s",d]||1===g&&["m"]||g<fa.m&&["mm",g]||
1===n&&["h"]||n<fa.h&&["hh",n]||1===h&&["d"]||h<fa.d&&["dd",h]||1===q&&["M"]||q<fa.M&&["MM",q]||1===e&&["y"]||["yy",e];b=(d[2]=b,d[3]=0<+this,d[4]=c,va.apply({},d));return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){a=v.duration(a,b);return this._milliseconds+=a._milliseconds,this._days+=a._days,this._months+=a._months,this._bubble(),this},subtract:function(a,b){a=v.duration(a,b);return this._milliseconds-=a._milliseconds,this._days-=a._days,this._months-=
a._months,this._bubble(),this},get:function(a){return a=H(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=H(a),b=this._days+this._milliseconds/864E5,"month"===a||"year"===a)return c=this._months+400*b/146097*12,"month"===a?c:c/12;switch(b+=this._months/12*146097/400,a){case "week":return b/7;case "day":return b;case "hour":return 24*b;case "minute":return 1440*b;case "second":return 86400*b;case "millisecond":return 864E5*b;default:throw Error("Unknown unit "+a);}},lang:v.fn.lang,locale:v.fn.locale,
toIsoString:l("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),e=Math.abs(this.hours()),d=Math.abs(this.minutes()),g=Math.abs(this.seconds()+this.milliseconds()/1E3);return this.asSeconds()?(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(e||d||g?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(g?g+"S":""):"P0D"},
localeData:function(){return this._locale}});for(S in Ja)Ja.hasOwnProperty(S)&&cb(S.toLowerCase());v.duration.fn.asMilliseconds=function(){return this.as("ms")};v.duration.fn.asSeconds=function(){return this.as("s")};v.duration.fn.asMinutes=function(){return this.as("m")};v.duration.fn.asHours=function(){return this.as("h")};v.duration.fn.asDays=function(){return this.as("d")};v.duration.fn.asWeeks=function(){return this.as("weeks")};v.duration.fn.asMonths=function(){return this.as("M")};v.duration.fn.asYears=
function(){return this.as("y")};v.locale("en",{ordinal:function(a){var b=a%10;b=1===z(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});Ba?module.exports=v:"function"==typeof _wAMD.define&&_wAMD.define.amd?(_wAMD.define("moment",["require","exports","module"],function(a,b,c){return c.config&&c.config()&&!0===c.config().noGlobal&&(ua.moment=Ia),v}),Ha(!0)):Ha()}).call(this);
_wAMD.define("mustache",["jquery","public_legacy/mustache","moment"],function(f,d,a){window.Mustache=d;var r=Weebly?Weebly.AdminType:"",l={date:"MMMM D, YYYY",shortDate:"M/D/YY",longDate:"M/D/YYYY",time:"h:mm a"},m=function(b){return function(e,d){e=d(e);return a.unix(e).format(l[b])}},b={buildTime:"undefined"!=typeof buildTime?buildTime:null,ASSETS_BASE:"undefined"!=typeof ASSETS_BASE?ASSETS_BASE:null,tl:function(){return function(a,b){return b(_W.tl(a))}},esc_attr:function(){return function(a,b){return _.escape(b(a))}},
fmt:{date:function(){return m("date")},shortDate:function(){return m("shortDate")},longDate:function(){return m("longDate")},time:function(){return m("time")}},isWeeblyAdmin:function(){return"weebly"===r},td:function(){return function(b,d){var e="DD D MM M YY YYYY a A hh h HH H mm ss".split(" ");_.each("djmnyYaAghGHis".split(""),function(a,c){b=b.replace(a,e[c])});var c=b.split(/\|/),h=c[0];d=d("{{"+c[1]+"}}");return a(d).format(h)}}};d.origRender=d.render;d.render=function(a,t){return f.extend(t,
b),d.origRender.apply(this,arguments)};var w=d.Writer.prototype;return w.origCompile=w.compile,w.compile=function(a){var e=w.origCompile.apply(this,[a]);return function(){var a=Array.prototype.slice.call(arguments);return a[0]=f.extend(a[0]||{},b),e.apply(this,a)}},d});
(function(f,d,a){function r(a,b,c,d){if("d"!=c&&t(a)){var g=p.exec(b),h="auto"===a.css(c)?0:a.css(c);h="string"==typeof h?e(h):h;d=("string"==typeof b?e(b):b,!0===d?0:h);var n=a.is(":hidden"),q=a.translation();return("left"==c&&(d=parseInt(h,10)+q.x),"right"==c&&(d=parseInt(h,10)+q.x),"top"==c&&(d=parseInt(h,10)+q.y),"bottom"==c&&(d=parseInt(h,10)+q.y),g||"show"!=b?g||"hide"!=b||(d=0):(d=1,n&&a.css({display:"block",opacity:0})),g)?(a=parseFloat(g[2]),g[1]&&(a=("-="===g[1]?-1:1)*a+parseInt(d,10)),
a):d}}function l(a,b,c,d,g,k,n,p){var A=a.data(F);A=A&&!w(A)?A:f.extend(!0,{},q);var y=g;if(-1<f.inArray(b,h)){var t=A.meta,l=e(a.css(b))||0,x=b+"_o";y=g-l;t[b]=y;t[x]="auto"==a.css(b)?0+y:l+y||0;A.meta=t;n&&0===y&&(y=0-t[x],t[b]=y,t[x]=0)}return a.data(F,m(a,A,b,c,d,y,k,n,p))}function m(a,b,c,e,d,g,n,h,q){var f=!1;n=!0===n&&!0===h;b=b||{};b.original||(b.original={},f=!0);b.properties=b.properties||{};b.secondary=b.secondary||{};h=b.meta;for(var k=b.original,p=b.properties,A=b.secondary,t=y.length-
1;0<=t;t--){var l=y[t]+"transition-property",x=y[t]+"transition-duration",m=y[t]+"transition-timing-function";c=n?y[t]+"transform":c;f&&(k[l]=a.css(l)||"",k[x]=a.css(x)||"",k[m]=a.css(m)||"");var M=c;if(n){var r=h.left;var u=h.top;r=(!0===q||!0===K&&!1!==q)&&z?"translate3d("+r+"px, "+u+"px, 0)":"translate("+r+"px,"+u+"px)"}else r=g;A[M]=r;p[l]=(p[l]?p[l]+",":"")+c;p[x]=(p[x]?p[x]+",":"")+e+"ms";p[m]=(p[m]?p[m]+",":"")+d}return b}function b(a){for(var b in a)if(!("width"!=b&&"height"!=b||"show"!=a[b]&&
"hide"!=a[b]&&"toggle"!=a[b]))return!0;return!1}function w(a){for(var b in a)return!1;return!0}function e(a){return parseFloat(a.replace(a.match(/\D+$/),""))}function t(a){var b=!0;return a.each(function(a,c){return b=b&&c.ownerDocument}),b}function u(a,b,e){if(!t(e))return!1;var d=-1<f.inArray(a,c);return"width"!=a&&"height"!=a&&"opacity"!=a||parseFloat(b)!==parseFloat(e.css(a))||(d=!1),d}var c="top right bottom left opacity height width".split(" "),h=["top","right","bottom","left"],y=["-webkit-",
"-moz-","-o-",""],g=["avoidTransforms","useTranslate3d","leaveTransforms"],p=/^([+-]=)?([\d+-.]+)(.*)$/,x=/([A-Z])/g,q={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},F="jQe",G=null,H=!1,k=(document.body||document.documentElement).style,E=void 0!==k.WebkitTransition||void 0!==k.MozTransition||void 0!==k.OTransition||void 0!==k.transition,z="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,K=z;f.expr&&f.expr.filters&&(G=f.expr.filters.animated,f.expr.filters.animated=function(a){return f(a).data("events")&&
f(a).data("events")["webkitTransitionEnd oTransitionEnd transitionend"]?!0:G.call(this,a)});f.extend({toggle3DByDefault:function(){return K=!K},toggleDisabledByDefault:function(){return H=!H}});f.fn.translation=function(){if(!this[0])return null;var a=window.getComputedStyle(this[0],null),b={x:0,y:0};if(a)for(var c=y.length-1;0<=c;c--){var e=a.getPropertyValue(y[c]+"transform");if(e&&/matrix/i.test(e)){a=e.replace(/^matrix\(/i,"").split(/, |\)$/g);b={x:parseInt(a[4],10),y:parseInt(a[5],10)};break}}return b};
f.fn.animate=function(a,c,e,q){a=a||{};var k=!("undefined"!=typeof a.bottom||"undefined"!=typeof a.right),p=f.speed(c,e,q),n=this,A=0,t=function(){A--;0===A&&"function"==typeof p.complete&&p.complete.apply(n,arguments)};return!0===("undefined"!=typeof a.avoidCSSTransitions?a.avoidCSSTransitions:H)||!E||w(a)||b(a)||0>=p.duration||!0===f.fn.animate.defaults.avoidTransforms&&!1!==a.avoidTransforms?d.apply(this,arguments):this[!0===p.queue?"queue":"each"](function(){var b=f(this),c=f.extend({},p),e=function(c){var e=
b.data(F)||{original:{}},d={};if(2==c.eventPhase){if(!0!==a.leaveTransforms){for(c=y.length-1;0<=c;c--)d[y[c]+"transform"]="";if(k&&"undefined"!=typeof e.meta)for(var g=0;c=h[g];++g)d[c]=e.meta[c+"_o"]+"px",f(this).css(c,d[c])}b.unbind("webkitTransitionEnd oTransitionEnd transitionend").css(e.original).css(d).data(F,null);"hide"===a.opacity&&b.css({display:"none",opacity:""});t.call(this)}},n={bounce:"cubic-bezier(0.0, 0.35, .5, 1.3)",linear:"linear",swing:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",
easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",
easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},q={};n=n[c.easing||"swing"]?n[c.easing||"swing"]:c.easing||"swing";for(var x in a)if(-1===f.inArray(x,g)){var m=-1<f.inArray(x,h),M=r(b,a[x],x,m&&!0!==a.avoidTransforms);!0!==a.avoidTransforms&&u(x,M,b)?l(b,x,c.duration,n,m&&!0===a.avoidTransforms?M+"px":M,m&&!0!==a.avoidTransforms,
k,a.useTranslate3d):q[x]=a[x]}b.unbind("webkitTransitionEnd oTransitionEnd transitionend");x=b.data(F);if(!x||w(x)||w(x.secondary))c.queue=!1;else{A++;b.css(x.properties);var C=x.secondary;setTimeout(function(){b.bind("webkitTransitionEnd oTransitionEnd transitionend",e).css(C)})}return w(q)||(A++,d.apply(b,[q,{duration:c.duration,easing:f.easing[c.easing]?c.easing:f.easing.swing?"swing":"linear",complete:t,queue:c.queue}])),!0})};f.fn.animate.defaults={};f.fn.stop=function(b,c,e){return E?(b&&this.queue([]),
this.each(function(){var d=f(this),g=d.data(F);if(g&&!w(g)){var h,n={};if(c)for(n=g.secondary,n.left=g.meta.left_o,n.top=g.meta.top_o,h=y.length-1;0<=h;h--)n[y[h]+"transform"]="";else if(!w(g.secondary)){var q=window.getComputedStyle(d[0],null);if(q)for(var k in g.secondary)if(g.secondary.hasOwnProperty(k)&&(k=k.replace(x,"-$1").toLowerCase(),n[k]=q.getPropertyValue(k),!e&&/matrix/i.test(n[k])))for(h=n[k].replace(/^matrix\(/i,"").split(/, |\)$/g),n.left=parseFloat(h[4])+parseFloat(d.css("left"))+
"px"||"auto",n.top=parseFloat(h[5])+parseFloat(d.css("top"))+"px"||"auto",h=y.length-1;0<=h;h--)n[y[h]+"transform"]=""}d.unbind("webkitTransitionEnd oTransitionEnd transitionend");d.css(g.original).css(n).data(F,null)}else a.apply(d,[b,c])}),this):a.apply(this,[b,c])};/ AppleWebKit\//.test(navigator.userAgent)&&/ Mobile\//.test(navigator.userAgent)||f.toggleDisabledByDefault()})(jQuery,jQuery.fn.animate,jQuery.fn.stop);_wAMD.define("legacy/jquery.animate",function(){});
(function(f){f.fn.up=function(a){return this.eq(0).parent().closest(a||"*")};f.fn.down=function(a){return a?this.eq(0).find(a||"*").eq(0):this.eq(0).children(":first")};var d=1;f.fn.identify=function(){var a=this.attr("id");if(!a&&this.length){do a="anonymous_element_"+d++;while(f("#"+a).length);this.attr("id",a)}return a};f.fn.placeholder=function(){if(!("placeholder"in document.createElement("input"))){var a;this.each(function(d,l){(a=l.getAttribute("placeholder"))&&"input"===l.nodeName.toLowerCase()&&
(f(l).on({focus:function(){l.value===a&&(f(l).removeClass("wsite-placeholder"),l.value="")},blur:function(){l.value.length||(l.value=a,l.className+=" wsite-placeholder")}}),l.className+=" wsite-placeholder",l.value=a)})}};f.extend({isValidSelector:function(a){try{f(a)}catch(r){return!1}return!0}});document.observe||(document.observe=function(a,d){"dom:loaded"==a&&f(document).ready(d)})})(Weebly.jQuery);
Weebly.evalJSON=function(f){var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;d.test(f)&&(f=f.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{return eval("("+f+")")}catch(a){}throw new SyntaxError("Badly formed JSON string: "+f);};_wAMD.define("legacy/jquery_utils",function(){});
_wAMD.define("jquery-ui/effect",["jquery"],function(f){!function(d,a){d.effects={effect:{}};(function(a,d){function f(a,b,c){var e=h[b.type]||{};return null==a?c||!b.def?null:b.def:(a=e.floor?~~a:parseFloat(a),isNaN(a)?b.def:e.mod?(a+e.mod)%e.mod:0>a?0:e.max<a?e.max:a)}function b(b){var e=u(),d=e._rgba=[];return b=b.toLowerCase(),p(t,function(a,g){var h;a=(a=g.re.exec(b))&&g.parse(a);g=g.space||"rgba";return a?(h=e[g](a),e[c[g].cache]=h[c[g].cache],d=e._rgba=h._rgba,!1):void 0}),d.length?("0,0,0,0"===
d.join()&&a.extend(d,x.transparent),e):x[b]}function l(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var e=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],u=a.Color=function(b,c,e,d){return new a.Color.fn.parse(b,c,e,d)},c={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},y=u.support={},g=a("<p>")[0],p=a.each;g.style.cssText="background-color:rgba(1,1,1,.5)";y.rgba=-1<g.style.backgroundColor.indexOf("rgba");p(c,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});u.fn=a.extend(u.prototype,{parse:function(e,g,h,y){if(e===
d)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=d);var k=this,q=a.type(e),t=this._rgba=[];return g!==d&&(e=[e,g,h,y],q="array"),"string"===q?this.parse(b(e)||x._default):"array"===q?(p(c.rgba.props,function(a,b){t[b.idx]=f(e[b.idx],b)}),this):"object"===q?(e instanceof u?p(c,function(a,b){e[b.cache]&&(k[b.cache]=e[b.cache].slice())}):p(c,function(b,c){var d=c.cache;p(c.props,function(a,b){if(!k[d]&&c.to){if("alpha"===a||null==e[a])return;k[d]=c.to(k._rgba)}k[d][b.idx]=
f(e[a],b,!0)});k[d]&&0>a.inArray(null,k[d].slice(0,3))&&(k[d][3]=1,c.from&&(k._rgba=c.from(k[d])))}),this):void 0},is:function(a){var b=u(a),e=!0,d=this;return p(c,function(a,c){var g,h=b[c.cache];return h&&(g=d[c.cache]||c.to&&c.to(d._rgba)||[],p(c.props,function(a,b){return null!=h[b.idx]?e=h[b.idx]===g[b.idx]:void 0})),e}),e},_space:function(){var a=[],b=this;return p(c,function(c,e){b[e.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var e=u(a);a=e._space();var d=c[a],g=0===this.alpha()?
u("transparent"):this,q=g[d.cache]||d.to(g._rgba),y=q.slice();return e=e[d.cache],p(d.props,function(a,c){a=c.idx;var d=q[a],g=e[a],k=h[c.type]||{};null!==g&&(null===d?y[a]=g:(k.mod&&(g-d>k.mod/2?d+=k.mod:d-g>k.mod/2&&(d-=k.mod)),y[a]=f((g-d)*b+d,c)))}),this[a](y)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),e=c.pop(),d=u(b)._rgba;return u(a.map(c,function(a,b){return(1-e)*d[b]+e*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==
a?2<b?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=2<b?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),e=c.pop();return b&&c.push(~~(255*e)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});
u.fn.parse.prototype=u.fn;c.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,e=a[0]/255,d=a[1]/255,g=a[2]/255;a=a[3];var h=Math.max(e,d,g),f=Math.min(e,d,g),p=h-f,q=h+f,y=.5*q;return b=f===h?0:e===h?60*(d-g)/p+360:d===h?60*(g-e)/p+120:60*(e-d)/p+240,c=0===p?0:.5>=y?p/q:p/(2-q),[Math.round(b)%360,c,y,null==a?1:a]};c.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],e=a[2];a=a[3];c=.5>=e?e*(1+c):
e+c-e*c;e=2*e-c;return[Math.round(255*l(e,c,b+1/3)),Math.round(255*l(e,c,b)),Math.round(255*l(e,c,b-1/3)),a]};p(c,function(b,c){var g=c.props,h=c.cache,k=c.to,q=c.from;u.fn[b]=function(b){if(k&&!this[h]&&(this[h]=k(this._rgba)),b===d)return this[h].slice();var c,e=a.type(b),y="array"===e||"object"===e?b:arguments,t=this[h].slice();return p(g,function(a,b){a=y["object"===e?a:b.idx];null==a&&(a=t[b.idx]);t[b.idx]=f(a,b)}),q?(c=u(q(t)),c[h]=t,c):u(t)};p(g,function(c,d){u.fn[c]||(u.fn[c]=function(g){var h,
f=a.type(g),p="alpha"===c?this._hsla?"hsla":"rgba":b,k=this[p](),q=k[d.idx];return"undefined"===f?q:("function"===f&&(g=g.call(this,q),f=a.type(g)),null==g&&d.empty?this:("string"===f&&(h=e.exec(g),h&&(g=q+parseFloat(h[2])*("+"===h[1]?1:-1))),k[d.idx]=g,this[p](k)))})})});u.hook=function(c){c=c.split(" ");p(c,function(c,e){a.cssHooks[e]={set:function(c,d){var g,h="";if("transparent"!==d&&("string"!==a.type(d)||(g=b(d)))){if(d=u(g||d),!y.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===e?c.parentNode:
c;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(K){}d=d.blend(h&&"transparent"!==h?h:"_default")}d=d.toRgbaString()}try{c.style[e]=d}catch(K){}}};a.fx.step[e]=function(b){b.colorInit||(b.start=u(b.elem,e),b.end=u(b.end),b.colorInit=!0);a.cssHooks[e].set(b.elem,b.start.transition(b.end,b.pos))}})};u.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
a.cssHooks.borderColor={expand:function(a){var b={};return p(["Top","Right","Bottom","Left"],function(c,e){b["border"+e+"Color"]=a}),b}};var x=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(f);(function(){function r(a){var b=a.ownerDocument.defaultView?
a.ownerDocument.defaultView.getComputedStyle(a,null):a.currentStyle,e={};if(b&&b.length&&b[0]&&b[b[0]])for(a=b.length;a--;){var f=b[a];"string"==typeof b[f]&&(e[d.camelCase(f)]=b[f])}else for(f in b)"string"==typeof b[f]&&(e[f]=b[f]);return e}var l=["add","remove","toggle"],m={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(a,l){d.fx.step[l]=function(a){("none"!==
a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(f.style(a.elem,l,a.end),a.setAttr=!0)}});d.fn.addBack||(d.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});d.effects.animateClass=function(a,f,e,t){var b=d.speed(f,e,t);return this.queue(function(){var c=d(this),e=c.attr("class")||"",f=b.children?c.find("*").addBack():c;f=f.map(function(){return{el:d(this),start:r(this)}});var g=function(){d.each(l,function(b,e){a[e]&&c[e+"Class"](a[e])})};g();f=f.map(function(){this.end=
r(this.el[0]);var a=this.start,b=this.end,c,e={};for(c in b){var g=b[c];a[c]!==g&&(m[c]||(d.fx.step[c]||!isNaN(parseFloat(g)))&&(e[c]=g))}return this.diff=e,this});c.attr("class",e);f=f.map(function(){var a=this,c=d.Deferred(),e=d.extend({},b,{queue:!1,complete:function(){c.resolve(a)}});return this.el.animate(this.diff,e),c.promise()});d.when.apply(d,f.get()).done(function(){g();d.each(arguments,function(){var a=this.el;d.each(this.diff,function(b){a.css(b,"")})});b.complete.call(c[0])})})};d.fn.extend({addClass:function(a){return function(b,
e,f,l){return e?d.effects.animateClass.call(this,{add:b},e,f,l):a.apply(this,arguments)}}(d.fn.addClass),removeClass:function(a){return function(b,e,f,l){return 1<arguments.length?d.effects.animateClass.call(this,{remove:b},e,f,l):a.apply(this,arguments)}}(d.fn.removeClass),toggleClass:function(b){return function(f,e,t,l,c){return"boolean"==typeof e||e===a?t?d.effects.animateClass.call(this,e?{add:f}:{remove:f},t,l,c):b.apply(this,arguments):d.effects.animateClass.call(this,{toggle:f},e,t,l)}}(d.fn.toggleClass),
switchClass:function(a,f,e,t,l){return d.effects.animateClass.call(this,{add:f,remove:a},e,t,l)}})})();(function(){function f(a,b,f,e){return d.isPlainObject(a)&&(b=a,a=a.effect),a={effect:a},null==b&&(b={}),d.isFunction(b)&&(e=b,f=null,b={}),("number"==typeof b||d.fx.speeds[b])&&(e=f,f=b,b={}),d.isFunction(f)&&(e=f,f=null),b&&d.extend(a,b),f=f||b.duration,a.duration=d.fx.off?0:"number"==typeof f?f:f in d.fx.speeds?d.fx.speeds[f]:d.fx.speeds._default,a.complete=e||b.complete,a}function l(a){return!a||
"number"==typeof a||d.fx.speeds[a]?!0:"string"!=typeof a||d.effects.effect[a]?d.isFunction(a)?!0:"object"!=typeof a||a.effect?!1:!0:!0}d.extend(d.effects,{version:"1.10.2",save:function(a,b){for(var d=0;d<b.length;d++)null!==b[d]&&a.data("ui-effects-"+b[d],a[0].style[b[d]])},restore:function(d,b){var f,e;for(e=0;e<b.length;e++)null!==b[e]&&(f=d.data("ui-effects-"+b[e]),f===a&&(f=""),d.css(b[e],f))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,
b){switch(a[0]){case "top":var d=0;break;case "middle":d=.5;break;case "bottom":d=1;break;default:d=a[0]/b.height}switch(a[1]){case "left":a=0;break;case "center":a=.5;break;case "right":a=1;break;default:a=a[1]/b.width}return{x:a,y:d}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},f=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",
margin:0,padding:0}),e={width:a.width(),height:a.height()},t=document.activeElement;try{t.id}catch(u){t=document.body}return a.wrap(f),(a[0]===t||d.contains(a[0],t))&&d(t).focus(),f=a.parent(),"static"===a.css("position")?(f.css({position:"relative"}),a.css({position:"relative"})):(d.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),d.each(["top","left","bottom","right"],function(e,c){b[c]=a.css(c);isNaN(parseInt(b[c],10))&&(b[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",
bottom:"auto"})),a.css(e),f.css(b).show()},removeWrapper:function(a){var b=document.activeElement;return a.parent().is(".ui-effects-wrapper")&&(a.parent().replaceWith(a),(a[0]===b||d.contains(a[0],b))&&d(b).focus()),a},setTransition:function(a,b,f,e){return e=e||{},d.each(b,function(b,d){b=a.cssUnit(d);0<b[0]&&(e[d]=b[0]*f+b[1])}),e}});d.fn.extend({effect:function(){function a(a){function c(){d.isFunction(f)&&f.call(e[0]);d.isFunction(a)&&a()}var e=d(this),f=b.complete,g=b.mode;(e.is(":hidden")?"hide"===
g:"show"===g)?(e[g](),c()):t.call(e[0],b,c)}var b=f.apply(this,arguments),l=b.mode,e=b.queue,t=d.effects.effect[b.effect];return d.fx.off||!t?l?this[l](b.duration,b.complete):this.each(function(){b.complete&&b.complete.call(this)}):!1===e?this.each(a):this.queue(e||"fx",a)},show:function(a){return function(b){if(l(b))return a.apply(this,arguments);var d=f.apply(this,arguments);return d.mode="show",this.effect.call(this,d)}}(d.fn.show),hide:function(a){return function(b){if(l(b))return a.apply(this,
arguments);var d=f.apply(this,arguments);return d.mode="hide",this.effect.call(this,d)}}(d.fn.hide),toggle:function(a){return function(b){if(l(b)||"boolean"==typeof b)return a.apply(this,arguments);var d=f.apply(this,arguments);return d.mode="toggle",this.effect.call(this,d)}}(d.fn.toggle),cssUnit:function(a){var b=this.css(a),f=[];return d.each(["em","px","%","pt"],function(a,d){0<b.indexOf(d)&&(f=[parseFloat(b),d])}),f}})})();(function(){var a={};d.each(["Quad","Cubic","Quart","Quint","Expo"],function(d,
f){a[f]=function(a){return Math.pow(a,d+2)}});d.extend(a,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var d,b=4;a<((d=Math.pow(2,--b))-1)/11;);return 1/Math.pow(4,3-b)-7.5625*Math.pow((3*d-2)/22-a,2)}});d.each(a,function(a,f){d.easing["easeIn"+a]=f;d.easing["easeOut"+a]=function(a){return 1-
f(1-a)};d.easing["easeInOut"+a]=function(a){return.5>a?f(2*a)/2:1-f(-2*a+2)/2}})})()}(f)});
_wAMD.define("jquery-ui/effect-highlight",["jquery","./effect"],function(f){!function(d){d.effects.effect.highlight=function(a,f){var l=d(this),m=["backgroundImage","backgroundColor","opacity"],b=d.effects.setMode(l,a.mode||"show"),r={backgroundColor:l.css("backgroundColor")};"hide"===b&&(r.opacity=0);d.effects.save(l,m);l.show().css({backgroundImage:"none",backgroundColor:a.color||"#ffff99"}).animate(r,{queue:!1,duration:a.duration,easing:a.easing,complete:function(){"hide"===b&&l.hide();d.effects.restore(l,
m);f()}})}}(f)});_wAMD.define("jquery-ui/effect-fade",["jquery","./effect"],function(f){!function(d){d.effects.effect.fade=function(a,f){var l=d(this),m=d.effects.setMode(l,a.mode||"toggle");l.animate({opacity:m},{queue:!1,duration:a.duration,easing:a.easing,complete:f})}}(f)});
_wAMD.define("util/effect-slide-custom",["jquery","jquery-ui/effect"],function(f){!function(d){d.effects.effect.slide=function(a,f){var l=d(this),m="position top bottom left right width height".split(" "),b=d.effects.setMode(l,a.mode||"show"),r="show"===b;var e=a.direction||"left";var t="up"===e||"down"===e?"top":"left",u="up"===e||"left"===e,c={};d.effects.save(l,m);l.show();var h=a.wrapper;h?(h=d(h).show(),/relative|absolute/.test(l.css("position"))||l.css("position","relative")):h=d.effects.createWrapper(l);
h.css("overflow","hidden");e=a.distance||("top"==t?l.height()?l.outerHeight(!0):h.height():l.width()?l.outerWidth(!0):h.width());r&&l.css(t,u?isNaN(e)?"-"+e:-e:e);c[t]=(r?u?"+=":"-=":u?"-=":"+=")+e;l.animate(c,{queue:!1,duration:a.duration,easing:a.easing,complete:function(){"hide"===b&&l.hide();d.effects.restore(l,m);a.wrapper?(h.css("overflow",""),"hide"==b&&h.hide()):d.effects.removeWrapper(l);f()}})}}(f)});
(function(f,d){if("function"==typeof _wAMD.define&&_wAMD.define.amd)_wAMD.define("backbone",["underscore","jquery","exports"],function(a,l,m){f.Backbone=d(f,m,a,l)});else if("undefined"!=typeof exports){var a=require("underscore");d(f,exports,a)}else f.Backbone=d(f,{},f._,f.jQuery||f.Zepto||f.ender||f.$)})(this,function(f,d,a,r){var l=f.Backbone,m=[];m.push;var b=m.slice;m.splice;d.VERSION="1.1.2";d.$=r;d.noConflict=function(){return f.Backbone=l,this};d.emulateHTTP=!1;d.emulateJSON=!1;var w=d.Events=
{on:function(a,b,c){if(!t(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});return(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this},once:function(b,c,e){if(!t(this,"once",b,[c,e])||!c)return this;var d=this,g=a.once(function(){d.off(b,g);c.apply(this,arguments)});return g._callback=c,this.on(b,g,e)},off:function(b,c,e){var d,g,n,h;if(!this._events||!t(this,"off",b,[c,e]))return this;if(!b&&!c&&!e)return this._events=void 0,this;var f=b?[b]:a.keys(this._events);
var p=0;for(n=f.length;n>p;p++)if(b=f[p],g=this._events[b]){if(this._events[b]=d=[],c||e){var k=0;for(h=g.length;h>k;k++){var q=g[k];(c&&c!==q.callback&&c!==q.callback._callback||e&&e!==q.context)&&d.push(q)}}d.length||delete this._events[b]}return this},trigger:function(a){if(!this._events)return this;var c=b.call(arguments,1);if(!t(this,"trigger",a,c))return this;var e=this._events[a],d=this._events.all;return e&&u(e,c),d&&u(d,arguments),this},stopListening:function(b,c,e){var d=this._listeningTo;
if(!d)return this;var g=!c&&!e;e||"object"!=typeof c||(e=this);b&&((d={})[b._listenId]=b);for(var n in d)b=d[n],b.off(c,e,this),(g||a.isEmpty(b._events))&&delete this._listeningTo[n];return this}},e=/\s+/,t=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var g in c)a[b].apply(a,[g,c[g]].concat(d));return!1}if(e.test(c)){c=c.split(e);g=0;for(var n=c.length;n>g;g++)a[b].apply(a,[c[g]].concat(d));return!1}return!0},u=function(a,b){var c,e=-1,d=a.length,g=b[0],n=b[1],h=b[2];switch(b.length){case 0:for(;++e<
d;)(c=a[e]).callback.call(c.ctx);break;case 1:for(;++e<d;)(c=a[e]).callback.call(c.ctx,g);break;case 2:for(;++e<d;)(c=a[e]).callback.call(c.ctx,g,n);break;case 3:for(;++e<d;)(c=a[e]).callback.call(c.ctx,g,n,h);break;default:for(;++e<d;)(c=a[e]).callback.apply(c.ctx,b)}};a.each({listenTo:"on",listenToOnce:"once"},function(b,c){w[c]=function(c,e,d){var g=this._listeningTo||(this._listeningTo={}),n=c._listenId||(c._listenId=a.uniqueId("l"));return g[n]=c,d||"object"!=typeof e||(d=this),c[b](e,d,this),
this}});w.bind=w.on;w.unbind=w.off;a.extend(d,w);var c=d.Model=function(b,c){var e=b||{};c||(c={});this.cid=a.uniqueId("c");this.attributes={};c.collection&&(this.collection=c.collection);c.parse&&(e=this.parse(e,c)||{});e=a.defaults({},e,a.result(this,"defaults"));this.set(e,c);this.changed={};this.initialize.apply(this,arguments)};a.extend(c.prototype,w,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return d.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(b){return a.escape(this.get(b))},has:function(a){return null!=this.get(a)},set:function(b,c,e){var d,g;if(null==b)return this;if("object"==typeof b?(g=b,e=c):(g={})[b]=c,e||(e={}),!this._validate(g,e))return!1;var h=e.unset;var n=e.silent;b=[];var f=this._changing;this._changing=!0;f||(this._previousAttributes=a.clone(this.attributes),this.changed={});var p=this.attributes;var k=this._previousAttributes;this.idAttribute in g&&
(this.id=g[this.idAttribute]);for(d in g)c=g[d],a.isEqual(p[d],c)||b.push(d),a.isEqual(k[d],c)?delete this.changed[d]:this.changed[d]=c,h?delete p[d]:p[d]=c;if(!n)for(b.length&&(this._pending=e),c=0,d=b.length;d>c;c++)this.trigger("change:"+b[c],this,p[b[c]],e);if(f)return this;if(!n)for(;this._pending;)e=this._pending,this._pending=!1,this.trigger("change",this,e);return this._pending=!1,this._changing=!1,this},unset:function(b,c){return this.set(b,void 0,a.extend({},c,{unset:!0}))},clear:function(b){var c=
{},e;for(e in this.attributes)c[e]=void 0;return this.set(c,a.extend({},b,{unset:!0}))},hasChanged:function(b){return null==b?!a.isEmpty(this.changed):a.has(this.changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?a.clone(this.changed):!1;var c,e=!1,d=this._changing?this._previousAttributes:this.attributes,g;for(g in b)a.isEqual(d[g],c=b[g])||((e||(e={}))[g]=c);return e},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},
fetch:function(b){b=b?a.clone(b):{};void 0===b.parse&&(b.parse=!0);var c=this,e=b.success;return b.success=function(a){return c.set(c.parse(a,b),b)?(e&&e(c,a,b),c.trigger("sync",c,a,b),void 0):!1},D(this,b),this.sync("read",this,b)},save:function(b,c,e){var d,g,h,f=this.attributes;if(null==b||"object"==typeof b?(d=b,e=c):(d={})[b]=c,e=a.extend({validate:!0},e),d&&!e.wait){if(!this.set(d,e))return!1}else if(!this._validate(d,e))return!1;d&&e.wait&&(this.attributes=a.extend({},f,d));void 0===e.parse&&
(e.parse=!0);var n=this,p=e.success;return e.success=function(b){n.attributes=f;var c=n.parse(b,e);return e.wait&&(c=a.extend(d||{},c)),a.isObject(c)&&!n.set(c,e)?!1:(p&&p(n,b,e),n.trigger("sync",n,b,e),void 0)},D(this,e),g=this.isNew()?"create":e.patch?"patch":"update","patch"===g&&(e.attrs=d),h=this.sync(g,this,e),d&&e.wait&&(this.attributes=f),h},destroy:function(b){b=b?a.clone(b):{};var c=this,e=b.success,d=function(){c.trigger("destroy",c,c.collection,b)};if(b.success=function(a){(b.wait||c.isNew())&&
d();e&&e(c,a,b);c.isNew()||c.trigger("sync",c,a,b)},this.isNew())return b.success(),!1;D(this,b);var g=this.sync("delete",this,b);return b.wait||d(),g},url:function(){var b=a.result(this,"urlRoot")||a.result(this.collection,"url")||B();return this.isNew()?b:b.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},
a.extend(b||{},{validate:!0}))},_validate:function(b,c){if(!c.validate||!this.validate)return!0;b=a.extend({},this.attributes,b);return(b=this.validationError=this.validate(b,c)||null)?(this.trigger("invalid",this,b,a.extend(c,{validationError:b})),!1):!0}});a.each("keys values pairs invert pick omit".split(" "),function(e){c.prototype[e]=function(){var c=b.call(arguments);return c.unshift(this.attributes),a[e].apply(a,c)}});var h=d.Collection=function(b,c){c||(c={});c.model&&(this.model=c.model);
void 0!==c.comparator&&(this.comparator=c.comparator);this._reset();this.initialize.apply(this,arguments);b&&this.reset(b,a.extend({silent:!0},c))},y={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};a.extend(h.prototype,w,{model:c,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return d.sync.apply(this,arguments)},add:function(b,c){return this.set(b,a.extend({merge:!1},c,g))},remove:function(b,c){var e=!a.isArray(b);b=e?[b]:a.clone(b);c||
(c={});var d,g,h;var f=0;for(d=b.length;d>f;f++)(h=b[f]=this.get(b[f]))&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,c.silent||(c.index=g,h.trigger("remove",h,this,c)),this._removeReference(h,c));return e?b[0]:b},set:function(b,e){e=a.defaults({},e,y);e.parse&&(b=this.parse(b,e));var d=!a.isArray(b);b=d?b?[b]:[]:a.clone(b);var g,h,f,n,p,k,q=e.at,t=this.model,x=this.comparator&&null==q&&!1!==e.sort,l=a.isString(this.comparator)?this.comparator:
null,A=[],u=[],m={},r=e.add,C=e.merge,F=e.remove,B=!x&&r&&F?[]:!1;var w=0;for(g=b.length;g>w;w++){if(n=b[w]||{},h=n instanceof c?f=n:n[t.prototype.idAttribute||"id"],p=this.get(h))F&&(m[p.cid]=!0),C&&(n=n===f?f.attributes:n,e.parse&&(n=p.parse(n,e)),p.set(n,e),x&&!k&&p.hasChanged(l)&&(k=!0)),b[w]=p;else if(r){if(f=b[w]=this._prepareModel(n,e),!f)continue;A.push(f);this._addReference(f,e)}f=p||f;!B||!f.isNew()&&m[f.id]||B.push(f);m[f.id]=!0}if(F){w=0;for(g=this.length;g>w;++w)m[(f=this.models[w]).cid]||
u.push(f);u.length&&this.remove(u,e)}if(A.length||B&&B.length)if(x&&(k=!0),this.length+=A.length,null!=q)for(w=0,g=A.length;g>w;w++)this.models.splice(q+w,0,A[w]);else for(B&&(this.models.length=0),h=B||A,w=0,g=h.length;g>w;w++)this.models.push(h[w]);if(k&&this.sort({silent:!0}),!e.silent){w=0;for(g=A.length;g>w;w++)(f=A[w]).trigger("add",f,this,e);(k||B&&B.length)&&this.trigger("sort",this,e)}return d?b[0]:b},reset:function(b,c){c||(c={});for(var e=0,d=this.models.length;d>e;e++)this._removeReference(this.models[e],
c);return c.previousModels=this.models,this._reset(),b=this.add(b,a.extend({silent:!0},c)),c.silent||this.trigger("reset",this,c),b},push:function(b,c){return this.add(b,a.extend({at:this.length},c))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(b,c){return this.add(b,a.extend({at:0},c))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return b.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(b,c){return a.isEmpty(b)?c?void 0:[]:this[c?"find":"filter"](function(a){for(var c in b)if(b[c]!==a.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(b){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return b||(b={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,
this)),b.silent||this.trigger("sort",this,b),this},pluck:function(b){return a.invoke(this.models,"get",b)},fetch:function(b){b=b?a.clone(b):{};void 0===b.parse&&(b.parse=!0);var c=b.success,e=this;return b.success=function(a){e[b.reset?"reset":"set"](a,b);c&&c(e,a,b);e.trigger("sync",e,a,b)},D(this,b),this.sync("read",this,b)},create:function(b,c){if(c=c?a.clone(c):{},!(b=this._prepareModel(b,c)))return!1;c.wait||this.add(b,c);var e=this,d=c.success;return c.success=function(a,b){c.wait&&e.add(a,
c);d&&d(a,b,c)},b.save(null,c),b},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,e){if(b instanceof c)return b;e=e?a.clone(e):{};e.collection=this;b=new this.model(b,e);return b.validationError?(this.trigger("invalid",this,b.validationError,e),!1):b},_addReference:function(a){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=this);a.on("all",
this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});a.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(c){h.prototype[c]=function(){var e=b.call(arguments);return e.unshift(this.models),a[c].apply(a,e)}});a.each(["groupBy","countBy","sortBy","indexBy"],function(b){h.prototype[b]=function(c,e){var d=a.isFunction(c)?c:function(a){return a.get(c)};return a[b](this.models,d,e)}});r=d.View=function(b){this.cid=a.uniqueId("view");b||(b={});a.extend(this,a.pick(b,x));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var p=/^(\S+)\s*(.*)$/,x="model collection el id attributes className tagName events".split(" ");
a.extend(r.prototype,w,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof d.$?a:d.$(a),this.el=this.$el[0],!1!==b&&this.delegateEvents(),this},delegateEvents:function(b){if(!b&&!(b=a.result(this,"events")))return this;this.undelegateEvents();for(var c in b){var e=b[c];if(a.isFunction(e)||
(e=this[b[c]]),e){var d=c.match(p),g=d[1];d=d[2];e=a.bind(e,this);g+=".delegateEvents"+this.cid;""===d?this.$el.on(g,e):this.$el.on(g,d,e)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var b=a.extend({},a.result(this,"attributes"));this.id&&(b.id=a.result(this,"id"));this.className&&(b["class"]=a.result(this,"className"));b=d.$("<"+a.result(this,"tagName")+">").attr(b);
this.setElement(b,!1)}}});d.sync=function(b,c,e){var g=F[b];a.defaults(e||(e={}),{emulateHTTP:d.emulateHTTP,emulateJSON:d.emulateJSON});var h={type:g,dataType:"json"};if(e.url||(h.url=a.result(c,"url")||B()),null!=e.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(h.contentType="application/json",h.data=JSON.stringify(e.attrs||c.toJSON(e))),e.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),e.emulateHTTP&&("PUT"===g||"DELETE"===g||"PATCH"===g)){h.type=
"POST";e.emulateJSON&&(h.data._method=g);var f=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",g),f?f.apply(this,arguments):void 0}}"GET"===h.type||e.emulateJSON||(h.processData=!1);"PATCH"===h.type&&q&&(h.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});b=e.xhr=d.ajax(a.extend(h,e));return c.trigger("request",c,b,e),b};var q=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),F={create:"POST",
update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};d.ajax=function(){return d.$.ajax.apply(d.$,arguments)};m=d.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)};var G=/\((.*?)\)/g,H=/(\(\?)?:\w+/g,k=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(m.prototype,w,{initialize:function(){},route:function(b,c,e){a.isRegExp(b)||(b=this._routeToRegExp(b));a.isFunction(c)&&(e=c,c="");e||(e=this[c]);var g=this;return d.history.route(b,
function(a){a=g._extractParameters(b,a);g.execute(e,a);g.trigger.apply(g,["route:"+c].concat(a));g.trigger("route",c,a);d.history.trigger("route",g,c,a)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,b){return d.history.navigate(a,b),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var b,c=a.keys(this.routes);null!=(b=c.pop());)this.route(b,this.routes[b])}},_routeToRegExp:function(a){return a=a.replace(E,"\\$&").replace(G,"(?:$1)?").replace(H,
function(a,b){return b?a:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(b,c){var e=b.exec(c).slice(1);return a.map(e,function(a,b){return b===e.length-1?a||null:a?decodeURIComponent(a):null})}});var z=d.History=function(){this.handlers=[];a.bindAll(this,"checkUrl");"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,N=/msie [\w.]+/,I=/\/$/,C=/#.*$/;z.started=!1;a.extend(z.prototype,
w,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){null==a&&(this._hasPushState||!this._wantsHashChange||b?(a=decodeURI(this.location.pathname+this.location.search),b=this.root.replace(I,""),a.indexOf(b)||(a=a.slice(b.length))):a=this.getHash());return a.replace(K,"")},start:function(b){if(z.started)throw Error("Backbone.history has already been started");
z.started=!0;this.options=a.extend({root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);b=this.getFragment();var c=document.documentMode;c=N.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);if(this.root=("/"+this.root+"/").replace(L,"/"),c&&this._wantsHashChange)this.iframe=d.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(b);this._hasPushState?d.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!c?d.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=b;b=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&
b.hash&&(this.fragment=this.getHash().replace(K,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){d.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);z.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),
a===this.fragment?!1:(this.iframe&&this.navigate(a),this.loadUrl(),void 0)},loadUrl:function(b){return b=this.fragment=this.getFragment(b),a.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0})},navigate:function(a,b){if(!z.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(C,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace);this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});d.history=new z;c.extend=h.extend=m.extend=r.extend=z.extend=function(b,
c){var e=this;var d=b&&a.has(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)};a.extend(d,e,c);c=function(){this.constructor=d};return c.prototype=e.prototype,d.prototype=new c,b&&a.extend(d.prototype,b),d.__super__=e.prototype,d};var B=function(){throw Error('A "url" property or function must be specified');},D=function(a,b){var c=b.error;b.error=function(e){c&&c(a,e,b);a.trigger("error",a,e,b)}};return d});
_wAMD.define("util/platform/elements/PlatformElement",["backbone"],function(f){var d=f.View.prototype;return f.View.extend({initialize:function(){d.initialize.apply(this,arguments)},render:function(){window.inEditor&&window.inEditor()&&require("editor/build/utils").renderPage(window.currentPage)},remove:function(){d.remove.apply(this,arguments)},setElement:function(){d.setElement.apply(this,arguments)},delegateEvents:function(){d.delegateEvents.apply(this,arguments)},undelegateEvents:function(){d.undelegateEvents.apply(this,
arguments)}})});
_wAMD.define("util/platform/elements/PlatformElementSettings",["jquery","backbone"],function(f,d){return d.Model.extend({save:function(a,d,l){var m=this.attributes;if(null==a||"object"==typeof a?(m=a,l=d):(m={})[a]=d,m&&!this.set(m,l))return!1;if(window.inEditor&&window.inEditor())return _W.Editor.RPC.PlatformElementInstance.updateSettings(this.page_element_id,this.toJSON());a=new f.Deferred;return a.resolve({success:!1,message:"You cannot update settings outside of the editor."}),a.promise()}})});
(function(f){f(document).ready(function(){var d=function(){var a=f(".wsite-view-link-full"),d=f(".wsite-view-link-mobile"),m=window.location.href||"";m+=-1<m.indexOf("?")?"&":"?";a.attr("href",m+"view=full");d.attr("href",m+"view=mobile")};d();var a=window.History;a&&a.enabled&&History.Adapter.bind(window,"statechange",d)});f(document).ready(function(){"placeholder"in document.createElement("input")||f(this).find("input[placeholder]").placeholder()})})(Weebly.jQuery);
(function(){var f=window.STYLE_PREFIX||"weebly",d=function(){for(var a=0;a<document.styleSheets.length;a++)try{if(document.styleSheets[a].title==f+"-theme-css"){var d=document.styleSheets[a],m=d.cssRules||d.rules;return m&&0<m.length}}catch(b){}return!1},a=function(a){if(d())a();else var f=setInterval(function(){d()&&(clearInterval(f),a())},200)};window.whenThemeCSSLoaded||(window.whenThemeCSSLoaded=a);window.isThemeCSSLoaded||(window.isThemeCSSLoaded=d)})();_wAMD.define("site/general",function(){});
(function(f){window.blogCommentDisplayForm=function(d,a){var r=f("#"+a),l=r.data("isReplyFormOpen")||!1,m=r.prev(".reply-comment").find("span").first(),b=_W.tl("Cancel Reply");if(!r.data("locked")){r.data("locked",!0);var w=r.data("replyText");w||(w=m.html(),r.data("replyText",w));var e=f("#"+a+" iframe");return e.length||(e=f('<iframe src="'+d+'" frameborder="0" allowtransparency="true" scrolling="no"></iframe>'),f("#"+a+" > div > div").first().append(e)),l?(m.html(w),r.data("isReplyFormOpen",!1),
r.down().hide("slide",{wrapper:r,direction:"up",duration:1E3,complete:function(){r.data("locked",!1)}})):(m.html(b),r.data("isReplyFormOpen",!0),r.down().show("slide",{wrapper:r,direction:"up",duration:1E3,complete:function(){r.data("locked",!1)}})),!1}}})(Weebly.jQuery);_wAMD.define("site/comments",function(){});
(function(f,d){function a(a,b,f){r();b=d(b);var e=b.offset(),c=d('<div class="instructions-container">').html(a);c.click(function(){c.remove()});f.append(c);a=jQuery('<img src="https://www.onegoodmeal.com/images/error_arrow_left.gif">').css({position:"absolute",left:-13,top:c.outerHeight()/2-10});return c.append(a),c.offset({top:e.top+b.outerHeight()/2-c.outerHeight()/2,left:e.left+b.outerWidth()+20}),c}function r(){d(".instructions-container").each(function(a,e){a=d(e);e=a.up("."+m+"-form-field");
b&&e==b||a.remove()})}function l(){d("input[name="+m+"_approved]").val("weebly");d(document).off("mousedown",l).off("keydown",l)}var m=window.STYLE_PREFIX||"weebly",b=null;d(document).ready(function(){if(window.location.href.match(/posted=(.*)$/)){var a=d.parseJSON(decodeURIComponent(window.location.href.match(/posted=(.*)$/)[1].replace(/\+/g," ")));d("form").each(function(b,e){var c=d(e);d.each(a,function(a,b){"object"==typeof b?d.each(b,function(b,e){c.find("input").each(function(c,d){(d.name.replace(/_u\d*/,
"")==a+"["+b+"]"||d.name==a+"["+b+"]")&&("checkbox"===d.type?d.checked=1:d.value=e)})}):c.find("input,textarea,select,button").each(function(d,g){if(g.name.replace(/_u\d*/,"")==a||g.name==a)d=g.name,e[d][0]&&"radio"===e[d][0].type?c.find("radio[name="+d+"]").each(function(a,c){c.value==b&&(c.checked=!0)}):g.value=b})})})}if(window.location.href.match(/form-errors=(.*?)&/)&&window.location.href.match(/ucfid%22%3A%22(.*?)%/)){var b=window.location.href.match(/form\-errors=(.*?)&/)[1].split(","),f=window.location.href.match(/ucfid%22%3A%22(.*?)%/)[1],
l=d("#form-"+f);d.each(b,function(a,b){b=decodeURIComponent(b);l.find("input,textarea,select,button").each(function(a,c){c.name.replace(/_u\d*/,"")!=b&&c.name.replace(/.*_u/,"_u")!=b&&c.name.replace(/\[.*\]$/,"")!=b||d(c).addClass("form-input-error").up("."+m+"-form-field").addClass("form-field-error")})});d("#"+f+"-form-parent").after("<div>Please correct the highlighted fields</div>")}window.location.href.match(/success=1/)&&window.location.href.match(/ucfid=(.*)/)&&(f=window.location.href.match(/ucfid=(.*?)&/)[1],
l=d("#form-"+f),b="Your data was successfully submitted.",(f=window.location.href.match(/text=(.*?)&/))&&(b=decodeURIComponent(f[1].replace(/\+/g," "))),l.html("<div>"+b+"</div>"))}).ready(function(){d("."+m+"-form-instructions").each(function(b,e){var f=d(e);if(f.html()){var l=f.up("."+m+"-form-field"),c=l.down("."+m+"-form-input");c.length||(c=l.down("."+m+"-form-radio-container"));c.length||(c=l.down(".form-select"));c.length||(c=l.down("."+m+"-form-label"));c.up("."+m+"-form-input-container").length&&
c.up("."+m+"-form-input-container").hasClass(m+"-form-left")&&(c=c.up("."+m+"-form-input-container").next("."+m+"-form-right"),c.length||(c=l.find("."+m+"-form-input-container:last")));l.hover(function(){l.find(".instructions-container").length||a(f.html(),c,l)},r)}})}).ready(function(){function a(a){if(a.origin==location.protocol+location.port+"//"+location.hostname||_W.resellerSite&&_W.configDomain&&a.origin==location.protocol+location.port+"//"+_W.configDomain)switch(a=f.evalJSON(a.data),a.action){case "finished":var b=
a.data.ucfid,e=d("#form-"+b);e.hide();var c=d("#"+b+"-msg");return c.length||(c=d('<div id="'+b+'-msg"/>').insertAfter(e)),c.html(a.data.message),c.effect("highlight",{},2E3),d("body").animate({scrollTop:c.offset().top},{easing:"easeOutQuart",duration:2E3}),void 0;case "redirect":return window.location=a.data.location,void 0;case "error":return c=a.data["error-fields"],b=a.data.ucfid,e=d("#form-"+b),e.find("input,textarea,select,button").filter(".form-input-error").each(function(a,b){d(b).removeClass("form-input-error").up("."+
m+"-form-field").removeClass("form-field-error")}),d.each(c,function(a,b){e.find("input,textarea,select,button").each(function(a,c){c.name.replace(/_u\d*/,"")!=b&&c.name.replace(/.*_u/,"_u")!=b&&c.name.replace(/\[.*\]$/,"")!=b||d(c).addClass("form-input-error").up("."+m+"-form-field").addClass("form-field-error")})}),c=d("#"+b+"-msg"),c.length||(c=d('<div id="'+b+'-msg"/>').insertAfter(e)),c.html(a.data.message),void 0}}d("form").each(function(b,f){b=d(f);f=b.attr("action")||"";if(f.match(/formSubmit\.php$/)){1!=
_W.resellerSite?f=f.replace(/(.*)\/formSubmit\.php$/,window.location.protocol+"//"+window.location.host+"/ajax/apps/formSubmitAjax.php"):(f=f.replace("formSubmit.php","formSubmitAjax.php"),d("<input>").attr({type:"hidden",id:"formLocation",name:"formLocation",value:window.location.host}).appendTo(b));b.attr("action",f);b.attr("accept-charset","UTF-8");f=b.attr("id")+"-target-"+Date.now();f=d('<iframe name="'+f+'"/>').hide().attr("id",f).insertAfter(b);var e=f[0];b.attr("target",e.id);window.postMessage||
f.on("load",function(){try{var b=(e.contentDocument||e.contentWindow.document).body.firstChild.nodeValue;"about:blank"!=(e.contentDocument||e.contentWindow.document).location.href&&a({data:b,source:e.contentWindow})}catch(h){}})}});window.postMessage&&d(window).on("message",function(b){try{a(b.originalEvent)}catch(t){}})}).on("mousedown",l).on("keydown",l).on("click",function(a){a=d(a.target);var e=a.up("."+m+"-form-field");a.hasClass(m+"-form-field")&&(e=a);b=e.length?e:null;r()})})(Weebly,Weebly.jQuery);
_wAMD.define("site/form",function(){});(function(f){f(document).ready(function(){f("#wsite-header-search-form").on("click","span.wsite-search-button",function(d){f(d.delegateTarget).submit()}).on("submit",function(){return!window.document.body.className.match(/wsite-page-theme_browser\/preview/)});f("form.wsite-search-element-form").on("click","span.wsite-search-element-submit",function(d){f(d.delegateTarget).submit()}).on("submit",function(){return!window.document.body.className.match(/wsite-page-theme_browser\/preview/)})})})(Weebly.jQuery);
_wAMD.define("site/search",function(){});_wAMD.define("site/core","jquery legacy/jquery.animate legacy/jquery_utils jquery-ui/effect jquery-ui/effect-highlight jquery-ui/effect-fade util/effect-slide-custom util/platform/elements/PlatformElement util/platform/elements/PlatformElementSettings site/general site/comments site/form site/search underscore mustache".split(" "),function(){});
(function(f){if("object"==typeof exports)module.exports=f(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)_wAMD.define("backbone-pageable",["underscore","backbone"],f);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var d=Backbone.PageableCollection,a=f(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=d,a}}})(function(f,d){function a(a,b){if(!f.isNumber(a)||f.isNaN(a)||!f.isFinite(a)||~~a!==a)throw new TypeError("`"+
b+"` must be a finite integer");return a}function r(a){for(var b,c,e={},d=decodeURIComponent,f=a.split("&"),h=0,p=f.length;p>h;h++)b=f[h].split("="),a=b[0],b=b[1]||!0,a=d(a),b=d(b),c=e[a],g(c)?c.push(b):e[a]=c?[c,b]:b;return e}function l(a,b,c){if((a=a._events[b])&&a.length){var e=a[a.length-1],d=e.callback;e.callback=function(){try{d.apply(this,arguments),c()}catch(M){throw M;}finally{e.callback=d}}}else c()}var m=f.extend,b=f.omit,w=f.clone,e=f.each,t=f.pick,u=f.contains,c=f.isEmpty,h=f.pairs,y=
f.invert,g=f.isArray,p=f.isFunction,x=f.isObject,q=f.keys,F=f.isUndefined,G=f.result,H=Math.ceil,k=Math.floor,E=Math.max,z=d.Collection.prototype,K=/[\s'"]/g,L=/[<>\s'"]/g,N=d.PageableCollection=d.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",
1:"desc"}},constructor:function(a,b){z.constructor.apply(this,arguments);b=b||{};var e=this.mode=b.mode||this.mode||I.mode,d=m({},I.queryParams,this.queryParams,b.queryParams||{});d.directions=m({},I.queryParams.directions,this.queryParams.directions,d.directions||{});this.queryParams=d;d=this.state=m({},I.state,this.state,b.state||{});d.currentPage=null==d.currentPage?d.firstPage:d.currentPage;g(a)||(a=a?[a]:[]);"server"==e||null!=d.totalRecords||c(a)||(d.totalRecords=a.length);this.switchMode(e,
m({fetch:!1,resetState:!1,models:a},b));var f=b.comparator;if(d.sortKey&&!f&&this.setSorting(d.sortKey,d.order,b),"server"!=e)e=this.fullCollection,f&&b.full&&(this.comparator=null,e.comparator=f),b.full&&e.sort(),a&&!c(a)&&(this.reset([].slice.call(a),m({silent:!0},b)),this.getPage(d.currentPage),a.splice.apply(a,[0,a.length].concat(this.models)));this._initState=w(this.state)},_makeFullCollection:function(a,b){var c,e=["url","model","sync","comparator"],g=this.constructor.prototype,f={};var h=0;
for(c=e.length;c>h;h++){var p=e[h];F(g[p])||(f[p]=g[p])}a=new (d.Collection.extend(f))(a,b);h=0;for(c=e.length;c>h;h++)p=e[h],this[p]!==g[p]&&(a[p]=this[p]);return a},_makeCollectionEventHandler:function(a,b){return function(c,d,g,f){var h=a._handlers;e(q(h),function(c){var e=h[c];a.off(c,e);b.off(c,e)});var p=w(a.state),k=p.firstPage,y=p.pageSize,x=(0===k?p.currentPage:p.currentPage-1)*y,t=x+y;if("add"==c){var n,r,u;f=f||{};if(g==b){var C=b.indexOf(d);C>=x&&t>C&&(u=a,n=r=C-x)}else n=a.indexOf(d),
C=x+n,u=b,r=F(f.at)?C:f.at+x;if(f.onRemove||(++p.totalRecords,delete f.onRemove),a.state=a._checkState(p),u){u.add(d,m({},f||{},{at:r}));var G=n>=y?d:!F(f.at)&&t>r&&a.length>y?a.at(y):null;G&&l(g,c,function(){a.remove(G,{onAdd:!0})})}}if("remove"==c)if(f.onAdd)delete f.onAdd;else{--p.totalRecords?(y=p.totalPages=H(p.totalRecords/y),p.lastPage=0===k?y-1:y||k,p.currentPage>y&&(p.currentPage=p.lastPage)):(p.totalRecords=null,p.totalPages=null);a.state=a._checkState(p);var B;k=f.index;g==a?((B=b.at(t))&&
l(a,c,function(){a.push(B,{onRemove:!0})}),b.remove(d)):k>=x&&t>k&&((B=b.at(t-1))&&l(a,c,function(){a.push(B,{onRemove:!0})}),a.remove(d))}"reset"==c&&((f=g,g=d,g==a&&null==f.from&&null==f.to)?(p=b.models.slice(0,x),k=b.models.slice(x+a.models.length),b.reset(p.concat(a.models).concat(k),f)):g==b&&((p.totalRecords=b.models.length)||(p.totalRecords=null,p.totalPages=null),"client"==a.mode&&(p.lastPage=p.currentPage=p.firstPage),a.state=a._checkState(p),a.reset(b.models.slice(x,t),m({},f,{parse:!1}))));
"sort"==c&&(f=g,g=d,g===b&&a.reset(b.models.slice(x,t),m({},f,{parse:!1})));e(q(h),function(c){var d=h[c];e([a,b],function(a){a.on(c,d);a=a._events[c]||[];a.unshift(a.pop())})})}},_checkState:function(b){var c=this.mode,e=this.links,d=b.totalRecords,g=b.pageSize,f=b.currentPage,h=b.firstPage;if(null!=d&&null!=g&&null!=f&&null!=h&&("infinite"==c?e:1)){if(d=a(d,"totalRecords"),g=a(g,"pageSize"),f=a(f,"currentPage"),h=a(h,"firstPage"),1>g)throw new RangeError("`pageSize` must be >= 1");if(d=b.totalPages=
H(d/g),0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");if(b.lastPage=0===h?E(0,d-1):d||h,"infinite"==c){if(!e[f+""])throw new RangeError("No link found for page "+f);}else if(h>f||0<d&&(h?f>d:f>=d))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return b},setPageSize:function(c,e){c=a(c,"pageSize");e=e||{first:!1};var d=this.state,g=H(d.totalRecords/c),f=g?E(d.firstPage,k(g*(d.firstPage?d.currentPage:d.currentPage+
1)/d.totalPages)):d.firstPage;return d=this.state=this._checkState(m({},d,{pageSize:c,currentPage:e.first?d.firstPage:f,totalPages:g})),this.getPage(d.currentPage,b(e,["first"]))},switchMode:function(a,c){if(!u(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');c=c||{fetch:!0,resetState:!0};var d=this.state=c.resetState?w(this._initState):this._checkState(m({},this.state));this.mode=a;var g,h=this,p=this.fullCollection,k=this._handlers=
this._handlers||{};if("server"==a||p)"server"==a&&p&&(e(q(k),function(a){g=k[a];h.off(a,g);p.off(a,g)}),delete this._handlers,this._fullComparator=p.comparator,delete this.fullCollection);else{p=this._makeFullCollection(c.models||[],c);p.pageableCollection=this;this.fullCollection=p;var y=this._makeCollectionEventHandler(this,p);e(["add","remove","reset","sort"],function(a){k[a]=g=f.bind(y,{},a);h.on(a,g);p.on(a,g)});p.comparator=this._fullComparator}if("infinite"==a){a=this.links={};var x=d.firstPage,
l=H(d.totalRecords/d.pageSize);x=0===x?E(0,l-1):l||x;for(d=d.firstPage;x>=d;d++)a[d]=this.url}else this.links&&delete this.links;return c.fetch?this.fetch(b(c,"fetch","resetState")):this},hasPrevious:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNext:function(){var a=this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",
a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(e,d){var g=this.mode,f=this.fullCollection;d=d||{fetch:!1};var h=this.state,p=h.firstPage,k=h.currentPage,q=h.lastPage,y=h.pageSize;switch(e){case "first":e=p;break;case "prev":e=k-1;break;case "next":e=k+1;break;case "last":e=q;break;default:e=a(e,"index")}this.state=this._checkState(m({},h,{currentPage:e}));d.from=k;d.to=e;h=(0===p?e:e-1)*y;f=f&&f.length?f.models.slice(h,
h+y):[];return"client"!=g&&("infinite"!=g||c(f))||d.fetch?("infinite"==g&&(d.url=this.links[e]),this.fetch(b(d,"fetch"))):(this.reset(f,b(d,"fetch")),this)},getPageByOffset:function(b,c){if(0>b)throw new RangeError("`offset must be > 0`");b=a(b);b=k(b/this.state.pageSize);return 0!==this.state.firstPage&&b++,b>this.state.lastPage&&(b=this.state.lastPage),this.getPage(b,c)},sync:function(a,b,c){var e=this;if("infinite"==e.mode){var g=c.success,f=e.state.currentPage;c.success=function(a,b,d){var h=
e.links,p=e.parseLinks(a,m({xhr:d},c));p.first&&(h[e.state.firstPage]=p.first);p.prev&&(h[f-1]=p.prev);p.next&&(h[f+1]=p.next);g&&g(a,b,d)}}return(z.sync||d.sync).call(e,a,b,c)},parseLinks:function(a,b){var c={};if(a=b.xhr.getResponseHeader("Link")){var d=["first","prev","next"];e(a.split(","),function(a){a=a.split(";");var b=a[0].replace(L,"");a=a.slice(1);e(a,function(a){var e=a.split("=");a=e[0].replace(K,"");e=e[1].replace(K,"");"rel"==a&&u(d,e)&&(c[e]=b)})})}return c},parse:function(a,b){var c=
this.parseState(a,w(this.queryParams),w(this.state),b);return c&&(this.state=this._checkState(m({},this.state,c))),this.parseRecords(a,b)},parseState:function(a,c,d){if(a&&2===a.length&&x(a[0])&&g(a[1])){var p=w(d),k=a[0];return e(h(b(c,"directions")),function(a){var b=a[0];a=a[1];var c=k[a];F(c)||f.isNull(c)||(p[b]=k[a])}),k.order&&(p.order=1*y(c.directions)[k.order]),p}},parseRecords:function(a){return a&&2===a.length&&x(a[0])&&g(a[1])?a[1]:a},fetch:function(a){a=a||{};var c=this._checkState(this.state),
e=this.mode;"infinite"!=e||a.url||(a.url=this.links[c.currentPage]);var d=a.data||{},g=G(a,"url")||G(this,"url")||"",f=g.indexOf("?");-1!=f&&(m(d,r(g.slice(f+1))),g=g.slice(0,f));a.url=g;a.data=d;var k="client"==this.mode?t(this.queryParams,"sortKey","order"):b(t(this.queryParams,q(I.queryParams)),"directions"),y=h(k),x=w(this);for(g=0;g<y.length;g++){f=y[g];var l=f[0];var u=f[1];u=p(u)?u.call(x):u;null!=c[l]&&null!=u&&(d[u]=c[l])}c.sortKey&&c.order?d[k.order]=this.queryParams.directions[c.order+
""]:c.sortKey||delete d[k.order];c=h(b(this.queryParams,q(I.queryParams)));for(g=0;g<c.length;g++)f=c[g],u=f[1],u=p(u)?u.call(x):u,null!=u&&(d[f[0]]=u);if("server"!=e){var H=this,E=this.fullCollection,Q=a.success;return a.success=function(b,c,d){d=d||{};F(a.silent)?delete d.silent:d.silent=a.silent;var g=b.models;"client"==e?E.reset(g,d):(E.add(g,m({at:E.length},m(d,{parse:!1}))),H.trigger("reset",H,d));Q&&Q(b,c,d)},z.fetch.call(this,m({},a,{silent:!0}))}return z.fetch.call(this,a)},_makeComparator:function(a,
b,c){var e=this.state;return a=a||e.sortKey,b=b||e.order,a&&b?(c||(c=function(a,b){return a.get(b)}),function(e,d){var g;e=c(e,a);d=c(d,a);return 1===b&&(g=e,e=d,d=g),e===d?0:d>e?-1:1}):void 0},setSorting:function(a,b,c){var e=this.state;e.sortKey=a;e.order=b=b||e.order;e=this.fullCollection;var d=!1,g=!1;a||(d=g=!0);var h=this.mode;c=m({side:"client"==h?h:"server",full:!0},c);h=this._makeComparator(a,b,c.sortValue);var p=c.full;c=c.side;return"client"==c?p?(e&&(e.comparator=h),d=!0):(this.comparator=
h,g=!0):"server"!=c||p||(this.comparator=h),d&&(this.comparator=null),g&&e&&(e.comparator=null),this.fetchOptions=f.extend({},this.fetchOptions,{sort:[{property:a,direction:0<b?"ASC":"DESC"}]}),this}}),I=N.prototype;return N});
(function(f){"object"==typeof exports?module.exports=f(require("backbone"),require("underscore")):"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone-validation",["backbone","underscore"],f)})(function(f,d){return f.Validation=function(a){var d={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},l={formatLabel:function(a,b){return u[d.labelFormatter](a,b)},format:function(){var a=Array.prototype.slice.call(arguments);
return a.shift().replace(/\{(\d+)\}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}},m=function(b,c,e){return c=c||{},e=e||"",a.each(b,function(a,d){b.hasOwnProperty(d)&&(!a||"object"!=typeof a||a instanceof Array||a instanceof Date||a instanceof RegExp||a instanceof f.Model||a instanceof f.Collection?c[e+d]=a:m(a,c,e+d+"."))}),c},b=function(){var b=function(b){return a.reduce(a.keys(a.result(b,"validation")||{}),function(a,b){return a[b]=void 0,a},{})},e=function(b,e){b=b.validation?a.result(b,
"validation")[e]||{}:{};return(a.isFunction(b)||a.isString(b))&&(b={fn:b}),a.isArray(b)||(b=[b]),a.reduce(b,function(b,e){return a.each(a.without(a.keys(e),"msg"),function(a){b.push({fn:c[a],val:e[a],msg:e.msg})}),b},[])},g=function(b,d,g,f){return a.reduce(e(b,d),function(e,h){var p=a.extend({},l,c);p=h.fn.call(p,g,d,h.val,b,f);return!1===p||!1===e?!1:p&&!e?a.result(h,"msg")||p:e},"")},f=function(b,c){var e,d={},f=!0,h=a.clone(c);c=m(c);return a.each(c,function(a,c){(e=g(b,c,a,h))&&(d[c]=e,f=!1)}),
{invalidAttrs:d,isValid:f}},x=function(c,e){return{preValidate:function(b,c){var e,d=this,f={};return a.isObject(b)?(a.each(b,function(a,b){(e=d.preValidate(b,a))&&(f[b]=e)}),a.isEmpty(f)?void 0:f):g(this,b,c,a.extend({},this.attributes))},isValid:function(b){var c=m(this.attributes);return a.isString(b)?!g(this,b,c[b],a.extend({},this.attributes)):a.isArray(b)?a.reduce(b,function(b,e){return b&&!g(this,e,c[e],a.extend({},this.attributes))},!0,this):(!0===b&&this.validate(),this.validation?this._isValid:
!0)},validate:function(d,g){var h=this,p=!d,k=a.extend({},e,g);g=b(h);var q=a.extend({},g,h.attributes,d),y=m(d||q),x=f(h,q);return h._isValid=x.isValid,a.each(g,function(a,b){x.invalidAttrs.hasOwnProperty(b)||k.valid(c,b,k.selector)}),a.each(g,function(a,b){a=x.invalidAttrs.hasOwnProperty(b);var e=y.hasOwnProperty(b);a&&(e||p)&&k.invalid(c,b,x.invalidAttrs[b],k.selector)}),a.defer(function(){h.trigger("validated",h._isValid,h,x.invalidAttrs);h.trigger("validated:"+(h._isValid?"valid":"invalid"),
h,x.invalidAttrs)}),!k.forceUpdate&&0<a.intersection(a.keys(x.invalidAttrs),a.keys(y)).length?x.invalidAttrs:void 0}}},q=function(a){delete a.validate;delete a.preValidate;delete a.isValid},t=function(b){a.extend(b,x(this.view,this.options))},u=function(a){q(a)};return{version:"0.9.1",configure:function(b){a.extend(d,b)},bind:function(b,c){c=a.extend({},d,w,c);var e=c.model||b.model,g=c.collection||b.collection;if("undefined"==typeof e&&"undefined"==typeof g)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";
e?a.extend(e,x(b,c)):g&&(g.each(function(e){a.extend(e,x(b,c))}),g.bind("add",t,{view:b,options:c}),g.bind("remove",u))},unbind:function(b,c){c=a.extend({},c);var e=c.model||b.model;b=c.collection||b.collection;e?q(e):b&&(b.each(function(a){q(a)}),b.unbind("add",t),b.unbind("remove",u))},mixin:x(null,d)}}(),w=b.callbacks={valid:function(a,b,c){a.$("["+c+'~="'+b+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(a,b,c,e){a.$("["+e+'~="'+b+'"]').addClass("invalid").attr("data-error",
c)}},e=b.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,
url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,domain:/^(?:[a-zA-Z0-9]+(?:\-*[a-zA-Z0-9])*\.)+[a-zA-Z]{2,6}$/},
t=b.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",
number:"{0} must be a number","int":"{0} must be a whole number",email:"{0} must be a valid email",url:"{0} must be a valid url",domain:"{0} must be a valid domain",inlinePattern:"{0} is invalid"},u=b.labelFormatters={none:function(a){return a},sentenceCase:function(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0===b?a.toUpperCase():" "+a.toLowerCase()}).replace(/_/g," ")},label:function(a,b){return b.labels&&b.labels[a]||u.sentenceCase(a,b)}},c=b.validators=function(){var b=String.prototype.trim?
function(a){return null===a?"":String.prototype.trim.call(a)}:function(a){var b=/^\s+/,c=/\s+$/;return null===a?"":a.toString().replace(b,"").replace(c,"")},c=function(b){return a.isNumber(b)||a.isString(b)&&b.match(e.number)},d=function(c){return!(a.isNull(c)||a.isUndefined(c)||a.isString(c)&&""===b(c)||a.isArray(c)&&a.isEmpty(c))};return{fn:function(b,c,e,d,g){return a.isString(e)&&(e=d[e]),e.call(d,b,c,g)},required:function(b,c,e,g,f){return(e=a.isFunction(e)?e.call(g,b,c,f):e)||d(b)?e&&!d(b)?
this.format(t.required,this.formatLabel(c,g)):void 0:!1},acceptance:function(b,c,e,d){return"true"===b||a.isBoolean(b)&&!1!==b?void 0:this.format(t.acceptance,this.formatLabel(c,d))},min:function(a,b,e,d){return!c(a)||e>a?this.format(t.min,this.formatLabel(b,d),e):void 0},max:function(a,b,e,d){return!c(a)||a>e?this.format(t.max,this.formatLabel(b,d),e):void 0},range:function(a,b,e,d){return!c(a)||a<e[0]||a>e[1]?this.format(t.range,this.formatLabel(b,d),e[0],e[1]):void 0},length:function(b,c,e,d){return a.isString(b)&&
b.length===e?void 0:this.format(t.length,this.formatLabel(c,d),e)},minLength:function(b,c,e,d){return!a.isString(b)||b.length<e?this.format(t.minLength,this.formatLabel(c,d),e):void 0},maxLength:function(b,c,e,d){return!a.isString(b)||b.length>e?this.format(t.maxLength,this.formatLabel(c,d),e):void 0},rangeLength:function(b,c,e,d){return!a.isString(b)||b.length<e[0]||b.length>e[1]?this.format(t.rangeLength,this.formatLabel(c,d),e[0],e[1]):void 0},oneOf:function(b,c,e,d){return a.include(e,b)?void 0:
this.format(t.oneOf,this.formatLabel(c,d),e.join(", "))},equalTo:function(a,b,c,e,d){return a!==d[c]?this.format(t.equalTo,this.formatLabel(b,e),this.formatLabel(c,e)):void 0},pattern:function(a,b,c,g){return d(a)&&a.toString().match(e[c]||c)?void 0:this.format(t[c]||t.inlinePattern,this.formatLabel(b,g),c)},url:function(a,b,c,d){return e.url.test(a)?void 0:this.format(t.url,this.formatLabel(b,d))},domain:function(a,b,c,d){return e.domain.test(a)?void 0:this.format(t.domain,this.formatLabel(b,d))},
email:function(a,b,c,d){return e.email.test(a)?void 0:this.format(t.email,this.formatLabel(b,d))},number:function(a,b,c,e){return isNaN(parseFloat(a))||!isFinite(a)?this.format(t.number,this.formatLabel(b,e)):void 0},"int":function(a,b,c,e){return 0!==a%1?this.format(t.int,this.formatLabel(b,e)):void 0}}}();return a.each(c,function(b,e){c[e]=a.bind(c[e],a.extend({},l,c))}),b}(d),f.Validation});
(function(f,d){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("backbone-relational",["exports","backbone","underscore"],d):"undefined"!=typeof exports?d(exports,require("backbone"),require("underscore")):d(f,f.Backbone,f._)})(this,function(f,d,a){d.Relational={showWarnings:!0};d.Semaphore={_class:"Backbone.Semaphore",_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw Error("Max permits acquired");this._permitsUsed++},
release:function(){if(0===this._permitsUsed)throw Error("All permits released");this._permitsUsed--},isLocked:function(){return 0<this._permitsUsed},setAvailablePermits:function(a){if(this._permitsUsed>a)throw Error("Available permits cannot be less than used permits");this._permitsAvailable=a}};d.BlockingQueue=function(){this._queue=[]};a.extend(d.BlockingQueue.prototype,d.Semaphore,{_class:"Backbone.BlockingQueue",_queue:null,add:function(a){this.isBlocked()?this._queue.push(a):a()},process:function(){var a=
this._queue;for(this._queue=[];a&&a.length;)a.shift()()},block:function(){this.acquire()},unblock:function(){this.release();this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}});d.Relational.eventQueue=new d.BlockingQueue;d.Store=function(){this._collections=[];this._reverseRelations=[];this._orphanRelations=[];this._subModels=[];this._modelScopes=[f]};a.extend(d.Store.prototype,d.Events,{_class:"Backbone.Store",initializeRelation:function(b,e,f){var c=a.isString(e.type)?
d[e.type]||this.getObjectByName(e.type):e.type;c&&c.prototype instanceof d.Relation?new c(b,e,f):d.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",e)},addModelScope:function(a){this._modelScopes.push(a)},removeModelScope:function(b){this._modelScopes=a.without(this._modelScopes,b)},addSubModels:function(a,b){this._subModels.push({superModelType:b,subModels:a})},setupSuperModel:function(b){a.find(this._subModels,function(c){return a.each(c.subModels||
[],function(a,e){a=this.getObjectByName(a);return b===a?(c.superModelType._subModels[e]=b,b._superModel=c.superModelType,b._subModelTypeValue=e,b._subModelTypeAttribute=c.superModelType.prototype.subModelTypeAttribute,!0):void 0},this)},this)},addReverseRelation:function(b){!a.any(this._reverseRelations,function(c){return a.all(b||[],function(a,b){return a===c[b]})})&&b.model&&b.type&&(this._reverseRelations.push(b),this._addRelation(b.model,b),this.retroFitRelation(b))},addOrphanRelation:function(b){!a.any(this._orphanRelations,
function(c){return a.all(b||[],function(a,b){return a===c[b]})})&&b.model&&b.type&&this._orphanRelations.push(b)},processOrphanRelations:function(){a.each(this._orphanRelations.slice(0),function(b){d.Relational.store.getObjectByName(b.relatedModel)&&(this.initializeRelation(null,b),this._orphanRelations=a.without(this._orphanRelations,b))},this)},_addRelation:function(b,e){b.prototype.relations||(b.prototype.relations=[]);b.prototype.relations.push(e);a.each(b._subModels||[],function(a){this._addRelation(a,
e)},this)},retroFitRelation:function(a){var b=this.getCollection(a.model,!1);b&&b.each(function(b){b instanceof a.model&&new a.type(b,a)},this)},getCollection:function(b,e){b instanceof d.RelationalModel&&(b=b.constructor);for(var c=b;c._superModel;)c=c._superModel;b=a.find(this._collections,function(a){return a.model===c});return b||!1===e||(b=this._createCollection(c)),b},getObjectByName:function(b){var c=b.split("."),e=null;return a.find(this._modelScopes,function(b){return e=a.reduce(c||[],function(a,
b){return a?a[b]:void 0},b),e&&e!==b?!0:void 0},this),e},_createCollection:function(a){var b;return a instanceof d.RelationalModel&&(a=a.constructor),a.prototype instanceof d.RelationalModel&&(b=new d.Collection,b.model=a,this._collections.push(b)),b},resolveIdForItem:function(b,e){var c=a.isString(e)||a.isNumber(e)?e:null;return null===c&&(e instanceof d.RelationalModel?c=e.id:a.isObject(e)&&(c=b.prototype._getNewId(e))),c||0===c||(c=null),c},find:function(a,b){b=this.resolveIdForItem(a,b);var c=
this.getCollection(a);return c&&(b=c.get(b),b instanceof a)?b:null},register:function(a){var b=this.getCollection(a);if(b){var c=a.collection;b.add(a);a.collection=c}},checkId:function(a,b){var c=this.getCollection(a);if((b=c&&c.get(b))&&a!==b)throw d.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",b,a),Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!");},update:function(a){var b=
this.getCollection(a);b.contains(a)||this.register(a);b._onModelEvent("change:"+a.idAttribute,a,b);a.trigger("relational:change:id",a,b)},unregister:function(b){var c,e;b instanceof d.Model?(c=this.getCollection(b),e=[b]):b instanceof d.Collection?(c=this.getCollection(b.model),e=a.clone(b.models)):(c=this.getCollection(b),e=a.clone(c.models));a.each(e,function(b){this.stopListening(b);a.invoke(b.getRelations(),"stopListening")},this);a.contains(this._collections,b)?c.reset([]):a.each(e,function(a){c.get(a)?
c.remove(a):c.trigger("relational:remove",a,c)},this)},reset:function(){this.stopListening();a.each(this._collections,function(a){this.unregister(a)},this);this._collections=[];this._subModels=[];this._modelScopes=[f]}});d.Relational.store=new d.Store;d.Relation=function(b,e,f){if(this.instance=b,e=a.isObject(e)?e:{},this.reverseRelation=a.defaults(e.reverseRelation||{},this.options.reverseRelation),this.options=a.defaults(e,this.options,d.Relation.prototype.options),this.reverseRelation.type=a.isString(this.reverseRelation.type)?
d[this.reverseRelation.type]||d.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,!a.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof d.RelationalModel||(this.relatedModel=a.result(this,"relatedModel")),
a.isString(this.relatedModel)&&(this.relatedModel=d.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&d.Relational.store.addReverseRelation(a.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),b))b=this.keySource,b!==this.key&&"object"==typeof this.instance.get(this.key)&&(b=this.key),this.setKeyContents(this.instance.get(b)),
this.relatedCollection=d.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(f),this.options.autoFetch&&this.instance.fetchRelated(this.key,a.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,
"relational:remove",this.removeRelated)};d.Relation.extend=d.Model.extend;a.extend(d.Relation.prototype,d.Events,d.Semaphore,{_class:"Backbone.Relation",options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var b=this.instance,e=this.key,f=this.model,g=this.relatedModel,p=d.Relational.showWarnings&&"undefined"!=typeof console;
return f&&e&&g?f.prototype instanceof d.RelationalModel?g.prototype instanceof d.RelationalModel?this instanceof d.HasMany&&this.reverseRelation.type===d.HasMany?(p&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1):b&&a.keys(b._relations).length&&(f=a.find(b._relations,function(a){return a.key===e},this))?(p&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,e,b,f),!1):!0:(p&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",
this,g),!1):(p&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,b),!1):(p&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,f,e,g),!1)},setRelated:function(a){this.related=a;this.instance.attributes[this.key]=a},_isReverseRelation:function(a){return a.instance instanceof this.relatedModel&&this.reverseRelation.key===a.key&&this.key===a.reverseRelation.key},getReverseRelations:function(b){var c=[];b=a.isUndefined(b)?this.related&&
(this.related.models||[this.related]):[b];return a.each(b||[],function(b){a.each(b.getRelations()||[],function(a){this._isReverseRelation(a)&&c.push(a)},this)},this),c},destroy:function(){this.stopListening();this instanceof d.HasOne?this.setRelated(null):this instanceof d.HasMany&&this.setRelated(this._prepareCollection());a.each(this.getReverseRelations(),function(a){a.removeRelated(this.instance)},this)}});d.HasOne=d.Relation.extend({_class:"Backbone.HasOne",options:{reverseRelation:{type:"HasMany"}},
initialize:function(b){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var c=this.findRelated(b);this.setRelated(c);a.each(this.getReverseRelations(),function(a){a.addRelated(this.instance,b)},this)},findRelated:function(b){var c=null;if(b=a.defaults({parse:this.options.parse},b),this.keyContents instanceof this.relatedModel)c=this.keyContents;else if(this.keyContents||0===this.keyContents)b=a.defaults({create:this.options.createModels},b),c=this.relatedModel.findOrCreate(this.keyContents,
b);return c&&(this.keyId=null),c},setKeyContents:function(a){this.keyContents=a;this.keyId=d.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(b,e,f){if(!this.isLocked()){this.acquire();f=f?a.clone(f):{};var c=a.isUndefined(f.__related);b=c?this.related:f.__related;c&&(this.setKeyContents(e),e=this.findRelated(f),this.setRelated(e));if(b&&this.related!==b&&a.each(this.getReverseRelations(b),function(a){a.removeRelated(this.instance,null,f)},this),a.each(this.getReverseRelations(),
function(a){a.addRelated(this.instance,f)},this),!f.silent&&this.related!==b){var h=this;this.changed=!0;d.Relational.eventQueue.add(function(){h.instance.trigger("change:"+h.key,h.instance,h.related,f,!0);h.changed=!1})}this.release()}},tryAddRelated:function(a,b,e){!this.keyId&&0!==this.keyId||a.id!==this.keyId||(this.addRelated(a,e),this.keyId=null)},addRelated:function(b,e){var c=this;b.queue(function(){if(b!==c.related){var d=c.related||null;c.setRelated(b);c.onChange(c.instance,b,a.defaults({__related:d},
e))}})},removeRelated:function(b,e,d){this.related&&b===this.related&&(e=this.related||null,this.setRelated(null),this.onChange(this.instance,b,a.defaults({__related:e},d)))}});d.HasMany=d.Relation.extend({_class:"Backbone.HasMany",collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:d.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(b){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,
!a.isFunction(this.collectionType)||this.collectionType===d.Collection||this.collectionType.prototype instanceof d.Collection||(this.collectionType=a.result(this,"collectionType")),a.isString(this.collectionType)){var c=this.collectionType;this.collectionType=d.Relational.store.getObjectByName(this.collectionType)}if(this.collectionType||(c&&d.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("`collectionType` of "+c+" not found, using Backbone.Collection in its place."),this.collectionType=
d.Collection),this.collectionType!==d.Collection&&!(this.collectionType.prototype instanceof d.Collection))throw Error("`collectionType` must inherit from Backbone.Collection");b=this.findRelated(b);this.setRelated(b)},_prepareCollection:function(b){(this.related&&this.stopListening(this.related),b&&b instanceof d.Collection)||(b=a.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions,b=new this.collectionType(null,b));if(b.model=this.relatedModel,
this.options.collectionKey){var c=!0===this.options.collectionKey?this.options.reverseRelation.key:this.options.collectionKey;b[c]&&b[c]!==this.instance?d.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,c,this.options.collectionKey):c&&(b[c]=this.instance)}return this.listenTo(b,"relational:add",this.handleAddition).listenTo(b,"relational:remove",this.handleRemoval).listenTo(b,"relational:reset",this.handleReset),
b},findRelated:function(b){var c=null;if(b=a.defaults({parse:this.options.parse},b),this.keyContents instanceof d.Collection)this._prepareCollection(this.keyContents),c=this.keyContents;else{var e=[];a.each(this.keyContents,function(c){(c=c instanceof this.relatedModel?c:this.relatedModel.findOrCreate(c,a.extend({merge:!0},b,{create:this.options.createModels})))&&e.push(c)},this);c=this.related instanceof d.Collection?this.related:this._prepareCollection();c.set(e,a.defaults({merge:!1,parse:!1},b))}return this.keyIds=
a.difference(this.keyIds,a.pluck(c.models,"id")),c},setKeyContents:function(b){this.keyContents=b instanceof d.Collection?b:null;this.keyIds=[];this.keyContents||!b&&0!==b||(this.keyContents=a.isArray(b)?b:[b],a.each(this.keyContents,function(a){((a=d.Relational.store.resolveIdForItem(this.relatedModel,a))||0===a)&&this.keyIds.push(a)},this))},onChange:function(b,e,f){f=f?a.clone(f):{};this.setKeyContents(e);this.changed=!1;b=this.findRelated(f);if(this.setRelated(b),!f.silent){var c=this;d.Relational.eventQueue.add(function(){c.changed&&
(c.instance.trigger("change:"+c.key,c.instance,c.related,f,!0),c.changed=!1)})}},handleAddition:function(b,e,f){f=f?a.clone(f):{};this.changed=!0;a.each(this.getReverseRelations(b),function(a){a.addRelated(this.instance,f)},this);var c=this;!f.silent&&d.Relational.eventQueue.add(function(){c.instance.trigger("add:"+c.key,b,c.related,f)})},handleRemoval:function(b,e,f){f=f?a.clone(f):{};this.changed=!0;a.each(this.getReverseRelations(b),function(a){a.removeRelated(this.instance,null,f)},this);var c=
this;!f.silent&&d.Relational.eventQueue.add(function(){c.instance.trigger("remove:"+c.key,b,c.related,f)})},handleReset:function(b,e){var c=this;e=e?a.clone(e):{};!e.silent&&d.Relational.eventQueue.add(function(){c.instance.trigger("reset:"+c.key,c.related,e)})},tryAddRelated:function(b,e,d){a.contains(this.keyIds,b.id)&&(this.addRelated(b,d),this.keyIds=a.without(this.keyIds,b.id))},addRelated:function(b,e){var c=this;b.queue(function(){c.related&&!c.related.get(b)&&c.related.add(b,a.defaults({parse:!1},
e))})},removeRelated:function(a,b,e){this.related.get(a)&&this.related.remove(a,e)}});d.RelationalModel=d.Model.extend({_class:"Backbone.RelationalModel",relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,keydefs:{},compoundKeyDelim:"-",constructor:function(b,e){if(e&&e.collection){var c=this,g=this.collection=e.collection;delete e.collection;this._deferProcessing=!0;var f=function(a){a===c&&(c._deferProcessing=
!1,c.processQueue(),g.off("relational:add",f))};g.on("relational:add",f);a.defer(function(){f(c)})}d.Relational.store.processOrphanRelations();d.Relational.store.listenTo(this,"relational:unregister",d.Relational.store.unregister);this._queue=new d.BlockingQueue;this._queue.block();d.Relational.eventQueue.block();try{d.Model.apply(this,arguments)}finally{d.Relational.eventQueue.unblock()}this.createSavepoint();this.on("sync",this.createSavepoint,this)},createSavepoint:function(){return this.savepoint=
JSON.parse(JSON.stringify(this)),this},rollback:function(a){a=a||{};this.set(this.savepoint);this.changed=[];a.silent||this.trigger("rollback",this,a)},commit:function(b){b=b||{};var c=this,e=c.isNew(),g=[],f=[];return(e||c.hasChangedDeepSinceSavepoint())&&(e||a.each(c.relations,function(a){a.includeInJSON&&(g.push(a),a.includeInJSON=!1,!a.isAutoRelation)&&(a=c.get(a.key),f.push(a.commit(b)))}),f.push(c.save(null,b)),a.each(g,function(a){a.includeInJSON=!0}),b.silent||c.trigger("commit",c,b)),d.$.when.apply(d.$,
f)},hasChangedDeepSinceSavepoint:function(){return!a.isEqual(this.toJSON(),this.savepoint)},trigger:function(a){if(5<a.length&&0===a.indexOf("change")){var b=this,c=arguments;d.Relational.eventQueue.add(function(){if(b._isInitialized){var e=!0;if("change"===a)e=b.hasChanged()||b._attributeChangeFired,b._attributeChangeFired=!1;else{var f=a.slice(7),h=b.getRelation(f);h?(e=!0===c[4],e?b.changed[f]=c[2]:h.changed||delete b.changed[f]):e&&(b._attributeChangeFired=!0)}e&&d.Model.prototype.trigger.apply(b,
c)}})}else"destroy"===a?(d.Model.prototype.trigger.apply(this,arguments),d.Relational.store.unregister(this)):d.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(b){this.acquire();this._relations={};a.each(this.relations||[],function(a){d.Relational.store.initializeRelation(this,a,b)},this);this._isInitialized=!0;this.release();this.processQueue()},updateRelations:function(b,e){this._isInitialized&&!this.isLocked()&&a.each(this._relations,function(a){if(!b||a.keySource in
b||a.key in b){var c=this.attributes[a.keySource]||this.attributes[a.key],d=b&&(b[a.keySource]||b[a.key]);(a.related!==c||null===c&&null===d)&&this.trigger("relational:change:"+a.key,this,c,e||{})}a.keySource!==a.key&&delete this.attributes[a.keySource]},this)},queue:function(a){this._queue.add(a)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(a){return this._relations[a]},getRelations:function(){return a.values(this._relations)},
fetchRelated:function(b,e,f){e=a.extend({update:!0,remove:!1},e);var c,h,l=[],q=this.getRelation(b),t=q&&(q.keyIds&&q.keyIds.slice(0)||(q.keyId||0===q.keyId?[q.keyId]:[]));if(f&&(c=q.related instanceof d.Collection?q.related.models:[q.related],a.each(c,function(a){(a.id||0===a.id)&&t.push(a.id)})),t&&t.length){var m=[];(c=a.map(t,function(a){var b=q.relatedModel.findModel(a);b||(b={},b[q.relatedModel.prototype.idAttribute]=a,b=q.relatedModel.findOrCreate(b,e),m.push(b));return b},this),q.related instanceof
d.Collection&&a.isFunction(q.related.url)&&(h=q.related.url(c)),h&&h!==q.related.url())?(b=a.defaults({error:function(){var b=arguments;a.each(m,function(a){a.trigger("destroy",a,a.collection,e);e.error&&e.error.apply(a,b)})},url:h},e),l=[q.related.fetch(b)]):l=a.map(c,function(b){var c=a.defaults({error:function(){a.contains(m,b)&&(b.trigger("destroy",b,b.collection,e),e.error&&e.error.apply(b,arguments))}},e);return b.fetch(c)},this)}return l},get:function(b){var c=d.Model.prototype.get.call(this,
b);if(!this.dotNotation||-1===b.indexOf("."))return c;var e=b.split(".");e=a.reduce(e,function(b,c){if(!a.isNull(b)&&!a.isUndefined(b)){if(b instanceof d.Model)return d.Model.prototype.get.call(b,c);if(b instanceof d.Collection)return d.Collection.prototype.at.call(b,c);throw Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+b+", currentSplit: "+c);}},this);if(void 0!==c&&void 0!==e)throw Error("Ambiguous result for '"+b+"'. direct result: "+c+", dotNotation: "+e);
return c||e},_getNewId:function(a){var b,c=this,e=null,d="",f=!1,q=c.keydefs.PRIMARY;return q&&(q.forEach(function(e){(b=a[e]||c.attributes&&c.attributes[e])||0===b?d+=(d?c.compoundKeyDelim:"")+(a[e]||c.attributes&&c.attributes[e]):f=!0}),f||(e=d)),e||(e=a&&c.idAttribute in a&&a[c.idAttribute]),e},set:function(b,e,f){d.Relational.eventQueue.block();var c;a.isObject(b)||null==b?(c=b,f=e):(c={},c[b]=e);try{var h=this.id,l=this._getNewId(c);d.Relational.store.checkId(this,l);var q=d.Model.prototype.set.apply(this,
arguments);l&&(this.id=l);this._isInitialized||this.isLocked()?l&&l!==h&&d.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(l||0===l)&&d.Relational.store.register(this),this.initializeRelations(f));c&&this.updateRelations(c,f)}finally{d.Relational.eventQueue.unblock()}return q},clone:function(){var b=a.clone(this.attributes);return a.isUndefined(b[this.idAttribute])||(b[this.idAttribute]=null),a.each(this.getRelations(),function(a){delete b[a.key]}),new this.constructor(b)},
toJSON:function(b){if(this.isLocked())return this.id;this.acquire();var c=d.Model.prototype.toJSON.call(this,b);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in c||(c[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),a.each(this._relations,function(e){var g=c[e.key],f=e.options.includeInJSON,h=null;!0===f?g&&a.isFunction(g.toJSON)&&(h=g.toJSON(b)):a.isString(f)?(g instanceof d.Collection?h=g.pluck(f):g instanceof d.Model&&(h=g.get(f)),f===
e.relatedModel.prototype.idAttribute&&(e instanceof d.HasMany?h=h.concat(e.keyIds):e instanceof d.HasOne&&(h=h||e.keyId,h||a.isObject(e.keyContents)||(h=e.keyContents||null)))):a.isArray(f)?g instanceof d.Collection?(h=[],g.each(function(b){var c={};a.each(f,function(a){c[a]=b.get(a)});h.push(c)})):g instanceof d.Model&&(h={},a.each(f,function(a){h[a]=g.get(a)})):delete c[e.key];f&&(c[e.keyDestination]=h);e.keyDestination!==e.key&&delete c[e.key]}),this.release(),c}},{setup:function(){return this.prototype.relations=
(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?d.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,a.each(this.prototype.relations||[],function(b){if(b.model||(b.model=this),b.reverseRelation&&b.model===this){var c=!0;a.isString(b.relatedModel)&&(c=(c=d.Relational.store.getObjectByName(b.relatedModel))&&c.prototype instanceof d.RelationalModel);c?d.Relational.store.initializeRelation(null,
b):a.isString(b.relatedModel)&&d.Relational.store.addOrphanRelation(b)}},this),this},build:function(a,b){this.initializeModelHierarchy();return new (this._findSubModelType(this,a)||this)(a,b)},_findSubModelType:function(a,b){if(a._subModels&&a.prototype.subModelTypeAttribute in b){var c=b[a.prototype.subModelTypeAttribute],e=a._subModels[c];if(e)return e;for(c in a._subModels)if(e=this._findSubModelType(a._subModels[c],b))return e}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),
this.prototype.subModelTypes){var b=a.keys(this._subModels);b=a.omit(this.prototype.subModelTypes,b);a.each(b,function(a){(a=d.Relational.store.getObjectByName(a))&&a.initializeModelHierarchy()})}},inheritRelations:function(){if(a.isUndefined(this._superModel)||a.isNull(this._superModel))if(d.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var b=a.filter(this._superModel.prototype.relations||[],function(b){return!a.any(this.prototype.relations||
[],function(a){return b.relatedModel===a.relatedModel&&b.key===a.key},this)},this);this.prototype.relations=b.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(b,e){e||(e={});var c=a.isObject(b)&&e.parse&&this.prototype.parse?this.prototype.parse(a.clone(b)):b,d=this.findModel(c);return a.isObject(b)&&(d&&!1!==e.merge?(delete e.collection,delete e.url,d.set(c,e)):d||!1===e.create||(d=this.build(b,e))),d},find:function(a,b){return b||(b={}),b.create=!1,this.findOrCreate(a,
b)},findModel:function(a){return d.Relational.store.find(this,a)}});a.extend(d.RelationalModel.prototype,d.Semaphore);var r=d.Collection.prototype.__initialize=d.Collection.prototype.initialize;d.Collection.prototype.initialize=function(){r.apply(this,arguments);this.createSavepoint();this.on("sync",this.createSavepoint,this)};d.Collection.prototype.createSavepoint=function(){return this._added=[],this._removed=[],this};d.Collection.prototype.rollback=function(b){return b=b||{},this.add(this._removed,
{silent:!0}),a.each(this.models,function(a){a.rollback()}),this.remove(this._added,{silent:!0}),this.createSavepoint(),b.silent||this.trigger("rollback",this,b),this};d.Collection.prototype.hasChangedDeepSinceSavepoint=function(){return this._removed.length||this._added.length?!0:!!a.find(this.models,function(a){return a.hasChangedDeepSinceSavepoint()})};d.Collection.prototype.commit=function(b){var c=[];return this.hasChangedDeepSinceSavepoint()&&(b=b||{},a.each(this._removed,function(a){c.push(a.destroy())}),
a.each(this.models,function(a){c.push(a.commit())}),this.createSavepoint(),b.silent||this.trigger("commit",this,b)),d.$.when.apply(d.$,c)};d.Collection.prototype._class="Backbone.Collection";d.Collection.prototype.__prepareModel=d.Collection.prototype._prepareModel;d.Collection.prototype._prepareModel=function(b,e){var c;return b instanceof d.Model?(b.collection||(b.collection=this),c=b):(e=e?a.clone(e):{},e.collection=this,c="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(b,e):
new this.model(b,e),c&&c.validationError&&(this.trigger("invalid",this,b,e),c=!1)),c};var l=d.Collection.prototype.__set=d.Collection.prototype.set;d.Collection.prototype.set=function(b,e){if(!(this.model.prototype instanceof d.RelationalModel))return l.apply(this,arguments);e&&e.parse&&(b=this.parse(b,e));var c=!a.isArray(b),g=[],f=[];b=c?b?[b]:[]:a.clone(b);a.each(b,function(a){a instanceof d.Model||(a=d.Collection.prototype._prepareModel.call(this,a,e));a&&(f.push(a),this.get(a)||this.get(a.cid)?
null!=a.id&&(this._byId[a.id]=a):g.push(a))},this);f=c?f.length?f[0]:null:f;c=l.call(this,f,a.defaults({parse:!1},e));return a.each(g,function(a){(this.get(a)||this.get(a.cid))&&this.trigger("relational:add",a,this,e)},this),c};var m=d.Collection.prototype.__get=d.Collection.prototype.get;d.Collection.prototype.get=function(a){if(!(this.model.prototype instanceof d.RelationalModel))return m.apply(this,arguments);if(null!=a){var b=d.Relational.store.resolveIdForItem(this.model,a);return this._byId[null!=
b?b:a.cid||a]}};var b=d.Collection.prototype.__add=d.Collection.prototype.add;d.Collection.prototype.add=function(c,e){if(!(this.model.prototype instanceof d.RelationalModel))return b.apply(this,arguments);var f=b.call(this,c,a.defaults(e||{},{add:!0,merge:!1,remove:!1}));return this._added=this._added.concat(f),f};var w=d.Collection.prototype.__remove=d.Collection.prototype.remove;d.Collection.prototype.remove=function(b,e){if(!(this.model.prototype instanceof d.RelationalModel))return this._removed=
this._removed.concat(b),w.apply(this,arguments);var c=!a.isArray(b),f=[];b=c?b?[b]:[]:a.clone(b);e||(e={});a.each(b,function(a){(a=this.get(a)||a&&this.get(a.cid))&&f.push(a)},this);c=w.call(this,c?f.length?f[0]:null:f,e);return a.each(f,function(a){this.trigger("relational:remove",a,this,e)},this),this._removed=this._removed.concat(f),c};var e=d.Collection.prototype.__reset=d.Collection.prototype.reset;d.Collection.prototype.reset=function(b,f){f=a.extend({merge:!0},f);b=e.call(this,b,f);return this._added=
[],this._removed=[],this.model.prototype instanceof d.RelationalModel&&this.trigger("relational:reset",this,f),this.createSavepoint(),b};var t=d.Collection.prototype.__sort=d.Collection.prototype.sort;d.Collection.prototype.sort=function(a){var b=t.call(this,a);return this.model.prototype instanceof d.RelationalModel&&this.trigger("relational:reset",this,a),b};var u=d.Collection.prototype.__trigger=d.Collection.prototype.trigger;d.Collection.prototype.trigger=function(b){if(!(this.model.prototype instanceof
d.RelationalModel))return u.apply(this,arguments);if("add"===b||"remove"===b||"reset"===b||"sort"===b){var e=this,c=arguments;a.isObject(c[3])&&(c=a.toArray(c),c[3]=a.clone(c[3]));d.Relational.eventQueue.add(function(){u.apply(e,c)})}else u.apply(this,arguments);return this};d.RelationalModel.extend=function(){var a=d.Model.extend.apply(this,arguments);return a.setup(this),a}});
(function(f,d){if("object"==typeof exports){f=require("underscore");var a=require("backbone");module.exports=d(f,a)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone.wreqr",["underscore","backbone"],d)})(this,function(f,d){return d.Wreqr=function(a,d,f){d={};return d.Handlers=function(a,b){var d=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&this.initialize(a)};return d.extend=a.Model.extend,b.extend(d.prototype,a.Events,{setHandlers:function(a){b.each(a,
function(a,e){var c=null;b.isObject(a)&&!b.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(e,a,c)},this)},setHandler:function(a,b,d){this._wreqrHandlers[a]={callback:b,context:d};this.trigger("handler:add",a,b,d)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},
removeAllHandlers:function(){this._wreqrHandlers={}}}),d}(a,f),d.CommandStorage=function(){var d=function(a){this.options=a;this._commands={};f.isFunction(this.initialize)&&this.initialize(a)};return f.extend(d.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,d){this.getCommands(a).instances.push(d)},clearCommands:function(a){this.getCommands(a).instances=[]}}),d}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,
constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var d=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,d)},execute:function(a,d){a=arguments[0];d=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,d):this.storage.addCommand(a,d)},_executeCommands:function(a,d,e){var b=this.storage.getCommands(a);f.each(b.instances,function(a){d.apply(e,a)});this.storage.clearCommands(a)},
_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=f.isFunction(a)?new a:a}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],d=Array.prototype.slice.call(arguments,1);return this.getHandler(a).apply(this,d)}})}(d),d.EventAggregator=function(a,b){var d=function(){};return d.extend=a.Model.extend,b.extend(d.prototype,a.Events),d}(a,f),d}(d,d.Marionette,f),d.Wreqr});
(function(f,d){if("object"==typeof exports){f=require("underscore");var a=require("backbone");module.exports=d(f,a)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone.babysitter",["underscore","backbone"],d)})(this,function(f,d){"option strict";return d.ChildViewContainer=function(a,d){var f=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(f.prototype,{add:function(a,b){var d=a.cid;this._views[d]=
a;a.model&&(this._indexByModel[a.model.cid]=d);b&&(this._indexByCustom[b]=d);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,
function(a,e){return a===b?(delete this._indexByCustom[e],!0):void 0},this);delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});return d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){f.prototype[a]=
function(){var b=[d.values(this._views)].concat(d.toArray(arguments));return d[a].apply(d,b)}}),f}(d,f),d.ChildViewContainer});
(function(f,d){if("object"==typeof exports){f=require("underscore");var a=require("backbone"),r=require("backbone.wreqr"),l=require("backbone.babysitter");module.exports=d(f,a,r,l)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone-marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],d)})(this,function(f,d){return function(a,d,f){function l(a,b){a=Error(a);throw a.name=b||"Error",a;}var b={};d.Marionette=b;b.$=d.$;var r=Array.prototype.slice;return b.extend=
d.Model.extend,b.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]},b.normalizeMethods=function(a){var b,e={};return f.each(a,function(a,d){b=a;f.isFunction(b)||(b=this[b]);b&&(e[d]=b)},this),e},b.triggerMethod=function(){function a(a,b,e){return e.toUpperCase()}var b=/(^|:)(\w)/gi;return function(e){var c=this["on"+e.replace(b,a)];return f.isFunction(this.trigger)&&this.trigger.apply(this,arguments),f.isFunction(c)?c.apply(this,f.tail(arguments)):
void 0}}(),b.MonitorDOMRefresh=function(a){function b(b){b._isShown&&b._isRendered&&a.contains(b.el)&&f.isFunction(b.triggerMethod)&&b.triggerMethod("dom:refresh")}return function(a){a.listenTo(a,"show",function(){a._isShown=!0;b(a)});a.listenTo(a,"render",function(){a._isRendered=!0;b(a)})}}(document.documentElement),function(a){function b(a,b,c,e){e=e.split(/\s+/);f.each(e,function(e){var d=a[e];d||l("Method '"+e+"' was configured as an event handler, but does not exist.");a.listenTo(b,c,d,a)})}
function e(a,b,c,e){a.listenTo(b,c,e,a)}function c(a,b,c,e){e=e.split(/\s+/);f.each(e,function(e){a.stopListening(b,c,a[e],a)})}function d(a,b,c,e){a.stopListening(b,c,e,a)}function m(a,b,c,e,d){b&&c&&(f.isFunction(c)&&(c=c.call(a)),f.each(c,function(c,g){f.isFunction(c)?e(a,b,g,c):d(a,b,g,c)}))}a.bindEntityEvents=function(a,c,d){m(a,c,d,e,b)};a.unbindEntityEvents=function(a,b,e){m(a,b,e,d,c)}}(b),b.Callbacks=function(){this._deferred=b.$.Deferred();this._callbacks=[]},f.extend(b.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(e,c){b&&(e=b);a.call(e,c)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=b.$.Deferred();this._callbacks=[];f.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),b.Controller=function(a){this.triggerMethod=b.triggerMethod;this.options=a||{};f.isFunction(this.initialize)&&this.initialize(this.options)},b.Controller.extend=b.extend,f.extend(b.Controller.prototype,
d.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}}),b.Region=function(a){if(this.options=a||{},this.el=b.getOption(this,"el"),!this.el){var e=Error("An 'el' must be specified for a region.");throw e.name="NoElError",e;}this.initialize&&(e=Array.prototype.slice.apply(arguments),this.initialize.apply(this,e))},f.extend(b.Region,{buildRegion:function(a,b){var e="string"==typeof a,c="string"==typeof a.selector,d="undefined"==typeof a.regionType,t="function"==typeof a;
if(!t&&!e&&!c)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var g,p;e&&(g=a);a.selector&&(g=a.selector,delete a.selector);t&&(p=a);!t&&d&&(p=b);a.regionType&&(p=a.regionType,delete a.regionType);(e||t)&&(a={});a.el=g;b=new p(a);return a.parentEl&&(b.getEl=function(b){var c=a.parentEl;return f.isFunction(c)&&(c=c()),c.find(b)}),b}}),f.extend(b.Region.prototype,d.Events,{show:function(a){this.ensureEl();var e=a.isClosed||f.isUndefined(a.$el),
d=a!==this.currentView;d&&this.close();a.render();(d||e)&&this.open(a);this.currentView=a;b.triggerMethod.call(this,"show",a);b.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return b.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),b.triggerMethod.call(this,"close",a),delete this.currentView)},attachView:function(a){this.currentView=
a},reset:function(){this.close();delete this.$el}}),b.Region.extend=b.extend,b.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={};a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var c={};return f.each(a,function(a,e){"string"==typeof a&&(a={selector:a});a.selector&&(a=f.defaults({},a,b));a=this.addRegion(e,a);c[e]=a},this),c},addRegion:function(b,c){var e,d=f.isObject(c),g=f.isString(c),p=!!c.selector;return e=g||d&&p?a.Region.buildRegion(c,
a.Region):f.isFunction(c)?a.Region.buildRegion(c,a.Region):c,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){f.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){f.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,
b)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=f.size(this._regions)}});return f.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){b.prototype[a]=function(){var b=[f.values(this._regions)].concat(f.toArray(arguments));
return f[a].apply(f,b)}}),b}(b),b.TemplateCache=function(a){this.templateId=a},f.extend(b.TemplateCache,{templateCaches:{},get:function(a){var e=this.templateCaches[a];return e||(e=new b.TemplateCache(a),this.templateCaches[a]=e),e.load()},clear:function(){var a,b=r.call(arguments),d=b.length;if(0<d)for(a=0;d>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),f.extend(b.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);
return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var e=b.$(a).html();return e&&0!==e.length||l("Could not find template: '"+a+"'","NoTemplateError"),e},compileTemplate:function(a){return f.template(a)}}),b.Renderer={render:function(a,d){if(!a)throw a=Error("Cannot render the template since it's false, null or undefined."),a.name="TemplateNotFoundError",a;var e;return e="function"==typeof a?a:b.TemplateCache.get(a),e(d)}},b.View=d.View.extend({constructor:function(a){f.bindAll(this,
"render");var e=Array.prototype.slice.apply(arguments);this.options=f.extend({},f.result(this,"options"),f.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(f.result(this,"events"));d.View.prototype.constructor.apply(this,e);b.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:b.triggerMethod,normalizeMethods:b.normalizeMethods,getTemplate:function(){return b.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var e=b.getOption(this,
"templateHelpers");return f.isFunction(e)&&(e=e.call(this)),f.extend(a,e)},normalizeUIKeys:function(a){return"undefined"!=typeof a?(f.each(f.keys(a),function(b){var e=b.split("@ui.");2===e.length&&(a[e[0]+this.ui[e[1]]]=a[b],delete a[b])},this),a):void 0},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(f.result(this,"triggers"));return f.each(b,function(b,c){var e=f.isObject(b),d=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,f=a.stopPropagation,g=e?b.stopPropagation:
f;(e?b.preventDefault:c)&&c&&c.apply(a);g&&f&&f.apply(a)}this.triggerMethod(d,{view:this,model:this.model,collection:this.collection})}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a);b.bindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.bindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;f.isFunction(a)&&(a=a.call(this));var b={},e=this.configureTriggers();f.extend(b,a,e);d.View.prototype.delegateEvents.call(this,
b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);d.View.prototype.undelegateEvents.apply(this,a);b.unbindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.unbindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||
(this._uiBindings=this.ui);var a=f.result(this,"_uiBindings");this.ui={};f.each(f.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(f.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),b.ItemView=b.View.extend({constructor:function(){b.View.prototype.constructor.apply(this,r.call(arguments))},serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a=
{items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var d=this.getTemplate();a=b.Renderer.render(d,a);return this.$el.html(a),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),b.View.prototype.close.apply(this,
r.call(arguments)),this.triggerMethod("item:closed"))}}),b.CollectionView=b.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage();b.View.prototype.constructor.apply(this,r.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this.appendBuffer(this,
this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(f.each(this._bufferedChildren,function(a){b.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();
var b=this.getItemView(a),e=this.collection.indexOf(a);this.addItemView(a,b,e)},onShowCalled:function(){this.children.each(function(a){b.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),
this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.isEmpty(this.collection)?this.showEmptyView():this.showCollection();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,e){a=this.getItemView(b);this.addItemView(b,a,e)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new d.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&
(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return b.getOption(this,"emptyView")},getItemView:function(){var a=b.getOption(this,"itemView");return a||l("An `itemView` must be specified","NoItemViewError"),a},addItemView:function(a,d,l){var c=b.getOption(this,"itemViewOptions");f.isFunction(c)&&(c=c.call(this,a,l));a=this.buildItemView(a,d,c);return this.addChildViewEventForwarding(a),this.triggerMethod("before:item:added",a),this.children.add(a),this.renderItemView(a,
l),this._isShown&&!this.isBuffering&&b.triggerMethod.call(a,"show"),this.triggerMethod("after:item:added",a),a},addChildViewEventForwarding:function(a){var e=b.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=r.call(arguments),c=d[0],h=this.normalizeMethods(this.getItemEvents());d[0]=e+":"+c;d.splice(1,0,a);"undefined"!=typeof h&&f.isFunction(h[c])&&h[c].apply(this,d);b.triggerMethod.apply(this,d)},this)},getItemEvents:function(){return f.isFunction(this.itemEvents)?this.itemEvents.call(this):
this.itemEvents},renderItemView:function(a,b){a.render();this.appendHtml(this,a,b)},buildItemView:function(a,b,d){a=f.extend({model:a},d);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&
this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new d.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),b.View.prototype.close.apply(this,r.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},
this);this.checkEmpty()}}),b.CompositeView=b.CollectionView.extend({constructor:function(){b.CollectionView.prototype.constructor.apply(this,r.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=b.getOption(this,"itemView")||this.constructor;
return a||l("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&
(this.triggerMethod("composite:collection:before:render"),b.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);var d=this.getTemplate();return b.Renderer.render(d,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):this.getItemViewContainer(a).append(b.el)},
getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var d;(d=b.getOption(a,"itemViewContainer"))?(d=f.isFunction(d)?d.call(this):d,d=a.$(d),0>=d.length&&l("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):d=a.$el;return a.$itemViewContainer=d,d},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),b.Layout=b.ItemView.extend({regionType:b.Region,constructor:function(a){a=
a||{};this._firstRender=!0;this._initializeRegions(a);b.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return b.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);b.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,
b){var d={};return d[a]=b,this._buildRegions(d)[a]},addRegions:function(a){return this.regions=f.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var d=this,e={regionType:b.getOption(this,"regionType"),parentEl:function(){return d.$el}};return this.regionManager.addRegions(a,e)},_initializeRegions:function(a){this._initRegionManager();a=f.isFunction(this.regions)?this.regions(a):this.regions||
{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new b.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}}),b.AppRouter=d.Router.extend({constructor:function(a){d.Router.prototype.constructor.apply(this,
r.call(arguments));this.options=a||{};var e=b.getOption(this,"appRoutes"),f=this._getController();this.processAppRoutes(f,e)},appRoute:function(a,b){var d=this._getController();this._addAppRoute(d,a,b)},processAppRoutes:function(a,b){if(b){var d=f.keys(b).reverse();f.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return b.getOption(this,"controller")},_addAppRoute:function(a,b,d){var c=a[d];if(!c)throw Error("Method '"+d+"' was not found on the controller");this.route(b,
d,f.bind(c,a))}}),b.Application=function(a){this._initRegionManager();this._initCallbacks=new b.Callbacks;this.vent=new d.Wreqr.EventAggregator;this.commands=new d.Wreqr.Commands;this.reqres=new d.Wreqr.RequestResponse;this.submodules={};f.extend(this,a);this.triggerMethod=b.triggerMethod},f.extend(b.Application.prototype,d.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);
return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},
module:function(a,d){var e=b.Module;d&&(e=d.moduleClass||e);var c=r.call(arguments);return c.unshift(this),e.create.apply(e,c)},_initRegionManager:function(){this._regionManager=new b.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),b.Application.extend=b.extend,b.Module=function(a,d,l){this.moduleName=a;this.options=f.extend({},this.options,l);this.initialize=l.initialize||this.initialize;
this.submodules={};this._setupInitializersAndFinalizers();this.app=d;this.startWithParent=!0;this.triggerMethod=b.triggerMethod;f.isFunction(this.initialize)&&this.initialize(this.options,a,d)},b.Module.extend=b.extend,f.extend(b.Module.prototype,d.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(f.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,b.triggerMethod.call(this,"before:stop"),f.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),b.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
l){a&&(l=f.flatten([this,this.app,d,b,b.$,f,l]),a.apply(this,l))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new b.Callbacks;this._finalizerCallbacks=new b.Callbacks}}),f.extend(b.Module,{create:function(a,b,d){var c=a,e=r.call(arguments);e.splice(0,3);b=b.split(".");var l=[];return l[b.length-1]=d,f.each(b,function(b,f){var g=c;c=this._getModule(g,b,a,d);this._addModuleDefinition(g,c,l[f],e)},this),c},_getModule:function(a,d,l,c){var e=b.Module,m=f.extend({},c);c&&(e=c.moduleClass||
e);c=a[d];return c||(c=new e(d,l,m),a[d]=c,a.submodules[d]=c),c},_addModuleDefinition:function(a,b,d,c){var e,l;f.isFunction(d)?(e=d,l=!0):f.isObject(d)?(e=d.define,l="undefined"!=typeof d.startWithParent?d.startWithParent:!0):l=!0;e&&b.addDefinition(e,c);b.startWithParent=b.startWithParent&&l;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),b}(this,d,f),d.Marionette});
_wAMD.define("util/backbone-prevent",["jquery","underscore","backbone"],function(f,d,a){a.preventClose=function(l){var m=this;if(!this.defer){if(this.defer=f.Deferred(),a.preventClose.preventer){var b=a.preventClose.preventer();b&&b.promise?this.defer=b:b?this.defer.resolve():this.defer.reject();this.defer.fail(function(){delete a.preventClose.preventer})}else this.defer.reject();this.defer.always(function(){d.defer(function(){delete m.defer})})}this.defer.fail(function(){l()})};a.preventClose.ifModelChanged=
function(a,m){if(!a.hasChangedDeepSinceSavepoint())return!1;var b=f.Deferred();return m?m(function(){b.reject()},function(){b.resolve()}):d.defer(function(){confirm("Are you sure? You'll lose your current changes.")?b.reject():b.resolve()}),b.promise()};var r=a.View.prototype.constructor;a.View.prototype.constructor=function(){r.apply(this,arguments);this.preventClose&&(a.preventClose.preventer=d.bind(this.preventClose,this))}});
jsonrpc={CallStack:function(f,d,a,r){this._counter=0;this._enterFn=f;this._exitFn=a;this._enterScope=d;this._exitScope=r}};jsonrpc.CallStack.prototype={enter:function(){this._counter=0>this._counter?1:this._counter+1;1===this._counter&&this._enterFn.apply(this._enterScope,arguments)},exit:function(){--this._counter;0===this._counter&&this._exitFn.apply(this._exitScope,arguments)}};jsonrpc.DelayedTask=function(f,d,a){this._fn=f||function(){};this._scope=d||void 0;this._args=a||[];this._id=null};
jsonrpc.Observable=function(){this._listeners=[]};jsonrpc.Observable.prototype={bind:function(f,d){f={fn:f,scope:d||this};return this._listeners.push(f),f},unbind:function(f){f=this._listeners.indexOf(f);-1!==f&&this._listeners.splice(f,1)},trigger:function(){var f;for(f=0;f<this._listeners.length;f+=1)this._listeners[f].fn.apply(this._listeners[f].scope,arguments)}};
jsonrpc.DelayedTask.prototype={delay:function(f,d,a,r){var l=this;this._fn=d||this._fn;this._scope=a||this._scope;this._args=r||this._args;this.cancel();this._id=window.setInterval(function(){window.clearInterval(l._id);l._id=null;l._fn.apply(l._scope,l._args)},f)},cancel:function(){this._id&&(window.clearInterval(this._id),this._id=null)}};
jsonrpc.JsonRpc=function(f){this._url=f;this.loading=new jsonrpc.Observable;this.loaded=new jsonrpc.Observable;this.unhandledFailure=new jsonrpc.Observable;this._loadingState=new jsonrpc.CallStack(this.loading.trigger,this.loading,this.loaded.trigger,this.loaded);this._requests=[];this._batchingMilliseconds=10;this._delayedTask=new jsonrpc.DelayedTask};
jsonrpc.JsonRpc.prototype={setBatchingMilliseconds:function(f){this._batchingMilliseconds=f},call:function(){var f=this._getParams.apply(this,arguments);this._loadingState.enter();f.standalone?this._sendRequests([f]):(this._requests.push(f),this._batchingMilliseconds?this._delayedTask.delay(this._batchingMilliseconds,this._sendRequests,this):this._sendRequests())},_sendRequests:function(f){function d(b,d,e){if(b)b=r._isArray(d)?d:[d];else for(b=[],a=0;a<f.length;a+=1)b[a]={id:a,error:{message:d}};
r._handleResponses(f,b,e)}var a,r=this,l=[],m=[];"undefined"==typeof f&&(f=r._requests,r._requests=[]);for(a=0;a<f.length;a+=1)f[a].request.id=a,f[a].secure?m.push(f[a].request):l.push(f[a].request);0<l.length&&(1===l.length&&(l=l[0]),r._doJsonPost(r._url,l,d));0<m.length&&(1===m.length&&(m=m[0]),r._doJsonpGet(r._url,m,d))},_handleResponses:function(f,d,a){var r;for(r=0;r<d.length;r+=1){var l=d[r];var m=f[l.id];this._handleResponse(m,l,a)}},_handleResponse:function(f,d,a){var r=!d.error;d=r?d.result:
d.error.message;this._loadingState.exit();r?f.success.call(f.scope,d,a):f.failure.call(f.scope,d,a);f.callback.call(f.scope,r,d,a)},_getParams:function(){var f=this,d=Array.prototype.slice.call(arguments),a={request:{jsonrpc:"2.0",method:d.shift()}};for(a.request.params=[];1<d.length&&!this._isFunction(d[0]);)a.request.params.push(d.shift());return this._isFunction(d[0])?(a.success=d[0],a.scope=d[1]):(a.success=d[0].success,a.failure=d[0].failure,a.callback=d[0].callback,a.scope=d[0].scope,a.secure=
!!d[0].secure,a.standalone=!!d[0].standalone),a.success=a.success||function(){},a.failure=a.failure||function(){f.unhandledFailure.trigger.apply(f.unhandledFailure,arguments)},a.callback=a.callback||function(){},a},_isArray:function(f){return"[object Array]"===Object.prototype.toString.apply(f)},_isFunction:function(f){return"[object Function]"===Object.prototype.toString.apply(f)},_beforeSend:function(){},_doJsonPost:function(f,d,a){var r=Weebly.jQuery.ajax({type:"POST",url:f,cache:!1,contentType:"application/json; charset=UTF-8",
dataType:"json",beforeSend:this._beforeSend,data:JSON.stringify(d),headers:{"x-wtok":Weebly.RequestToken}}).done(function(d){var f=r.getResponseHeader("Content-Type");200!==r.status?a(!1,'Expected HTTP response "200 OK", found "'+r.status+" "+r.statusText+'"',r):0!==f.indexOf("application/json")?a(!1,'Expected JSON encoded response, found "'+f+'"',r):a(!0,d,r)})},_doJsonpGet:function(f,d,a){f="https://"+_W.securePrefix+f;Weebly.jQuery.ajax({type:"GET",url:f,cache:!1,jsonpCallback:"WJsonp",dataType:"jsonp",
beforeSend:this._beforeSend,data:d,headers:{"x-wtok":Weebly.RequestToken}}).done(function(d){a(!0,d)})}};_wAMD.define("vendor/jsonrpc",function(){});
(function(f,d){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/backbone-rpc",["underscore","backbone"],d):d(f._,f.Backbone)})(this,function(f,d){var a=d.sync;f.extend(d,{sync:function(r,l,m){if(!l.rpc)return a.apply(d,arguments);switch(r){case "delete":r="destroy";case "create":case "update":case "patch":var b=m.attrs||l.toJSON(m);break;case "read":if(l.rpc&&"read"==r){m=f.extend({},f.omit(m,"data"),m.data);b=f.extend({filter:[]},m);var w=l.keydefs||l.model.prototype.keydefs;
if(w.PRIMARY)for(var e=0;e<w.PRIMARY.length;e++){var t=w.PRIMARY[e];void 0==l.get(t)||f.findWhere(b.filter,{property:t})||b.filter.push({property:t,value:l.get(t)})}}break;default:console.warn(r+" params not defined for this model ",l),b=m.attrs||l.toJSON()}if(l.rpc[r])return b=l.rpc[r](b),b.done(function(a){return!1===a.success?m.error(a):m.success(a)}),b.fail(function(a){return m.error(a)}),b;console.warn(r+" not defined for this model ",l)}})});
(function(){Weebly.setup_rpc=function(f){var d=Weebly.ns(f.namespace),a=new jsonrpc.JsonRpc(f.url),r=function(b,d,c,e,f){return function(){var e=Array.prototype.slice.call(arguments);if(e.length<d)return console.error("Wrong number of args for "+b),void 0;c=!!c;e.unshift(b);var h=Weebly.jQuery.Deferred();return e.push({success:h.resolve,failure:h.reject,scope:h,secure:c,standalone:f}),a.call.apply(a,e),h}},l;for(l in f.actions)if(f.actions.hasOwnProperty(l))for(var m=Weebly.ns(l,d),b=f.actions[l]||
[],w=0;w<b.length;w++){var e=b[w];m[e.name]=r(l+"::"+e.name,e.len,e.secure,e.multiple,e.standalone)}};Weebly.setup_model_rpc=function(f){var d=Weebly.ns(f.rpc_namespace),a=Weebly.ns(f.model_namespace),r=Weebly.ns(f.collection_namespace),l=Weebly.ns(f.bootstrap_namespace);_.extend(a,f.models);_.extend(r,f.collections);_.extend(l,f.bootstrap);for(var m in r)d[m]&&(r[m].rpc=d[m]);for(m in a)if(d[m]&&(a[m].rpc=d[m],f=a[m].relations))for(l=0;l<f.length;l++){var b=f[l];r[b.relatedModel]&&(b.collectionType=
b.relatedModel+"Collection")}}})();_wAMD.define("backbone-all","backbone backbone-pageable backbone-validation backbone-relational backbone-marionette util/backbone-prevent util/backbone-rpc".split(" "),function(f){var d={},a=f.RelationalModel.extend;return f.Relational.store.addModelScope(d),f.RelationalModel.extend=function(f){var l=a.apply(this,arguments),m=f._class;return m&&(m=m.split("."),m=m[m.length-1],d[m]=l),l},f});
_wAMD.define("site/app",["backbone-all"],function(f){f=new f.Marionette.Application;return f.addRegions({contentRegion:"#wsite-content"}),f});
(function(f){function d(a){var b=a.closest("."+N);return b.length?b:a.parent()}function a(a){var b=a.find("."+C);return b.length?b:a.find("a")}function r(a){var b=a.find("."+I);return b.length?b:a.find("li")}function l(a){var b=a.closest("."+B);return b.length?b:a.parent()}function m(a){var b=a.find("."+n);return b.length?b:a.find("li")}function b(a){var b=a.find("."+A);return b.length?b:a.find("a")}function w(c,d,e,h){if(window.navFlyoutMenu){var q=window.currentPage||k,l=window.navFlyoutMenu.getMainList(),
x=l.children(),m=f("body").find("#"+ja),n=f("body").find("#"+O),t=h&&h.hasCustomMembership,G=h&&h.hasCustomMinicart;h=x.filter(function(){return!!f(this).find("#"+O).length});h.length||(h=void 0);var y,w,v=window.getCartCount(),z=window.location.host,E=window.location.pathname,H=window._W.tl("Cart")+" (<span id='"+W+"'></span>)";void 0===window.initCommerceModels||-1<z.indexOf(".checkout.onegoodmeal.com")||-1<z.indexOf(".checkout.editmysite.com")||-1<E.indexOf("store/checkout")||"object"==typeof Weebly&&
Weebly.EDITOR&&!onegoodmeal.comMERCE_ENABLED||"object"!=typeof Weebly||!onegoodmeal.commerce||"boolean"!=typeof onegoodmeal.commerce.hasCart||"object"==typeof Weebly&&onegoodmeal.commerce&&!1===onegoodmeal.commerce.hasCart?h&&(h.remove(),x=l.children(),window.navFlyoutMenu.writeOrderingClassNames()):(h||(h=d.clone(!0,!0),G?n.html(H):h.find(":contains({{title}})").last().html(function(a,b){return b.replace("{{title}}",H)}),y=G?n:a(h),y.attr("id",O).css("position","relative"),window.inEditor&&window.inEditor()&&
(w=require("config"),w.chromeless||(y=G?n.parent():r(h),y.attr("data-content",window._W.tl("The shopping cart is only visible on your published site.")).popover({trigger:"hover",placement:"bottom",container:"body",delay:{show:500,hide:100}}))),y=G?n.parent():u(h),y.addClass(V).css("position","relative"),F=G?n:h,window.reportCartNavElement(),G||(l.append(h),x=l.children(),window.navFlyoutMenu.writeOrderingClassNames())),f("#"+W).text(v));var Q;h&&G?Q=null:h&&(Q=u(h));n=x.filter(function(){return!!f(this).find("#"+
ja).length});n.length||(n=void 0);y=Weebly.allowMemberRegistration?window._W.tl("Log In | Register"):window._W.tl("Log In");w=window.inEditor&&window.inEditor()&&(window._W.PageManager&&window._W.PageManager.membershipRequired()||Weebly.allowMemberRegistration||0<Weebly.memberCount||0<Weebly.groupCount)&&Weebly.showMemberLoginLink;v=window._W&&_W.showLogin;if(!w&&!v||n?w||v||!n||(n.remove(),x=l.children(),window.navFlyoutMenu.writeOrderingClassNames()):(n=d.clone(!0,!0),n.find(":contains({{title}})").last().html(function(a,
b){return b.replace("{{title}}","")}),window.inEditor&&window.inEditor()?n.attr("id","pgmember-login"):n.attr("id","member-login"),a(n).attr("id",ja),t||(h&&!G?n.insertBefore(h):l.append(n)),x=l.children(),window.navFlyoutMenu.writeOrderingClassNames()),window.inEditor&&window.inEditor()&&n)w=require("config"),v=a(n),v=m.length?m:v,v.text(y),w.chromeless||v.attr("data-content",window._W.tl("Membership Log In only works on your published site.")).popover({trigger:"hover",placement:"bottom",container:"body",
delay:{show:500,hide:100}});if(!window.DISABLE_NAV_MORE){w=d.clone(!0,!0);w.find(":contains({{title}})").last().html(function(a,b){return b.replace("{{title}}",window._W.tl("more..."))});x=x.filter(function(){return!!f(this).find("#"+P).length});x.length||(x=void 0);d=!1;x&&(x.hide(),d=!0);var T;d&&((T=u(x),T[0]._flyoutmenu_destroy)?T=T[0]._flyoutmenu_destroy(!0):(d=r(T)[0],d._flyoutmenu_destroy&&(T=d._flyoutmenu_destroy(!0))));var A,C,D=[];v=[];y=!1;m=null;for(d=0;d<c.length;d++)(z=p(c[d].id))&&
(z.show(),D.push(z));h&&D.push(h);n&&D.push(n);for(d=0;d<D.length;d++){z=D[d];z=u(z);E=g(z);if(d)if(1==d)(A=Math.abs(E[0].top-v[0][0].top)>Math.abs(E[0].left-v[0][0].left))&&(C=z.closest(".wsite-nav-vertical"),C.length&&(m=C.offset().top+(parseInt(C.css("padding-top"),10)||0)+C.height()));else if(A){if(null!==m&&E[1].top>m){y=!0;break}}else if(5<Math.abs(E[0].top-v[d-1][0].top)){y=!0;break}v.push(E)}var Y,I;C=[];if(y){x?x.show():(x=w,a(x).attr("id",P).css("position","relative").on("click",!1),n&&
!t?x.insertBefore(n):h&&!G?x.insertBefore(h):l.append(x));l=u(x).addClass(X).css("position","relative");G=u(D[0]);d=null;n&&!t&&(d=u(n));t=Q||d||l;Q=D.length-1;h&&Q--;n&&Q--;for(d=Q;0<=d;d--){h=g(G);Q=g(t);if(!(A&&Q[1].top>m||!A&&5<Math.abs(h[0].top-Q[0].top)))break;D[d].hide();C.unshift(d)}if(0===C.length)x.remove();else if(C.length==c.length){for(d=0;d<C.length;d++)p(c[C[d]].id).show();x.remove()}else{var J;h=[];for(t=0;t<C.length;t++)A=c[C[t]],Weebly.PageManager&&Weebly.PageManager.pages?A=Weebly.PageManager.pages[A.id]:
(A=f.extend({},A),A.title_html=A.title,A.membership_required=A["membership-required"],J=u(p(A.id))[0]._get_sublist(),!J&&T&&(J=!!T.find("#"+L+A.id+" ."+B).length),J&&(A.has_children=!0,A.children=!1)),h.push(A);var U;e?(U=(window.require||window._wAMD.require)("mustache").render(e["navigation/flyout/list"]||e["menu/submenu-main"],{children:h},e),U=f(U)):U=require("editor/build/themes/rendering").renderSubmenu(h);b(U).each(function(){var b=f(this).closest("[id]"),d=b.attr("id");if(d){d=d.replace(/[^\d]/g,
"");var e;if(f.each(c,function(){return this.id===d?(e=this,!1):void 0}),e){if(b.is("span."+K)&&(b=b.children(),b.unwrap()),Y=L+e.id,b.attr("id",Y),Y.replace(/[^\d]/g,"")==q&&b.addClass(M),I=a(b),!e.onclick){var g=e.url;if(window.IS_ARCHIVE||g.match(/^http:\/\//))I.attr("href",g);else{var k=f(f.map(D,function(a){return a.get()})),h=a(k.filter("[id*="+d+"]"));k=h.attr("href");h=h.data("membership-required");k?I.attr("href",k):I.attr("href","/"+g);"number"==typeof h&&I.attr("data-membership-required",
""+h)}e.target&&I.attr("target",e.target)}g=u(p(e.id))[0]._flyoutmenu_destroy();!g&&T&&(g=T.find("#"+L+e.id).find("."+B).first(),g.length||(g=void 0));g&&b.find("."+B).first().replaceWith(g)}}});l.append(U);window.navFlyoutMenu.addItem(l)}}if(T)for(d=0;d<C[0];d++)A=c[d],e=p(A.id),J=T.find("#"+L+A.id+" ."+B+":first"),J.length&&(e[0]._flyoutmenu_destroy&&e[0]._flyoutmenu_destroy(),e.append(J),window.navFlyoutMenu.addItem(e));window.navFlyoutMenu.writeOrderingClassNames()}}}function e(a,b,c){var d=a.closest("."+
N);d.length||(d=a.parent(),d.hasClass(K)&&(d=d.parent()));c=t(d,b,c);return 2<=c.length&&(b=c.eq(0).offset(),c=c.eq(1).offset(),b=Math.abs(b.left-c.left)-Math.abs(b.top-c.top),0!==b)?0>b:!!a.closest("."+D).length}function t(a,b,c){var d=a.find("."+I);if(d.length)return d;var e=[];return a.children().each(function(a,d){a=f(d);if(!b||a.hasClass(K)||a.hasClass(X)||d.id.match(/^pg/)||c&&d.id==c)d=u(a),d.length&&e.push(d[0])}),f(e)}function u(a){if(a.hasClass(K)){var b=a.find("."+I).first();a=b.length?
b:a.children().first()}return a.hasClass(N)?void 0:a}function c(a){return r(a).add(m(a))}function h(a){var b=a.closest("."+K).siblings().find("."+I+":first-child");return b.length?b:a.parent().hasClass(K)?a.parent().siblings().children(":first-child"):a.siblings()}function y(a){var b=a.find("."+D).first();if(b.length||(b=a.closest("."+n+", ."+I).find("."+D).first(),b.length))return b;(b=a.find("ul").first(),b.length)||(a=a.next(),a.hasClass(N)&&(b=a.children().first()));return b.length?b:void 0}function g(a){var b=
a.is("a")?a:a.find("a"),c=a.offset();a={top:c.top+a[0].offsetHeight,left:c.left+a[0].offsetWidth};if(!b)return[c,a];var d,e,f=b.offset();b={top:f.top+b[0].offsetHeight,left:f.left+b[0].offsetWidth};return 10>Math.abs(c.left-a.left)?(d=f,e=b):(d={top:Math.min(c.top,f.top),left:Math.min(c.left,f.left)},e={top:Math.max(a.top,b.top),left:Math.max(a.left,b.left)}),[d,e]}function p(a){a=f("#pg"+a);return!a.length&&H&&(a=f("#"+H)),a.length?a:void 0}function x(){if(window.inEditor&&window.inEditor()){for(var a=
0;a<document.styleSheets.length;a++)try{if(document.styleSheets[a].title==z+"-theme-css"){var b=document.styleSheets[a],c=b.cssRules||b.rules;return c&&0<c.length}}catch(va){}return!1}return!0}function q(a){if(x())a();else var b=setInterval(function(){x()&&(clearInterval(b),a())},200)}window.getCartCount=function(){return window.inEditor&&window.inEditor()?0:"-"};var F=null;window.getCartNavElement=function(){return F};window.reportCartNavElement=function(){};var G,H,k,E,z=window.STYLE_PREFIX||"weebly",
K=z+"-nav-handle",L=z+"-nav-",N=z+"-menu-default",I=z+"-menu-item-wrap",C=z+"-menu-item",B=z+"-menu-wrap",D=z+"-menu",n=z+"-menu-subitem-wrap",A=z+"-menu-subitem",M=z+"-nav-current",J=z+"-menus",P=z+"-nav-more-a",X=z+"-nav-more",O=z+"-nav-cart-a",V=z+"-nav-cart",W=z+"-nav-cart-num",ja=z+"-nav-login-a";if(window.initPublishedFlyoutMenus=function(a,b,c,e,g,h,l){if(k=b,c instanceof f||(c=f(c)),h&&(E=h),0<a.length)b=function(){H=e;var b=f("<div>",{id:J}).appendTo("body"),g=p(a[0].id);g&&(window.navFlyoutMenu=
new window.FlyoutMenu(d(g),{relocate:b,aLiId:e}),w(a,c,E,l))},g?b():q(b);window.refreshPublishedFlyoutMenus=function(){w(a,c,E,l)};f(".wsite-logo img").on("load",window.refreshPublishedFlyoutMenus);f(window).on("load",window.refreshPublishedFlyoutMenus)},window.flyoutMenusRefreshable=!0,window.initEditorFlyoutMenus=function(a){q(function(){function b(){var b=Weebly.PageManager.getTopLevelSummary();if(0<b.length){var c=p(b[0].id);c?(c=d(c),c.is("table,tbody,thead,tr")?window.navFlyoutMenu=null:(window.navFlyoutMenu=
new window.FlyoutMenu(c,{relocate:"#"+J}),G=window.renderItem({title:"{{title}}"},!1,window.currentNormalItem),G.is("."+K)||(G=G.wrapAll('<span class="'+K+'">').parent()),_W.refreshNavOptions=a,w(b,G,null,a))):window.navFlyoutMenu=null}else window.navFlyoutMenu=null}if(f.browser.webkit){var c=f("#icontent span."+K);c.hide();setTimeout(function(){c.show();b()},0)}else b()})},window.refreshNavCondense=function(){!window.navFlyoutMenu||Weebly.view&&Weebly.view.isMobileView||w(Weebly.PageManager.getTopLevelSummary(),
G,null,_W.refreshNavOptions)},window.inEditor&&window.inEditor())require("editor/app").vent.on({"settings:membership:registration:change":function(){window.refreshNavCondense()},"settings:membership:memberCount:change":function(){window.refreshNavCondense()},"settings:membership:groupCount:change":function(){window.refreshNavCondense()}});else(window.addEventListener||window.attachEvent)&&(window.addEventListener?window.addEventListener:window.attachEvent)("inEditor",function(){require("editor/app").vent.on({"settings:membership:registration:change":function(){window.refreshNavCondense()},
"settings:membership:memberCount:change":function(){window.refreshNavCondense()},"settings:membership:groupCount:change":function(){window.refreshNavCondense()}})});window.disableFlyouts=!1;window.FlyoutMenu=function(d,k){function p(c){function d(a){n&&E&&a.preventDefault()}function p(){return window.disableFlyouts?!1:(x.mouseoverItems.push(c),B++,A=!0,H||E||z&&(c.data("hasChildren",!0),h(c).each(function(a,b){b._flyoutmenu_contract&&b._flyoutmenu_contract()}),F(),c.data("isExpanded",!0)),void 0)}
function q(){if(window.disableFlyouts)return!1;if(A=!1,H){var a=B;setTimeout(function(){B==a&&H&&!E&&(w(),c.data("isExpanded",!1))},r)}}function t(){return window.disableFlyouts?!1:(B++,void 0)}function F(){E=!0;var a={wrapper:u,duration:300,complete:function(){if(E=!1,H=!0,A?(c[0]._flyoutmenu_contract=w,c[0]._flyoutmenu_hide=function(){A=H=E=!1;c[0]._flyoutmenu_contract=null;c[0]._flyoutmenu_hide=null;u.hide()}):w(),window.inEditor&&window.inEditor()){var a=f(this),b=a.offset();require("tablet/api/external").navShown({top:b.top,
left:b.left,width:a.outerWidth(),height:a.outerHeight()})}}},b=g(c);u.css("left",-1E4);u.show();var d=u.offsetParent(),h=d.is("body")?{top:0,left:0}:d.offset();u.hide();z.show();if(e(c,!0,k.aLiId)){C=!1;u.css("top",-h.top+b[0].top);var p=u.outerWidth();b[1].left+p>f("body").outerWidth()?(D=!1,u.css("left",-h.left+b[0].left-p),a.direction="right",z.show("slide",a)):(D=!0,u.css("left",-h.left+b[1].left),a.direction="left",z.show("slide",a))}else C=!0,u.css("top",-h.top+b[1].top),p=u.outerWidth(),d=
u.outerHeight(),b[0].left+p>f("body").outerWidth()?u.css("left",-h.left+b[1].left-p):u.css("left",-h.left+b[0].left),0<c.parentsUntil("body, #icontent").filter(function(){return"fixed"===f(this).css("position")}).length?(h=f(window),h=h.height()+h.scrollTop()):h=window.inEditor?f("#icontent").height():f(document).height(),p=parseInt(u.css("top"),10)-d-c.outerHeight(),b[1].top+d>h&&0<p?(u.css("top",p+"px"),a.direction="down",L=!0):(a.direction="up",L=!1),z.show("slide",a)}function w(a){!window.disableFlyouts&&
c.parent().length&&(a&&(A=!1),E=!0,c[0]._flyoutmenu_contract=null,c[0]._flyoutmenu_hide=null,a={wrapper:u,duration:300,complete:function(){H=E=!1;A&&F();window.inEditor&&window.inEditor()&&require("tablet/api/external").navHidden()}},C?(a.direction=L?"down":"up",z.hide("slide",a)):D?(a.direction="left",z.hide("slide",a)):(a.direction="right",z.hide("slide",a)))}c.css("position","relative");a(c).add(b(c)).css("position","relative");var u,z,E=!1,H=!1,A=!1,B=0,C=!1,D=!1,L=!1;(z=y(c))&&(u=l(z),u.css("position",
"absolute"),u.hide(),G?(u.on("mouseover",p),u.on("mouseout",q),u.on("click",function(a){d(a)})):(u.on("mouseover",t),u.on("click",function(a){d(a)})));c.on("mouseover",p);c.on("mouseout",q);c.on("click",function(a){d(a)});c[0]._flyoutmenu_destroy=function(a){if(c.off("mouseover",p),c.off("mouseout",q),c.off("click",d),u)return G?(u.off("mouseover",p),u.off("mouseout",q),u.off("click",d)):(u.off("mouseover",t),u.off("click",d)),m(u).each(function(){this._flyoutmenu_destroy()}),a&&u.detach(),a=u,u=
null,z=null,a};c[0]._get_sublist=function(){return z}}function q(){var a=1;t(d).each(function(){this.className=this.className.replace(new RegExp(L+"\\d+"),"");var b=f(this);"none"!=b.css("display")&&(b.addClass(L+a),a++)})}var x=this;x.mouseoverItems=[];d=f(d);k=k||{};var n="ontouchstart"in window,r=1E3*(k.delay||.5),G=k.relocate?f(k.relocate):!1;this.contract=function(){F.each(function(a,b){b._flyoutmenu_contract&&b._flyoutmenu_contract(!0)})};this.hideSubmenus=function(){F.each(function(a,b){b._flyoutmenu_hide&&
b._flyoutmenu_hide()})};this.destroy=function(){F.each(function(a,b){b._flyoutmenu_destroy&&b._flyoutmenu_destroy()})};this.addItem=function(a){a=f(a);a=u(a);if(a.length){p(a);var b=y(a);b&&m(b).each(function(){p(f(this))});G&&b&&G.append(l(b));F=F.add(a);q()}};this.removeItem=function(a){a=f(a);a=u(a);a.length&&(a[0]._flyoutmenu_destroy&&a[0]._flyoutmenu_destroy(!0),a.remove(),F=F.not(a),q())};this.getMainList=function(){return d};this.writeOrderingClassNames=q;var F=c(d);F.each(function(){p(f(this))});
q();G&&t(d).each(function(a,b){(a=y(f(b)))&&G.append(l(a))})};window.whenThemeCSSLoaded||(window.whenThemeCSSLoaded=q);Weebly.Menus={inVerticalList:e,updateMenu:function(){window.refreshNavCondense()}}})(Weebly.jQuery);_wAMD.define("legacy/flyout_menus_jq",["util/effect-slide-custom"],function(){});
(function(f){f(document).ready(function(){f("a[rel=lightbox]").removeAttr("rel").add('a[rel^="lightbox["]').addClass("w-fancybox");f.fn.fancybox&&(f(".w-fancybox").fancybox({prevEffect:"none",nextEffect:"none",padding:10,helpers:{title:{type:"inside"},thumbs:{width:50,height:50}}}),window.lightboxLoaded=!0)})})(Weebly.jQuery);_wAMD.define("site/fancybox",function(){});
(function(f,d,a,r){var l=a(f),m=a(d),b=a.fancybox=function(){b.open.apply(this,arguments)},w=null,e=d.createTouch!==r,t=function(b){return b&&b.hasOwnProperty&&b instanceof a},u=function(b){return b&&"string"===a.type(b)},c=function(a){return u(a)&&0<a.indexOf("%")},h=function(a,d){var e=parseInt(a,10);return d&&c(a)&&(e*=b.getViewport()[d]/100),Math.ceil(e)},y=function(a,b){return h(a,b)+"px"};a.extend(b,{version:"2.1.0",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,
maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!e,autoCenter:!e,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},
prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"'+
(a.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",
openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{closeClick:!0,speedOut:200,showEarly:!0,css:{}},title:{type:"float"}},onCancel:a.noop,beforeLoad:a.noop,afterLoad:a.noop,beforeShow:a.noop,afterShow:a.noop,beforeChange:a.noop,beforeClose:a.noop,afterClose:a.noop},
group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(c,d){return c&&(a.isPlainObject(d)||(d={}),!1!==b.close(!0))?(a.isArray(c)||(c=t(c)?a(c).get():[c]),a.each(c,function(e,f){var g,h,p,k,q={};"object"===a.type(f)&&(f.nodeType&&(f=a(f)),t(f)?(q={href:f.attr("href"),title:f.attr("title"),isDom:!0,element:f},a.metadata&&
a.extend(!0,q,f.metadata())):q=f);var l=d.href||q.href||(u(f)?f:null);var x=d.title!==r?d.title:q.title||"";var m=(g=d.content||q.content)?"html":d.type||q.type;!m&&q.isDom&&(m=f.data("fancybox-type"),m||(h=f.prop("class").match(/fancybox\.(\w+)/),m=h?h[1]:null));u(l)&&(m||(b.isImage(l)?m="image":b.isSWF(l)?m="swf":"#"===l.charAt(0)?m="inline":u(f)&&(m="html",g=f)),"ajax"===m&&(p=l.split(/\s+/,2),l=p.shift(),k=p.shift()));g||("inline"===m?l?g=a(u(l)?l.replace(/.*(?=#[^\s]+$)/,""):l):q.isDom&&(g=f):
"html"===m?g=l:m||l||!q.isDom||(m="inline",g=f));a.extend(q,{href:l,type:m,content:g,title:x,selector:k});c[e]=q}),b.opts=a.extend(!0,{},b.defaults,d),d.keys!==r&&(b.opts.keys=d.keys?a.extend({},b.defaults.keys,d.keys):!1),b.group=c,b._start(b.opts.index)):void 0},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0).trigger("onReset").remove(),
b.current||b.trigger("afterClose"),b.coming=null)},close:function(c){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isOpen&&!0!==c?(b.isOpen=b.isOpened=!1,b.isClosing=!0,a(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),"fixed"===b.wrap.css("position")&&b.wrap.css(b._getPosition(!0)),b.transitions[b.current.closeMethod]()):(a(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()))},play:function(c){var d=function(){clearTimeout(b.player.timer)},
e=function(){d();b.current&&b.player.isActive&&(b.player.timer=setTimeout(b.next,b.current.playSpeed))},f=function(){d();a("body").unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};!0===c||!b.player.isActive&&!1!==c?b.current&&(b.current.loop||b.current.index<b.group.length-1)&&(b.player.isActive=!0,a("body").bind({"afterShow.player onUpdate.player":e,"onCancel.player beforeClose.player":f,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")):f()},next:function(a){var c=b.current;c&&
(u(a)||(a=c.direction.next),b.jumpto(c.index+1,a,"next"))},prev:function(a){var c=b.current;c&&(u(a)||(a=c.direction.prev),b.jumpto(c.index-1,a,"prev"))},jumpto:function(a,c,d){var e=b.current;e&&(a=h(a),b.direction=c||e.direction[a>=e.index?"next":"prev"],b.router=d||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==r&&(b.cancel(),b._start(a)))},reposition:function(a,c){var d;b.isOpen&&(d=b._getPosition(c),a&&"scroll"===a.type?(delete d.position,b.wrap.stop(!0,
!0).animate(d,200)):b.wrap.css(d))},update:function(a){var c=a&&a.type,d=!c||"orientationchange"===c;d&&(clearTimeout(w),w=null);b.isOpen&&!w&&((d||e)&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),w=setTimeout(function(){var d=b.current;d&&(b.wrap.removeClass("fancybox-tmp"),"scroll"!==c&&b._setDimension(),"scroll"===c&&d.canShrink||b.reposition(a),b.trigger("onUpdate"),w=null)},e?500:d?20:300))},toggle:function(c){b.isOpen&&(b.current.fitToView="boolean"===a.type(c)?
c:!b.current.fitToView,b.update())},hideLoading:function(){m.unbind("keypress.fb");a("#fancybox-loading").remove()},showLoading:function(){var c;b.hideLoading();m.bind("keypress.fb",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),b.cancel())});var d=a('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");b.defaults.fixed||(c=b.getViewport(),d.css({position:"absolute",top:.5*c.h+c.y,left:.5*c.w+c.x}))},getViewport:function(){var a=b.current?b.current.locked:!1,
c={x:l.scrollLeft(),y:l.scrollTop()};return a?(c.w=a[0].clientWidth,c.h=a[0].clientHeight):(c.w=e&&f.innerWidth?f.innerWidth:l.width(),c.h=e&&f.innerHeight?f.innerHeight:l.height()),c},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");m.unbind(".fb");l.unbind(".fb")},bindEvents:function(){var c,d=b.current;d&&(l.bind("orientationchange.fb"+(e?"":" resize.fb")+(d.autoCenter&&!d.locked?" scroll.fb":""),b.update),c=d.keys,c&&m.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||
e.srcElement;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||a(g).is("[contenteditable]"))||a.each(c,function(c,g){return 1<d.group.length&&g[f]!==r?(b[c](g[f]),e.preventDefault(),!1):-1<a.inArray(f,g)?(b[c](),e.preventDefault(),!1):void 0})}),a.fn.mousewheel&&d.mouseWheel&&b.wrap.bind("mousewheel.fb",function(c,e,f,g){for(var h=a(c.target||null),k=!1;h.length&&!(k||h.is(".fancybox-skin")||h.is(".fancybox-wrap"));)k=(k=h[0])&&!(k.style.overflow&&"hidden"===k.style.overflow)&&(k.clientWidth&&
k.scrollWidth>k.clientWidth||k.clientHeight&&k.scrollHeight>k.clientHeight),h=a(h).parent();0===e||k||1<b.group.length&&!d.canShrink&&(0<g||0<f?b.prev(0<g?"down":"left"):(0>g||0>f)&&b.next(0>g?"up":"right"),c.preventDefault())}))},trigger:function(c,d){var e,f=d||b.coming||b.current;if(f){if(a.isFunction(f[c])&&(e=f[c].apply(f,Array.prototype.slice.call(arguments,1))),!1===e)return!1;"onCancel"!==c||b.isOpened||(b.isActive=!1);f.helpers&&a.each(f.helpers,function(d,e){e&&b.helpers[d]&&a.isFunction(b.helpers[d][c])&&
b.helpers[d][c](e,f)});a.event.trigger(c+".fb")}},isImage:function(a){return u(a)&&a.match(/\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$/i)},isSWF:function(a){return u(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(c){var d,f,g,l,m={};if(c=h(c),d=b.group[c]||null,!d)return!1;if(m=a.extend(!0,{},b.opts,d),g=m.margin,l=m.padding,"number"===a.type(g)&&(m.margin=[g,g,g,g]),"number"===a.type(l)&&(m.padding=[l,l,l,l]),m.modal&&a.extend(!0,m,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,
keys:null,helpers:{overlay:{closeClick:!1}}}),m.autoSize&&(m.autoWidth=m.autoHeight=!0),"auto"===m.width&&(m.autoWidth=!0),"auto"===m.height&&(m.autoHeight=!0),m.group=b.group,m.index=c,b.coming=m,!1===b.trigger("beforeLoad"))return b.coming=null,void 0;if(f=m.type,d=m.href,!f)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=c,b[b.router](b.direction)):!1;if(b.isActive=!0,("image"===f||"swf"===f)&&(m.autoHeight=m.autoWidth=!1,m.scrolling="visible"),"image"===f&&(m.aspectRatio=
!0),"iframe"===f&&e&&(m.scrolling="scroll"),m.wrap=a(m.tpl.wrap).addClass("fancybox-"+(e?"mobile":"desktop")+" fancybox-type-"+f+" fancybox-tmp "+m.wrapCSS).appendTo(m.parent),a.extend(m,{skin:a(".fancybox-skin",m.wrap),outer:a(".fancybox-outer",m.wrap),inner:a(".fancybox-inner",m.wrap)}),a.each(["Top","Right","Bottom","Left"],function(a,b){m.skin.css("padding"+b,y(m.padding[a]))}),b.trigger("onReady"),"inline"===f||"html"===f){if(!m.content||!m.content.length)return b._error("content")}else if(!d)return b._error("href");
"image"===f?b._loadImage():"ajax"===f?b._loadAjax():"iframe"===f?b._loadIframe():b._afterLoad()},_error:function(c){a.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:c,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width;b.coming.height=this.height;b._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;b._error("image")};
a.src=b.coming.href;a.complete!==r&&a.complete||b.showLoading()},_loadAjax:function(){var c=b.coming;b.showLoading();b.ajaxLoad=a.ajax(a.extend({},c.ajax,{url:c.href,error:function(a,c){b.coming&&"abort"!==c?b._error("ajax",a):b.hideLoading()},success:function(a,d){"success"===d&&(c.content=a,b._afterLoad())}}))},_loadIframe:function(){var c=b.coming,d=a(c.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",e?"auto":c.iframe.scrolling).attr("src",c.href);a(c.wrap).bind("onReset",
function(){try{a(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(x){}});c.iframe.preload&&(b.showLoading(),d.one("load",function(){a(this).data("ready",1);e||a(this).bind("load.fb",b.update);a(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));c.content=d.appendTo(c.inner);c.iframe.preload||b._afterLoad()},_preloadImages:function(){var a,c=b.group,d=b.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(a=1;f>=a;a+=
1){var h=c[(d.index+a)%e];"image"===h.type&&h.href&&((new Image).src=h.href)}},_afterLoad:function(){var c,d,e,f,h=b.coming,l=b.current;if(b.hideLoading(),h&&!1!==b.isActive){if(!1===b.trigger("afterLoad",h,l))return h.wrap.stop(!0).trigger("onReset").remove(),b.coming=null,void 0;switch(l&&(b.trigger("beforeChange",l),l.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove(),"fixed"===l.wrap.css("position")&&l.wrap.css(b._getPosition(!0))),b.unbindEvents(),c=h.content,
d=h.type,e=h.scrolling,a.extend(b,{wrap:h.wrap,skin:h.skin,outer:h.outer,inner:h.inner,current:h,previous:l}),f=h.href,d){case "inline":case "ajax":case "html":h.selector?c=a("<div>").html(c).find(h.selector):t(c)&&(c.data("fancybox-placeholder")||c.data("fancybox-placeholder",a('<div class="fancybox-placeholder"></div>').insertAfter(c).hide()),c=c.show().detach(),h.wrap.bind("onReset",function(){a(this).find(c).length&&c.hide().replaceAll(c.data("fancybox-placeholder")).data("fancybox-placeholder",
!1)}));break;case "image":c=h.tpl.image.replace("{href}",f);break;case "swf":c='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+f+'"></param>';var m="";a.each(h.swf,function(a,b){c+='<param name="'+a+'" value="'+b+'"></param>';m+=" "+a+'="'+b+'"'});c+='<embed src="'+f+'" type="application/x-shockwave-flash" width="100%" height="100%"'+m+"></embed></object>"}t(c)&&c.parent().is(h.inner)||h.inner.append(c);b.trigger("beforeShow");
h.inner.css("overflow","yes"===e?"scroll":"no"===e?"hidden":e);b._setDimension();h.wrap.removeClass("fancybox-tmp");h.pos=a.extend({},h.dim,b._getPosition(!0));b.isOpen=!1;b.coming=null;b.bindEvents();b.isOpened?l.prevMethod&&b.transitions[l.prevMethod]():a(".fancybox-wrap").not(h.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?h.nextMethod:h.openMethod]();b._preloadImages()}},_setDimension:function(){var d,e,f,l,m,r,t,k,u,w=b.getViewport(),K=0,L=b.wrap,N=b.skin,I=b.inner,C=b.current;
var B=C.width;var D=C.height,n=C.minWidth,A=C.minHeight,M=C.maxWidth,J=C.maxHeight,P=C.scrolling,X=C.scrollOutside?C.scrollbarWidth:0;var O=C.margin;var V=O[1]+O[3];var W=O[0]+O[2];if(L.add(N).add(I).width("auto").height("auto"),d=N.outerWidth(!0)-N.width(),e=N.outerHeight(!0)-N.height(),f=V+d,l=W+e,O=c(B)?(w.w-f)*h(B)/100:B,m=c(D)?(w.h-l)*h(D)/100:D,"iframe"===C.type){if(u=C.content,C.autoHeight&&1===u.data("ready"))try{u[0].contentWindow.document.location&&(I.width(O).height(9999),r=u.contents().find("body"),
X&&r.css("overflow-x","hidden"),m=r.height())}catch(ja){}}else(C.autoWidth||C.autoHeight)&&(I.addClass("fancybox-tmp"),C.autoWidth||I.width(O),C.autoHeight||I.height(m),C.autoWidth&&(O=I.width()),C.autoHeight&&(m=I.height()),I.removeClass("fancybox-tmp"));if(B=h(O),D=h(m),k=O/m,n=h(c(n)?h(n,"w")-f:n),M=h(c(M)?h(M,"w")-f:M),A=h(c(A)?h(A,"h")-l:A),J=h(c(J)?h(J,"h")-l:J),r=M,t=J,V=w.w-V,W=w.h-W,C.aspectRatio?(B>M&&(B=M,D=B/k),D>J&&(D=J,B=D*k),n>B&&(B=n,D=B/k),A>D&&(D=A,B=D*k)):(B=Math.max(n,Math.min(B,
M)),D=Math.max(A,Math.min(D,J))),C.fitToView)if(M=Math.min(w.w-f,M),J=Math.min(w.h-l,J),I.width(h(B)).height(h(D)),L.width(h(B+d)),f=L.width(),l=L.height(),C.aspectRatio)for(;(f>V||l>W)&&B>n&&D>A&&!(19<K++);)D=Math.max(A,Math.min(J,D-10)),B=D*k,n>B&&(B=n,D=B/k),B>M&&(B=M,D=B/k),I.width(h(B)).height(h(D)),L.width(h(B+d)),f=L.width(),l=L.height();else B=Math.max(n,Math.min(B,B-(f-V))),D=Math.max(A,Math.min(D,D-(l-W)));X&&"auto"===P&&m>D&&V>B+d+X&&(B+=X);I.width(h(B)).height(h(D));L.width(h(B+d));f=
L.width();l=L.height();k=(f>V||l>W)&&B>n&&D>A;B=C.aspectRatio?r>B&&t>D&&O>B&&m>D:(r>B||t>D)&&(O>B||m>D);a.extend(C,{dim:{width:y(f),height:y(l)},origWidth:O,origHeight:m,canShrink:k,canExpand:B,wPadding:d,hPadding:e,wrapSpace:l-N.outerHeight(!0),skinSpace:N.height()-D});!u&&C.autoHeight&&D>A&&J>D&&!B&&I.height("auto")},_getPosition:function(a){var c=b.current,d=b.getViewport(),e=c.margin,f=b.wrap.width()+e[1]+e[3],g=b.wrap.height()+e[0]+e[2];e={position:"absolute",top:e[0],left:e[3]};return c.autoCenter&&
c.fixed&&!a&&g<=d.h&&f<=d.w?e.position="fixed":c.locked||(e.top+=d.y,e.left+=d.x),e.top=y(Math.max(e.top,e.top+(d.h-g)*c.topRatio)),e.left=y(Math.max(e.left,e.left+(d.w-f)*c.leftRatio)),e},_afterZoomIn:function(){var c=b.current;c&&(b.isOpen=b.isOpened=!0,b.wrap.addClass("fancybox-opened").css("overflow","visible"),b.reposition(),(c.closeClick||c.nextClick)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){a(d.target).is("a")||a(d.target).parent().is("a")||b[c.closeClick?"close":"next"]()}),
c.closeBtn&&a(c.tpl.closeBtn).appendTo(b.skin).bind("click.fb",b.close),c.arrows&&1<b.group.length&&((c.loop||0<c.index)&&a(c.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(c.loop||c.index<b.group.length-1)&&a(c.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),c.loop||c.index!==c.group.length-1?b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()):b.play(!1))},_afterZoomOut:function(){var c=b.current;a(".fancybox-wrap").stop(!0).trigger("onReset").remove();
a.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",c)}});b.transitions={getOrigPosition:function(){var a=b.current,c=a.element,d=a.orig,e={},f=50,h=50,l=a.hPadding,k=a.wPadding,m=b.getViewport();return!d&&a.isDom&&c.is(":visible")&&(d=c.find("img:first"),d.length||(d=c)),t(d)?(e=d.offset(),d.is("img")&&(f=d.outerWidth(),h=d.outerHeight())):(e.top=m.y+(m.h-h)*a.topRatio,e.left=m.x+(m.w-
f)*a.leftRatio),a.locked&&(e.top-=m.y,e.left-=m.x),{top:y(e.top-l*a.topRatio),left:y(e.left-k*a.leftRatio),width:y(f+k),height:y(h+l)}},step:function(a,c){var d,e,f,g=c.prop,l=b.current,k=l.wrapSpace,p=l.skinSpace;"width"!==g&&"height"!==g||(d=c.end===c.start?1:(a-c.start)/(c.end-c.start),b.isClosing&&(d=1-d),e="width"===g?l.wPadding:l.hPadding,f=a-e,b.skin[g](h("width"===g?f:f-k*d)),b.inner[g](h("width"===g?f:f-k*d-p*d)))},zoomIn:function(){var c=b.current,d=c.pos,e=c.openEffect,f="elastic"===e,
h=a.extend({opacity:1},d);delete h.position;f?(d=this.getOrigPosition(),c.openOpacity&&(d.opacity=.1)):"fade"===e&&(d.opacity=.1);b.wrap.css(d).animate(h,{duration:"none"===e?0:c.openSpeed,easing:c.openEasing,step:f?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,c=a.closeEffect,d="elastic"===c,e={opacity:.1};d&&(e=this.getOrigPosition(),a.closeOpacity&&(e.opacity=.1));b.wrap.animate(e,{duration:"none"===c?0:a.closeSpeed,easing:a.closeEasing,step:d?this.step:null,complete:b._afterZoomOut})},
changeIn:function(){var a,c=b.current,d=c.nextEffect,e=c.pos,f={opacity:1},l=b.direction;e.opacity=.1;"elastic"===d&&(a="down"===l||"up"===l?"top":"left","down"===l||"right"===l?(e[a]=y(h(e[a])-200),f[a]="+=200px"):(e[a]=y(h(e[a])+200),f[a]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(f,{duration:c.nextSpeed,easing:c.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var c=b.previous,d=c.prevEffect,e={opacity:.1},f=b.direction;"elastic"===d&&(e["down"===f||"up"===f?"top":
"left"]=("up"===f||"left"===f?"-":"+")+"=200px");c.wrap.animate(e,{duration:"none"===d?0:c.prevSpeed,easing:c.prevEasing,complete:function(){a(this).trigger("onReset").remove()}})}};b.helpers.overlay={overlay:null,update:function(){var b,c="100%";this.overlay.width(c).height("100%");a.browser.msie?(b=Math.max(d.documentElement.offsetWidth,d.body.offsetWidth),m.width()>b&&(c=m.width())):m.width()>l.width()&&(c=m.width());this.overlay.width(c).height(m.height())},onReady:function(b,c){a(".fancybox-overlay").stop(!0,
!0);this.overlay||a.extend(this,{overlay:a('<div class="fancybox-overlay"></div>').appendTo(c.parent),margin:m.height()>l.height()||"scroll"===a("body").css("overflow-y")?a("body").css("margin-right"):!1,el:d.all&&!d.querySelector?a("html"):a("body")});c.fixed&&!e&&(this.overlay.addClass("fancybox-overlay-fixed"),c.autoCenter&&(this.overlay.append(c.wrap),c.locked=this.overlay));!0===b.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(c,d){var f=this.overlay.unbind(".fb").width("auto").height("auto").css(c.css);
c.closeClick&&f.bind("click.fb",function(c){a(c.target).hasClass("fancybox-overlay")&&b.close()});d.fixed&&!e?d.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&a("body").css("margin-right",h(this.margin)+d.scrollbarWidth)):this.update();f.show()},onUpdate:function(a,b){b.fixed&&!e||this.update()},afterClose:function(c){var d=this;c=c.speedOut||0;d.overlay&&!b.isActive&&d.overlay.fadeOut(c||0,function(){a("body").css("margin-right",d.margin);d.el.removeClass("fancybox-lock");d.overlay.remove();
d.overlay=null})}};b.helpers.title={beforeShow:function(c){var d=b.current.title;var e=c.type;if(u(d)&&""!==a.trim(d)){switch(d=a('<div class="fancybox-title fancybox-title-'+e+'-wrap">'+d+"</div>"),e){case "inside":e=b.skin;break;case "outside":e=b.wrap;break;case "over":e=b.inner;break;default:e=b.skin,d.appendTo("body").width(d.width()).wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(h(d.css("margin-bottom")))}"top"===c.position?d.prependTo(e):d.appendTo(e)}}};a.fn.fancybox=
function(c){var d,e=a(this),f=this.selector||"",g=function(g){var h,k,l=a(this).blur(),m=d;g.ctrlKey||g.altKey||g.shiftKey||g.metaKey||l.is(".fancybox-wrap")||(h=c.groupAttr||"data-fancybox-group",k=l.attr(h),k||(h="rel",k=l.get(0)[h]),k&&""!==k&&"nofollow"!==k&&(l=f.length?a(f):e,l=l.filter("["+h+'="'+k+'"]'),m=l.index(this)),c.index=m,!1!==b.open(l,c)&&g.preventDefault())};return c=c||{},d=c.index||0,f&&!1!==c.live?m.undelegate(f,"click.fb-start").delegate(f+":not('.fancybox-item, .fancybox-nav')",
"click.fb-start",g):e.unbind("click.fb-start").bind("click.fb-start",g),this};m.ready(function(){a.scrollbarWidth===r&&(a.scrollbarWidth=function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children();c=c.innerWidth()-c.height(99).innerWidth();return b.remove(),c});a.support.fixedPosition===r&&(a.support.fixedPosition=function(){var b=a('<div style="position:fixed;top:20px;"></div>').appendTo("body"),c=20===b[0].offsetTop||15===b[0].offsetTop;return b.remove(),
c}());a.extend(b.defaults,{scrollbarWidth:a.scrollbarWidth(),fixed:a.support.fixedPosition,parent:a("body")})})})(window,document,jQuery);
(function(f){f.fancybox.helpers.thumbs={wrap:null,list:null,width:0,source:function(d){var a;return d.element&&(a=f(d.element).find("img").attr("src")),!a&&"image"===d.type&&d.href&&(a=d.href),a},init:function(d,a){var r=this,l=d.width||50,m=d.height||50,b=d.source||this.source;var w="";for(var e=0;e<a.group.length;e++)w+='<li><a style="width:'+l+"px;height:"+m+'px;" href="javascript:jQuery.fancybox.jumpto('+e+');"></a></li>';this.wrap=f('<div id="fancybox-thumbs"></div>').addClass(d.position||"bottom").appendTo("body");
this.list=f("<ul>"+w+"</ul>").appendTo(this.wrap);f.each(a.group,function(d){var e=b(a.group[d]);e&&f("<img />").load(function(){var a,b,e,g=this.width,p=this.height;r.list&&g&&p&&(a=g/l,b=p/m,e=r.list.children().eq(d).find("a"),1<=a&&1<=b&&(a>b?(g=Math.floor(g/b),p=m):(g=l,p=Math.floor(p/a))),f(this).css({width:g,height:p,top:Math.floor(m/2-p/2),left:Math.floor(l/2-g/2)}),e.width(l).height(m),f(this).hide().appendTo(e).fadeIn(300))}).attr("src",e)});this.width=this.list.children().eq(0).outerWidth(!0);
this.list.width(this.width*(a.group.length+1)).css("left",Math.floor(.5*f(window).width()-(a.index*this.width+.5*this.width)))},beforeLoad:function(d,a){return 2>a.group.length?(a.helpers.thumbs=!1,void 0):(a.margin["top"===d.position?0:2]+=(d.height||50)+15,void 0)},afterShow:function(d,a){this.list?this.onUpdate(d,a):this.init(d,a);this.list.children().removeClass("active").eq(a.index).addClass("active")},onUpdate:function(d,a){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*f(window).width()-
(a.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove();this.list=this.wrap=null;this.width=0}}})(jQuery);_wAMD.define("legacy/fancybox/fancybox",function(){});
_wAMD.require("underscore mustache site/core site/app util/platform/elements/PlatformElement backbone legacy/flyout_menus_jq site/fancybox legacy/fancybox/fancybox".split(" "),function(f,d,a,r,l,m){(r.start(),window.PlatformElement=l,f.each(_W.templates,function(a,f){d.compilePartial(f,a)}),_W.events={},f.extend(_W.events,m.Events),document.createEvent&&document.addEventListener)?(f=document.createEvent("Event"),f.initEvent("appReady",!0,!1),document.dispatchEvent(f),document.documentElement.appReady=
1):0===document.documentElement.appReady?document.documentElement.appReady++:document.documentElement.appReady=1});_wAMD.define("site/main",function(){});
